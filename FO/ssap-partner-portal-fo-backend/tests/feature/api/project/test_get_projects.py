import pytest
from app.main import app
from app.models.master import MasterSupporterOrganizationModel
from app.models.project import (
    GrossProfitAttribute,
    ProjectModel,
    SalesforceMainCustomerAttribute,
)
from app.models.user import UserModel
from app.resources.const import DataType, MasterDataType, UserRoleType
from fastapi.testclient import TestClient

client = TestClient(app)


class TestGetProjects:
    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&sort=name:asc&limit=2&offsetPage=1",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_1page(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常1ページ目  total:5件,limit=2,offsetPage=1"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&sort=name:asc&limit=2&offsetPage=2",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 2,
                    "total": 5,
                    "projects": [
                        {
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト３",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_2page(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常2ページ目  total:5件,limit=2,offsetPage=2"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&sort=name:asc&limit=2&offsetPage=3",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 3,
                    "total": 5,
                    "projects": [
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_3page(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常3ページ目  total:5件,limit=2,offsetPage=3"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&fromDate=20210101&all=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト３",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_no_specified_to_year_month_and_customer_id(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常（支援開始日、取引先IDの指定なし）"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト３",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_no_specified_to_year_month(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常（取引先ID指定なし）"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&sort=name:asc&limit=2&offsetPage=1",
                [],
                {
                    "offsetPage": 1,
                    "total": 0,
                    "projects": [],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_zero(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常 0件"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&fromDate=20210101&all=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["906a3144-9650-4a34-8a23-3b02f3b9aeac"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 2,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "906a3144-9650-4a34-8a23-3b02f3b9aeac",
                            "mainSupporterUserName": "山田太郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "906a3144-9650-4a34-8a23-3b02f3b9aeac",
                                    "name": "山田太郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        company="テスト株式会社",
                        supporter_organization_id=[
                            "556a3144-9650-4a34-8a23-3b02f3b9aeac"
                        ],
                        is_input_man_hour=True,
                        project_ids=["886a3144-9650-4a34-8a23-3b02f3b9aeac"],
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        agreed=True,
                        role=UserRoleType.SUPPORTER.key,
                        version=1,
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_supporter_user")
    def test_ok_visible_only_for_supporter(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常(支援者でアクセス可能な情報のみ取得).
        所属していない非公開案件はアクセス不可.
        サンプルプロジェクト1～5のうち、2,3,4がアクセス不可で、取得するのは1,5.
        """
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&fromDate=20210101&all=true",
                [
                    # 担当案件：アクセス可
                    ProjectModel(
                        id="886a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    # 非担当所属課案件：アクセス可
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="556a3144-9650-4a34-8a23-3b02f3b9aeac",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    # 非担当非所属課公開案件：アクセス可
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    # 非担当非所属課非公開案件：アクセス不可
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 4,
                    "projects": [
                        {
                            "id": "886a3144-9650-4a34-8a23-3b02f3b9aeac",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "906a3144-9650-4a34-8a23-3b02f3b9aeac",
                            "mainSupporterUserName": "山田太郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "556a3144-9650-4a34-8a23-3b02f3b9aeac",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },
                        {
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト３",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "continued": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "contractDate": "2021/01/30",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                                "job": "部長",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },

                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="556a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        company="テスト株式会社",
                        supporter_organization_id=[
                            "2d82eff6-0af4-48a6-8036-9bec43db33e1"
                        ],
                        is_input_man_hour=True,
                        project_ids=["886a3144-9650-4a34-8a23-3b02f3b9aeac"],
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        agreed=True,
                        role=UserRoleType.SUPPORTER_MGR.key,
                        version=1,
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_supporter_mgr_user")
    def test_ok_visible_only_for_supporter_mgr(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常(支援者責任者でアクセス可能な情報のみ取得).
        非所属非公開案件はアクセス不可.
        サンプルプロジェクト1～5のうち、2,3,4がアクセス不可で、取得するのは1,5.
        """
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&fromDate=20210101&all=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 2,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "906a3144-9650-4a34-8a23-3b02f3b9aeac",
                            "mainSalesUserName": "山田太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "906a3144-9650-4a34-8a23-3b02f3b9aeac",
                            "mainSalesUserName": "山田太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        company="テスト株式会社",
                        is_input_man_hour=True,
                        project_ids=["886a3144-9650-4a34-8a23-3b02f3b9aeac"],
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        agreed=True,
                        role=UserRoleType.SALES.key,
                        version=1,
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_sales_user")
    def test_ok_visible_only_for_sales(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常(営業担当者でアクセス可能な情報のみ取得).
        所属していない非公開案件はアクセス不可.
        サンプルプロジェクト1～5のうち、2,3,4がアクセス不可で、取得するのは1,5.
        """
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&fromDate=20210101&all=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="106a3144-9650-4a34-8a23-3b02f3b9aeac",
                        name="サンプルプロジェクト１",
                        customer_name="取引先株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="106a3144-9650-4a34-8a23-3b02f3b9aeac",
                        name="サンプルプロジェクト５",
                        customer_name="取引先株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="886a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト８８",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 1,
                    "projects": [
                        {
                            "id": "886a3144-9650-4a34-8a23-3b02f3b9aeac",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト８８",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        customer_id="106a3144-9650-4a34-8a23-3b02f3b9aeac",
                        customer_name="取引先株式会社",
                        job="部長",
                        organization_name="コンサルティング事業部",
                        project_ids=["886a3144-9650-4a34-8a23-3b02f3b9aeac"],
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        agreed=True,
                        role=UserRoleType.CUSTOMER.key,
                        version=1,
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_customer_user")
    def test_ok_visible_only_for_customer(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常(顧客でアクセス可能な情報のみ取得).
        自身の情報以外はアクセス不可.
        サンプルプロジェクト1～5,88のうち、1～5がアクセス不可で、取得するのは88.
        """
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&sort=name:asc&limit=2&offsetPage=1",
                [
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_sort_name_asc(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常 sort: name:asc"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true&sort=customerName:asc&limit=2&offsetPage=1",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社５",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社４",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社３",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社２",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社１",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社１",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社２",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_sort_customer_name_asc(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常 sort: customerName:asc"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?fromYearMonth=202101&toYearMonth=202303&fromDate=20210101&toDate=20230331&all=true&sort=supportDateFrom:desc&limit=2&offsetPage=1",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社５",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/26",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社４",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/27",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社３",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/28",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社２",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/29",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社１",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        main_supporter_user_id="51ff73f4-2414-421c-b64c-9981f988b331",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["51ff73f4-2414-421c-b64c-9981f988b331"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社１",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社２",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/29",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200.0,
                            "mainCustomerUserId": "7b36cc66-fe66-495f-b416-16ecc879fbaa",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "51ff73f4-2414-421c-b64c-9981f988b331",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "51ff73f4-2414-421c-b64c-9981f988b331",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="1b5e955f-4c1a-405d-b9ba-b618c8ba1edd",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="7b36cc66-fe66-495f-b416-16ecc879fbaa",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="51ff73f4-2414-421c-b64c-9981f988b331",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="906a3144-9650-4a34-8a23-3b02f3b9aeac",
                        data_type=DataType.USER,
                        name="山田太郎",
                        email="taro.yamada@example.com",
                        job="部長",
                        supporter_organization_id=[
                            "89cbe2ed-f44c-4a1c-9408-c67b0ca2270d"
                        ],
                        organization_name="IST",
                        cognito_id="itk5s7d0-fj4s-kg05-b238-kld430d2bb97",
                        role="supporter_mgr",
                    ),
                ],
            ),
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_ok_sort_support_date_from_desc(
        self,
        mocker,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常 sort: supportDateFrom:desc"""
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}")

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param",
        [
            # fromYearMonth
            "?fromYearMonth=202013",
            # toYearMonth
            "?toYearMonth=202013",
            # fromYearMonth, toYearMonth の年月の逆転
            "?fromYearMonth=202202&toYearMonth=202201",
            # fromDate
            "?fromDate=20201301",
            # toDate
            "?toDate=20201331",
            # fromDate, toDate の年月の逆転
            "?fromDate=20220202&toDate=20220201",
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_validation(
        self,
        mocker,
        query_param,
    ):
        """fromYearMonth, toYearMonth, fromDate, toDate バリデーションエラー"""
        response = client.get(f"/api/projects{query_param}")

        assert response.status_code == 400

    @pytest.mark.parametrize(
        "query_param",
        [
            # sort: Enum
            "?sort=name:aaa",
        ],
    )
    @pytest.mark.usefixtures("auth_user")
    def test_validation_enum(
        self,
        mocker,
        query_param,
    ):
        """status,sortのENUMバリデーションエラー"""
        response = client.get(f"/api/projects{query_param}")

        assert response.status_code == 422
