from datetime import datetime

import pytest
import freezegun
from fastapi import HTTPException, status
from fastapi.testclient import TestClient
from pynamodb.exceptions import DoesNotExist
from pynamodb.models import BatchWrite

from app.main import app
from app.models.admin import AdminModel
from app.models.customer import CustomerModel
from app.models.master import MasterSupporterOrganizationModel
from app.models.project import ProjectModel
from app.models.user import UserModel
from app.resources.const import DataType, MasterDataType, UserRoleType
from app.service.project_service import ProjectService
from app.utils.aws.sqs import SqsHelper
from app.utils.platform import PlatformApiOperator

client = TestClient(app)

REQUEST_HEADERS = {"x-otp-verified-token": "111111"}


@freezegun.freeze_time("2022-05-23T16:34:21.523+09:00")
class TestCreateProject:
    @pytest.mark.parametrize(
        "role_types",
        [
            [UserRoleType.SYSTEM_ADMIN.key],
            [UserRoleType.SALES.key],
            [UserRoleType.SALES_MGR.key],
            [UserRoleType.SUPPORTER_MGR.key],
            [UserRoleType.SURVEY_OPS.key],
            [UserRoleType.MAN_HOUR_OPS.key],
            [UserRoleType.BUSINESS_MGR.key],
        ]
    )
    def test_access_ok(
        self,
        mock_auth_admin,
        role_types,
    ):
        mock_auth_admin(role_types)
        response = client.post("/api/projects", headers=REQUEST_HEADERS)

        assert response.status_code == 422

    @pytest.mark.parametrize(
        "body, expected, customer_model, master_model, user_models, admin_models",
        [
            (
                {
                    "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                    "name": "サンプルプロジェクト",
                    "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                    "createNew": "True",
                    "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                    "phase": "プラン提示(D)",
                    "customerSuccess": "DXの実現",
                    "supportDateFrom": "2021/01/30",
                    "supportDateTo": "2021/02/28",
                    "profit": {
                        "year": 4800000,
                    },
                    "totalContractTime": 200,
                    "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                    "salesforceMainCustomer": {
                        "name": "山田太郎",
                        "email": "yamada@example.com",
                        "organizationName": "IST",
                    },
                    "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                    "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                    "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                    "salesforceMainSupporterUserName": "山田太郎",
                    "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                    "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                    "isCountManHour": "True",
                    "isKarteRemind": "True",
                    "isMasterKarteRemind": "True",
                    "contractType": "有償",
                    "isSecret": "False",
                    "isSolverProject": "True",
                    "dedicatedSurveyUserName": "山田太郎",
                    "dedicatedSurveyUserEmail": "user@example.com",
                    "surveyPassword": "ABCDEFGH1234",
                    "isSurveyEmailToSalesforceMainCustomer": True,
                },
                {
                    "id": "efba46d3-1d56-428b-ac6d-a51e263b54a8",
                    "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                    "salesforceCustomerId": None,
                    "salesforceOpportunityId": None,
                    "salesforceUpdateAt": None,
                    "name": "サンプルプロジェクト",
                    "customerName": "ソニーグループ株式会社",
                    "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                    "serviceTypeName": "組織開発",
                    "createNew": True,
                    "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                    "mainSalesUserName": "田中太郎",
                    "phase": "プラン提示(D)",
                    "customerSuccess": "DXの実現",
                    "supportDateFrom": "2021/01/30",
                    "supportDateTo": "2021/02/28",
                    "profit": {
                        "monthly": [
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                            400000.0,
                        ],
                        "quarterly": [1200000.0, 1200000.0, 1200000.0, 1200000.0],
                        "half": [2400000.0, 2400000.0],
                        "year": 4800000,
                    },
                    "totalContractTime": 200.0,
                    "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                    "mainCustomerUserName": "田中次郎",
                    "salesforceMainCustomer": {
                        "name": "山田太郎",
                        "email": "yamada@example.com",
                        "organizationName": "IST",
                    },
                    "customerUsers": [
                        {"id": "c9b67094-cdab-494c-818e-d4845088269b", "name": "田中三郎"}
                    ],
                    "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                    "mainSupporterUserName": "田中三郎",
                    "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                    "supporterOrganizationName": "IST",
                    "salesforceMainSupporterUserName": "山田太郎",
                    "supporterUsers": [
                        {"id": "c9b67094-cdab-494c-818e-d4845088269b", "name": "田中三郎"}
                    ],
                    "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                    "isCountManHour": True,
                    "isKarteRemind": True,
                    "isMasterKarteRemind": True,
                    "contractType": "有償",
                    "isSecret": False,
                    "isSolverProject": True,
                    "dedicatedSurveyUserName": "山田太郎",
                    "dedicatedSurveyUserEmail": "user@example.com",
                    "surveyPassword": "ABCDEFGH1234",
                    "isSurveyEmailToSalesforceMainCustomer": True,
                    "createId": "906a3144-9650-4a34-8a23-3b02f3b9aeac",
                    "createAt": "2022-05-23T07:34:21.523+09:00",
                    "updateId": "906a3144-9650-4a34-8a23-3b02f3b9aeac",
                    "updateAt": "2022-05-23T07:34:21.523+09:00",
                    "version": 1,
                },
                CustomerModel(
                    id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                    data_type=DataType.CUSTOMER,
                    name="ソニーグループ株式会社",
                    category="ソニーグループ",
                    salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                    salesforce_update_at="2020-10-23T02:21:39.356000+0000",
                    salesforce_target=None,
                    salesforce_credit_limit=None,
                    salesforce_credit_get_month=None,
                    salesforce_credit_manager=None,
                    salesforce_credit_no_retry=None,
                    salesforce_paws_credit_number=None,
                    salesforce_customer_owner=None,
                    salesforce_customer_segment=None,
                    create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                    create_at="2020-10-23T03:21:39.356000+0000",
                    update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                    update_at="2020-10-23T04:21:39.356000+0000",
                    version=1,
                ),
                # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
                MasterSupporterOrganizationModel(
                    id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                    data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                    name="組織開発",
                    value="IST",
                    attributes=None,
                    order=1,
                    use=True,
                    create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                    create_at="2020-10-23T03:21:39.356000+0000",
                    update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                    update_at="2020-10-23T04:21:39.356000+0000",
                    version=1,
                ),
                # MasterSupporterOrganizationModel(
                #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                #     name="組織開発",
                #     value=None,
                #     attributes=None,
                #     order=1,
                #     use=True,
                #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                #     create_at="2020-10-23T03:21:39.356000+0000",
                #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                #     update_at="2020-10-23T04:21:39.356000+0000",
                #     version=1,
                # ),
                # MasterSupporterOrganizationModel(
                #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                #     name="Ideation Service Team",
                #     value="IST",
                #     attributes=None,
                #     order=1,
                #     use=True,
                #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                #     create_at="2020-10-23T03:21:39.356000+0000",
                #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                #     update_at="2020-10-23T04:21:39.356000+0000",
                #     version=1,
                # ),
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    AdminModel(
                        id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        data_type=DataType.ADMIN,
                        name="田中太郎",
                        email="user@example.com",
                        roles=UserRoleType.SYSTEM_ADMIN.key,
                        company=None,
                        job="部長",
                        supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                        organization_name=None,
                        cognito_id=None,
                        last_login_at=datetime.now(),
                        otp_secret=None,
                        otp_verified_token=None,
                        otp_verified_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok(
        self,
        mocker,
        mock_auth_admin,
        body,
        expected,
        customer_model,
        master_model,
        user_models,
        admin_models,
    ):
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = customer_model
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        mock_master_supporter.return_value = master_model
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = user_models

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = admin_models
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        mock_pf_create_project = mocker.patch.object(
            PlatformApiOperator, "create_project"
        )
        mock_pf_create_project.return_value = (200, {"message": "OK", "id": 1})
        mock_pf_create_program = mocker.patch.object(
            PlatformApiOperator, "create_program"
        )
        mock_pf_create_program.return_value = (200, {"message": "OK"})

        response = client.post(
            "/api/project",
            headers=REQUEST_HEADERS,
        )

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        # id, version以外を比較
        del actual["id"], actual["version"]
        del expected["id"], expected["version"]
        assert actual == expected

    @pytest.mark.parametrize(
        "phase",
        [
            "プラン提示(D)",
            "見積もり提示(C)",
            "内諾(B)",
            "内部決済完了(A)",
            "失注(G)",
            "Open",
            "活動中(E)",
            "Drop(F)",
        ],
    )
    def test_project_phase_type_ok(self, mocker, mock_auth_admin, phase):
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": phase,
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": True,
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        mock_pf_create_project = mocker.patch.object(
            PlatformApiOperator, "create_project"
        )
        mock_pf_create_project.return_value = (200, {"message": "OK", "id": 1})
        mock_pf_create_program = mocker.patch.object(
            PlatformApiOperator, "create_program"
        )
        mock_pf_create_program.return_value = (200, {"message": "OK"})

        response = client.post(
            "/api/project",
            headers=REQUEST_HEADERS,
        )

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        assert response.status_code == 200

    @pytest.mark.parametrize(
        "contract_type",
        ["有償", "無償"],
    )
    def test_contract_type_ok(self, mocker, mock_auth_admin, contract_type):
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": contract_type,
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        mock_pf_create_project = mocker.patch.object(
            PlatformApiOperator, "create_project"
        )
        mock_pf_create_project.return_value = (200, {"message": "OK", "id": 1})
        mock_pf_create_program = mocker.patch.object(
            PlatformApiOperator, "create_program"
        )
        mock_pf_create_program.return_value = (200, {"message": "OK"})

        response = client.post(
            "/api/project",
            headers=REQUEST_HEADERS,
        )

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        assert response.status_code == 200

    def test_400_customer_id_not_exists(self, mocker, mock_auth_admin):
        """取引先IDの存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.side_effect = DoesNotExist()
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        actual = response.json()
        assert response.status_code == 400
        assert (
            actual["detail"] == "[{'loc': ['body', 'customerId'], 'msg': 'Not exist.'}]"
        )

    def test_400_service_type_not_exists(self, mocker, mock_auth_admin):
        """サービス区分の存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        mock_master_supporter.side_effect = DoesNotExist()
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        actual = response.json()
        assert response.status_code == 400
        assert (
            actual["detail"]
            == "[{'loc': ['body', 'serviceType'], 'msg': 'Not exist.'}]"
        )

    def test_400_supporter_organization_id_not_exists(self, mocker, mock_auth_admin):
        """支援者組織（課）IDの存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mocker.patch.object(MasterSupporterOrganizationModel, "get")
        mock_master_supporter = mocker.patch.object(ProjectService, "get_service_name")
        mock_master_supporter.side_effect = HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail=[{"loc": ["body", "supporterOrganizationId"], "msg": "Not exist."}],
        )
        mock_get_customer_name = mocker.patch.object(
            ProjectService, "get_customer_name"
        )
        mock_get_customer_name.return_value = "組織開発"
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        assert response.status_code == 400

    def test_400_main_sales_user_id_not_exists(self, mocker, mock_auth_admin):
        """営業担当者IDの存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "xxxxxxxx-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        actual = response.json()
        assert response.status_code == 400
        assert (
            actual["detail"]
            == "[{'loc': ['body', 'mainSalesUserId'], 'msg': 'Not exist.'}]"
        )

    def test_400_main_customer_user_id_not_exists(self, mocker, mock_auth_admin):
        """営業担当者IDの存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            # "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "mainCustomerUserId": "xxxxxxxx-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        actual = response.json()
        assert response.status_code == 400
        assert (
            actual["detail"]
            == "[{'loc': ['body', 'mainCustomerUserId'], 'msg': 'Not exist.'}]"
        )

    def test_400_main_supporter_user_id_not_exists(self, mocker, mock_auth_admin):
        """メイン支援者（主担当）IDの存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            # "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "mainSupporterUserId": "xxxxxxxx-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        actual = response.json()
        assert response.status_code == 400
        assert (
            actual["detail"]
            == "[{'loc': ['body', 'mainSupporterUserId'], 'msg': 'Not exist.'}]"
        )

    def test_400_customer_users_not_exists(self, mocker, mock_auth_admin):
        """顧客メンバーIDの存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            # "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "customerUsers": [{"id": "xxxxxxxx-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        actual = response.json()
        assert response.status_code == 400
        assert (
            actual["detail"]
            == "[{'loc': ['body', 'customerUsers'], 'msg': 'Not exist.'}]"
        )

    def test_400_supporter_users_not_exists(self, mocker, mock_auth_admin):
        """支援メンバー（副担当）IDの存在チェックエラー"""
        body = {
            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            "name": "サンプルプロジェクト",
            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "createNew": "True",
            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
            "phase": "プラン提示(D)",
            "customerSuccess": "DXの実現",
            "supportDateFrom": "2021/01/30",
            "supportDateTo": "2021/02/28",
            "profit": {
                "year": 4800000,
            },
            "totalContractTime": 200,
            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
            "salesforceMainCustomer": {
                "name": "山田太郎",
                "email": "yamada@example.com",
                "organizationName": "IST",
            },
            "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
            "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
            "salesforceMainSupporterUserName": "山田太郎",
            # "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
            "supporterUsers": [{"id": "xxxxxxxx-cdab-494c-818e-d4845088269b"}],
            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
            "isCountManHour": "True",
            "isKarteRemind": "True",
            "isMasterKarteRemind": "True",
            "contractType": "有償",
            "isSecret": "False",
            "isSolverProject": "True",
            "dedicatedSurveyUserName": "",
            "dedicatedSurveyUserEmail": "",
            "surveyPassword": "ABCDEFGH1234",
            "isSurveyEmailToSalesforceMainCustomer": True,
        }
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        mock_customer = mocker.patch.object(CustomerModel, "get")
        mock_customer.return_value = CustomerModel(
            id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
            data_type=DataType.CUSTOMER,
            name="ソニーグループ株式会社",
            category="ソニーグループ",
            salesforce_customer_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            salesforce_update_at="2020-10-23T02:21:39.356000+0000",
            salesforce_target=None,
            salesforce_credit_limit=None,
            salesforce_credit_get_month=None,
            salesforce_credit_manager=None,
            salesforce_credit_no_retry=None,
            salesforce_paws_credit_number=None,
            salesforce_customer_owner=None,
            salesforce_customer_segment=None,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel, "get"
        )
        # mockで複数定義できないため、サービス種別と支援者組織を１つで定義
        mock_master_supporter.return_value = MasterSupporterOrganizationModel(
            id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
            data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
            name="組織開発",
            value="IST",
            attributes=None,
            order=1,
            use=True,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T04:21:39.356000+0000",
            version=1,
        )
        # MasterSupporterOrganizationModel(
        #     id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
        #     data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
        #     name="組織開発",
        #     value=None,
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        # MasterSupporterOrganizationModel(
        #     id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
        #     data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
        #     name="Ideation Service Team",
        #     value="IST",
        #     attributes=None,
        #     order=1,
        #     use=True,
        #     create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     create_at="2020-10-23T03:21:39.356000+0000",
        #     update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
        #     update_at="2020-10-23T04:21:39.356000+0000",
        #     version=1,
        # ),
        mock_user = mocker.patch.object(UserModel, "batch_get")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mocker.patch.object(ProjectModel, "save")
        mocker.patch.object(BatchWrite, "save")
        mock_user_admin = mocker.patch.object(AdminModel, "scan")
        mock_user_admin.return_value = [
            AdminModel(
                id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                data_type=DataType.ADMIN,
                name="田中太郎",
                email="user@example.com",
                roles=UserRoleType.SYSTEM_ADMIN.key,
                company=None,
                job="部長",
                supporter_organization_id="180a3597-b7e7-42c8-902c-a29016afa662",
                organization_name=None,
                cognito_id=None,
                last_login_at=datetime.now(),
                otp_secret=None,
                otp_verified_token=None,
                otp_verified_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]
        mocker.patch.object(SqsHelper, "send_message_to_queue")

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        actual = response.json()
        assert response.status_code == 400
        assert (
            actual["detail"]
            == "[{'loc': ['body', 'supporterUsers'], 'msg': 'Not exist.'}]"
        )

    @pytest.mark.parametrize(
        "body",
        [
            # ###########################
            # customerId
            # ###########################
            # 必須チェック
            {
                # "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                # "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "customerId": None,
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # name
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                # "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                # "name": "サンプルプロジェクト",
                "name": None,
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # serviceType
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                # "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                # "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "serviceType": None,
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # mainSalesUserId
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                # "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                # "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "mainSalesUserId": None,
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # contractDate
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # phase
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                # "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                # "phase": "プラン提示(D)",
                "phase": None,
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ENUMチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # supportDateFrom
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                # "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                # "supportDateFrom": "2021/01/30",
                "supportDateFrom": None,
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # supportDateTo
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                # "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                # "supportDateTo": "2021/02/28",
                "supportDateTo": None,
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # profit
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                # "profit": {
                #     "monthly": [400000,400000,400000,400000,400000,400000,400000,400000,400000,400000,400000,400000],
                #     "quarterly": [1200000,1200000,1200000,1200000],
                #     "half": [2400000,2400000],
                #     "year": 4800000,
                # },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                # "profit": {
                #     "monthly": [400000,400000,400000,400000,400000,400000,400000,400000,400000,400000,400000,400000],
                #     "quarterly": [1200000,1200000,1200000,1200000],
                #     "half": [2400000,2400000],
                #     "year": 4800000,
                # },
                "profit": None,
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # profit.year
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    # "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    # "year": 4800000,
                    "year": None,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # totalContractTime
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                # "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                # "totalContractTime": 200,
                "totalContractTime": None,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # isCountManHour
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                # "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                # "isCountManHour": "True",
                "isCountManHour": None,
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # isKarteRemind
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                # "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                # "isKarteRemind": "True",
                "isKarteRemind": None,
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # isMasterKarteRemind
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                # "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                # "isMasterKarteRemind": "True",
                "isMasterKarteRemind": None,
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # contractType
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                # "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                # "contractType": "有償",
                "contractType": None,
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ENUMチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "一括",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # isSecret
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                # "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                # "isSecret": "False",
                "isSecret": None,
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # dedicatedSurveyUserName
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                # "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                # "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserName": None,
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # dedicatedSurveyUserName
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                # "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                # "dedicatedSurveyUserEmail": "",
                "dedicatedSurveyUserEmail": None,
                "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # surveyPassword
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                # "surveyPassword": "ABCDEFGH1234",
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                # "surveyPassword": "ABCDEFGH1234",
                "surveyPassword": None,
                "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # ###########################
            # isSurveyEmailToSalesforceMainCustomer
            # ###########################
            # 必須チェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                # "isSurveyEmailToSalesforceMainCustomer": True,
            },
            # Noneチェック
            {
                "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                "name": "サンプルプロジェクト",
                "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "createNew": "True",
                "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                "phase": "プラン提示(D)",
                "customerSuccess": "DXの実現",
                "supportDateFrom": "2021/01/30",
                "supportDateTo": "2021/02/28",
                "profit": {
                    "year": 4800000,
                },
                "totalContractTime": 200,
                "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                "salesforceMainCustomer": {
                    "name": "山田太郎",
                    "email": "yamada@example.com",
                    "organizationName": "IST",
                },
                "customerUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                "supporterOrganizationId": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                "salesforceMainSupporterUserName": "山田太郎",
                "supporterUsers": [{"id": "c9b67094-cdab-494c-818e-d4845088269b"}],
                "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                "isCountManHour": "True",
                "isKarteRemind": "True",
                "isMasterKarteRemind": "True",
                "contractType": "有償",
                "isSecret": "False",
                "dedicatedSurveyUserName": "",
                "dedicatedSurveyUserEmail": "",
                "surveyPassword": "ABCDEFGH1234",
                # "isSurveyEmailToSalesforceMainCustomer": True,
                "isSurveyEmailToSalesforceMainCustomer": None,
            },
        ],
    )
    def test_validation(self, mock_auth_admin, body):
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        response = client.post("/api/projects", json=body, headers=REQUEST_HEADERS)
        assert response.status_code == 422
