# バックログ課題管理フォーマットルール

## 1. 概要

このドキュメントは、バックログで課題を管理する際の統一フォーマットルールを定義したものです。
すべての課題は、このフォーマットに従って記載することで、情報の抜け漏れを防ぎ、チーム内での情報共有を円滑にします。

## 2. 基本ルール

### 2.1 Markdown記法の使用
- バックログのMarkdown記法を使用すること
- テーブルの前後には必ず**1行以上の空白行**を入れること
- テーブルの区切り線（2行目）は3つ以上の `-` を使用すること

### 2.2 セクション構成
すべての課題は以下のセクションを含むこと：
1. 関連課題
2. 機能概要
3. 画面デザイン
4. 利用可能権限
5. 項目定義
6. バリデーション
7. リンク・ボタン項目
8. イベント定義
9. 利用DB
10. 利用API
11. シーケンス・フロー

## 3. 各セクションの記載ルール

### 3.1 関連課題
- 関連する課題番号を `#番号` 形式で記載
- 複数ある場合は箇条書きで記載
- 関連課題がない場合は「なし」と記載

### 3.2 機能概要
- 実装する機能の概要を簡潔に記載
- 3〜5行程度で機能の目的と主要な動作を説明

### 3.3 画面デザイン
- デザインファイルを添付
- ファイル名は `機能名_ui.png` 形式で統一
- 添付できない場合は「後日添付」と記載

### 3.4 利用可能権限
- 機能を利用できるロールと条件を記載
- すべてのロールについて記載すること

### 3.5 項目定義
- 画面に表示されるすべての項目を記載
- I/O欄：I（入力）、O（出力）、I/O（入出力）のいずれかを記載
- 必須欄：必須の場合は「○」、任意の場合は空欄
- データ型：string, number, boolean, date等を記載

### 3.6 バリデーション
- チェック場所：F（フロントエンド）、B（バックエンド）、F/B（両方）のいずれかを記載
- エラーメッセージは日本語で、ユーザーにわかりやすく記載

### 3.7 リンク・ボタン項目
- 画面上のすべてのリンクとボタンを記載
- 遷移先は画面名またはURLパスを記載
- 初期状態は「活性」または「非活性」を記載

### 3.8 イベント定義
- ユーザーの操作に応じた処理を記載
- 異常時の処理は具体的に記載（例：「エラーダイアログ表示」「画面上部にエラー表示」）

### 3.9 利用DB
- 場所：NPF（本番環境）、PP（開発環境）のいずれかを記載
- CRUD：C（作成）、R（読取）、U（更新）、D（削除）の組み合わせを記載

### 3.10 利用API
- エンドポイントをHTTPメソッドと共に記載（例：`POST /api/register`）
- 複数ある場合は箇条書きで記載

### 3.11 シーケンス・フロー
- 主要な処理の流れを番号付きリストで記載
- 必須ではないが、複雑な処理の場合は記載を推奨

## 4. 記載時の注意事項

### 4.1 テーブル記法
```markdown
| ヘッダー1 | ヘッダー2 |
|-----------|-----------|
| データ1   | データ2   |
```

### 4.2 空欄の扱い
- まだ決まっていない項目は空欄のままにする
- 「未定」「TBD」などは記載しない
- 該当なしの場合は「-」を記載

### 4.3 更新時のルール
- 変更があった場合は、該当箇所のみを更新
- 更新履歴はバックログのコメント機能で残す

## 5. テンプレート（凡例）

```markdown
## 関連課題

* 

## 機能概要

機能の概要を記載

## 画面デザイン

画像添付

## 利用可能権限

| ロール | 条件 |
|-----|----|
|  |  |

## 項目定義

| 画面項目名 | サイト表記 | 項目種別 | I/O | データ型 | 必須 | 上限 | 初期値 | プレースホルダー | 入力制約 | 備考 |
|-------|-------|------|-----|------|----|----|-----|----------|------|----|
|  |  |  |  |  |  |  |  |  |  |  |

## バリデーション

| 画面項目名 | チェック場所 | チェック内容 | エラーメッセージ | 備考 |
|-------|--------|--------|----------|----|
|  |  |  |  |  |

* F：フロントエンド
* B：バックエンド

## リンク・ボタン項目

| ボタン・リンク名 | サイト表記 | 項目種別 | 遷移先 | 初期状態（活性・非活性） | 備考 |
|----------|-------|------|-----|--------------|----|
|  |  |  |  |  |  |

## イベント定義

| イベント | 処理概要 | 異常時の処理 | 備考 |
|------|------|--------|----|
|  |  |  |  |

## 利用DB

| 場所（NPF/ PP） | テーブル名 | CRUD | 備考 |
|-------------|-------|------|----|
|  |  |  |  |

## 利用API

## シーケンス・フロー

必要に応じて記載
```

## 6. 記載例

```markdown
## 関連課題

* #123 ユーザー登録画面の実装
* #145 認証APIの設計

## 機能概要

ユーザーが会員登録できるフォームを提供し、登録情報をDBに保存する機能。

## 画面デザイン

![user_register_ui.png](添付予定)

## 利用可能権限

| ロール | 条件 |
|--------|------|
| 管理者 | 常に利用可能 |
| 一般ユーザー | 未ログイン時のみ利用可能 |

## 項目定義

| 画面項目名 | サイト表記 | 項目種別 | I/O | データ型 | 必須 | 上限 | 初期値 | プレースホルダー | 入力制約 | 備考 |
|------------|------------|----------|-----|----------|------|------|--------|------------------|----------|------|
| ユーザー名 | ユーザー名 | テキスト | I | string | ○ | 30 | | 例）田中太郎 | 半角英数字 | |
| パスワード | パスワード | パスワード | I | string | ○ | 64 | | ******** | 英数字8文字以上 | DBはハッシュ化 |

## バリデーション

| 画面項目名 | チェック場所 | チェック内容 | エラーメッセージ | 備考 |
|------------|--------------|--------------------------|--------------------------|---------|
| ユーザー名 | F | 空文字・全角禁止 | ユーザー名を入力してください | JavaScript |
| パスワード | B | 文字数制限・英数字混在 | パスワード形式が不正です | API側でも検査 |

* F：フロントエンド
* B：バックエンド

## リンク・ボタン項目

| ボタン・リンク名 | サイト表記 | 項目種別 | 遷移先 | 初期状態（活性・非活性） | 備考 |
|------------------|------------|----------|--------|-------------------------|------|
| 登録ボタン | 登録 | ボタン | 完了画面へ | 活性 | バリデ後有効化 |
| 戻るリンク | ログインへ戻る | リンク | /login | 活性 | |

## イベント定義

| イベント | 処理概要 | 異常時の処理 | 備考 |
|------------------|------------------------------|---------------------------|---------|
| 登録ボタン押下時 | 入力チェック・登録API呼び出し | エラー時は画面上部に表示 | フロント側で制御 |

## 利用DB

| 場所（NPF/ PP） | テーブル名 | CRUD | 備考 |
|-----------------|------------|------|------|
| PP | users | C | 新規ユーザー登録 |
| PP | user_logs | C | 登録ログ（内部記録用） |

## 利用API

- `POST /api/register`: ユーザー新規登録

## シーケンス・フロー

1. ユーザーが登録画面を開く
2. 入力後「登録」ボタン押下
3. バリデーション通過 → API呼出し
4. 登録成功時は完了画面へ遷移
```

---

*このルールは2025年1月より適用*