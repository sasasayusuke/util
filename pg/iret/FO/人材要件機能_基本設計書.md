# 人材要件機能 基本設計書

## 関連課題

* （新規作成のため関連課題なし）

## 機能概要

人材要件機能は、プロジェクト（案件）に対して必要な人材（ソルバー）の要件を登録し、適切なソルバーを選定・登録するための機能。法人ソルバーが人材要件を登録し、既存ソルバーの選定または新規ソルバー候補の申請を行うことができる。

主な機能：
- 人材要件の一覧表示・詳細表示
- 応募ソルバーの選定・追加
- 新規個人ソルバー申請
- ソルバー候補の管理

## 画面デザイン

※詳細な画面デザインは別途デザインファイルを参照

## 利用可能権限

| ロール | 条件 |
|--------|------|
| 管理者（Admin） | 全機能利用可能 |
| 法人ソルバー | 人材要件の登録・参照、応募ソルバーの選定 |
| 個人ソルバー | 自身の情報参照のみ |
| 一般ユーザー | アクセス不可 |

## 項目定義

### 人材要件一覧画面

| 画面項目名 | サイト表記 | 項目種別 | I/O | データ型 | 必須 | 上限 | 初期値 | プレースホルダー | 入力制約 | 備考 |
|------------|------------|----------|-----|----------|------|------|--------|------------------|----------|------|
| 案件コード | 案件コード | テキスト | O | string | - | - | - | - | - | 自動表示 |
| 案件名 | 案件名 | テキスト | O | string | - | - | - | - | - | |
| ステータス | ステータス | テキスト | O | string | - | - | - | - | - | |
| 要件登録日 | 登録日 | 日付 | O | date | - | - | - | - | - | YYYY/MM/DD形式 |

### 人材要件詳細画面

| 画面項目名 | サイト表記 | 項目種別 | I/O | データ型 | 必須 | 上限 | 初期値 | プレースホルダー | 入力制約 | 備考 |
|------------|------------|----------|-----|----------|------|------|--------|------------------|----------|------|
| 案件コード | 案件コード | テキスト | O | string | - | - | - | - | - | 自動表示 |
| 案件名 | 案件名 | テキスト | O | string | - | - | - | - | - | |
| 要件内容 | 要件内容 | テキストエリア | O | string | - | 1000 | - | - | - | |
| 必要人数 | 必要人数 | 数値 | O | number | - | - | - | - | - | |
| 期間 | 期間 | 日付範囲 | O | date | - | - | - | - | - | |

### 応募ソルバー画面

| 画面項目名 | サイト表記 | 項目種別 | I/O | データ型 | 必須 | 上限 | 初期値 | プレースホルダー | 入力制約 | 備考 |
|------------|------------|----------|-----|----------|------|------|--------|------------------|----------|------|
| ソルバーID | ソルバーID | テキスト | O | string | - | - | - | - | - | |
| ソルバー名 | ソルバー名 | テキスト | I/O | string | ○ | 100 | - | 氏名を入力 | - | |
| メールアドレス | メールアドレス | メール | I/O | string | ○ | 255 | - | xxx@xxx.com | メール形式 | |
| 電話番号 | 電話番号 | テキスト | I/O | string | - | 20 | - | 090-0000-0000 | 電話番号形式 | |
| スキル | スキル | テキストエリア | I/O | string | - | 500 | - | - | - | |
| ステータス | ステータス | セレクト | I/O | string | ○ | - | - | - | - | 選択肢：応募中/選定済/非選定 |

### 新規個人ソルバー申請画面

| 画面項目名 | サイト表記 | 項目種別 | I/O | データ型 | 必須 | 上限 | 初期値 | プレースホルダー | 入力制約 | 備考 |
|------------|------------|----------|-----|----------|------|------|--------|------------------|----------|------|
| 案件コード | 案件コード | テキスト | O | string | - | - | - | - | - | 自動入力 |
| 氏名（姓） | 姓 | テキスト | I | string | ○ | 50 | - | 山田 | - | |
| 氏名（名） | 名 | テキスト | I | string | ○ | 50 | - | 太郎 | - | |
| フリガナ（姓） | セイ | テキスト | I | string | ○ | 50 | - | ヤマダ | 全角カタカナ | |
| フリガナ（名） | メイ | テキスト | I | string | ○ | 50 | - | タロウ | 全角カタカナ | |
| メールアドレス | メールアドレス | メール | I | string | ○ | 255 | - | xxx@xxx.com | メール形式 | |
| 電話番号 | 電話番号 | テキスト | I | string | ○ | 20 | - | 090-0000-0000 | 電話番号形式 | |
| 生年月日 | 生年月日 | 日付 | I | date | ○ | - | - | - | - | |
| 性別 | 性別 | ラジオ | I | string | ○ | - | - | - | - | 男性/女性/その他 |
| 写真 | 写真 | ファイル | I | file | - | 5MB | - | - | jpg,png | |
| 履歴書 | 履歴書 | ファイル | I | file | - | 10MB | - | - | pdf,doc,docx | |

## バリデーション

| 画面項目名 | チェック場所 | チェック内容 | エラーメッセージ | 備考 |
|------------|--------------|--------------------------|--------------------------|---------|
| ソルバー名 | F/B | 必須チェック | ソルバー名を入力してください | |
| メールアドレス | F/B | 必須チェック・形式チェック | 正しいメールアドレスを入力してください | |
| 電話番号 | F/B | 形式チェック | 正しい電話番号を入力してください | |
| 氏名（姓） | F/B | 必須チェック | 姓を入力してください | |
| 氏名（名） | F/B | 必須チェック | 名を入力してください | |
| フリガナ（姓） | F/B | 必須チェック・カタカナチェック | 姓（カタカナ）を入力してください | |
| フリガナ（名） | F/B | 必須チェック・カタカナチェック | 名（カタカナ）を入力してください | |
| 生年月日 | F/B | 必須チェック・日付チェック | 正しい生年月日を入力してください | |
| 性別 | F/B | 必須チェック | 性別を選択してください | |
| 写真 | F | ファイルサイズ・形式チェック | 5MB以下のJPG/PNG画像をアップロードしてください | |
| 履歴書 | F | ファイルサイズ・形式チェック | 10MB以下のPDF/Word文書をアップロードしてください | |

* F：フロントエンド
* B：バックエンド

## リンク・ボタン項目

### 人材要件一覧画面

| ボタン・リンク名 | サイト表記 | 項目種別 | 遷移先 | 初期状態（活性・非活性） | 備考 |
|------------------|------------|----------|--------|-------------------------|------|
| 詳細表示 | 詳細 | リンク | 人材要件詳細画面 | 活性 | 各行に表示 |
| 新規登録 | 新規登録 | ボタン | 人材要件登録画面 | 活性 | 権限による |

### 人材要件詳細画面

| ボタン・リンク名 | サイト表記 | 項目種別 | 遷移先 | 初期状態（活性・非活性） | 備考 |
|------------------|------------|----------|--------|-------------------------|------|
| 変更する | 変更する | ボタン | 応募ソルバー画面 | 活性 | |
| 一覧へ戻る | 一覧へ戻る | リンク | 人材要件一覧画面 | 活性 | |

### 応募ソルバー画面

| ボタン・リンク名 | サイト表記 | 項目種別 | 遷移先 | 初期状態（活性・非活性） | 備考 |
|------------------|------------|----------|--------|-------------------------|------|
| 個人ソルバー＋ | ＋ | ボタン | 応募ソルバー追加ポップアップ | 活性 | |
| ソルバー候補＋ | ＋ | ボタン | ソルバー候補追加ポップアップ | 活性 | |
| 編集 | 編集 | ボタン | 個人ソルバー情報詳細（別タブ） | 活性 | 各行に表示 |
| 変更する | 変更する | ボタン | 応募ソルバー登録完了画面 | 活性 | |
| 一覧へ戻る | 一覧へ戻る | リンク | 人材要件一覧画面 | 活性 | |

### 新規個人ソルバー申請画面

| ボタン・リンク名 | サイト表記 | 項目種別 | 遷移先 | 初期状態（活性・非活性） | 備考 |
|------------------|------------|----------|--------|-------------------------|------|
| 一時保存 | 一時保存 | ボタン | - | 活性 | |
| 登録 | 登録 | ボタン | 応募ソルバー追加完了画面 | 活性 | |
| キャンセル | キャンセル | ボタン | 応募ソルバー画面（タブを閉じる） | 活性 | |

## イベント定義

| イベント | 処理概要 | 異常時の処理 | 備考 |
|----------|----------|--------------|------|
| 人材要件一覧の取得 | APIから一覧データを取得し表示 | エラーメッセージを画面上部に表示 | 初期表示時 |
| 人材要件詳細の表示 | 選択した要件の詳細情報を表示 | エラーメッセージを画面上部に表示 | |
| 応募ソルバーの登録 | 入力情報をAPIに送信し登録 | バリデーションエラーは該当項目に表示 | |
| 新規ソルバー申請 | 申請情報をAPIに送信 | エラーメッセージを画面上部に表示 | |
| ファイルアップロード | S3にファイルをアップロード | ファイルサイズ/形式エラーを表示 | |

## 利用DB

| 場所（NPF/ PP） | テーブル名 | CRUD | 備考 |
|-----------------|------------|------|------|
| PP | projects | R | 案件情報の参照 |
| PP | solvers | CRU | ソルバー情報の登録・参照・更新 |
| PP | solver_applications | CRU | ソルバー応募情報の管理 |
| PP | solver_corporations | R | ソルバー法人情報の参照 |
| NPF | 案件マスタ | R | 案件コード・案件名の取得 |

## 利用API

- `GET /api/projects`: 案件一覧の取得（人材要件のある案件）
- `GET /api/projects/{projectId}`: 案件詳細の取得
- `GET /api/solvers`: ソルバー一覧の取得
- `POST /api/solvers`: 新規ソルバー登録
- `PUT /api/solvers/{solverId}`: ソルバー情報更新
- `GET /api/solver-corporations/{corporationId}/solvers`: 法人配下のソルバー一覧取得
- `POST /api/solver-applications`: ソルバー応募情報の登録
- `POST /api/files/upload`: ファイルアップロード（S3）

## シーケンス・フロー

### 人材要件一覧から応募ソルバー登録までの流れ

1. ユーザーがメニューから「人材要件」を選択
2. 人材要件一覧画面を表示（APIから案件データ取得）
3. 一覧から対象案件を選択し詳細画面へ遷移
4. 詳細画面で「変更する」ボタンをクリック
5. 応募ソルバー画面へ遷移
6. 既存ソルバーの選択または新規ソルバーの追加
   - 既存の場合：ポップアップから選択
   - 新規の場合：別タブで申請画面を開く
7. 必要情報を入力し「変更する」ボタンで登録
8. 登録完了画面を表示
9. 「一覧へ戻る」で人材要件一覧へ戻る

### 新規個人ソルバー申請の流れ

1. 応募ソルバー画面で「ソルバー候補＋」ボタンをクリック
2. ポップアップで「新規ソルバー候補を追加」を選択
3. 別タブで新規個人ソルバー申請画面が開く
4. 必要情報（氏名、連絡先、写真、履歴書等）を入力
5. 「登録」ボタンで申請情報を送信
6. 登録完了後、元のタブの応募ソルバー画面に反映

---

*作成日: 2025年1月*
*バージョン: 1.0*