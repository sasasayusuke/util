# Claude開発支援ルール

## 📋 概要

このファイルは、Claude Code使用時の開発支援における標準ルールとテンプレートを定義します。

---

## 🎯 テスト仕様書作成ルール

### 基本原則
1. **新人でも理解可能** - 専門用語の説明、具体的な手順記載
2. **実装調査を先行** - コードベースの実装状況を必ず事前調査
3. **要件との差異明記** - 現在実装と要件の違いを明確化
4. **ロール別テスト** - 各ユーザーロールでの動作確認を含める
5. **データ作成手順** - テスト実施に必要な前提データの作成方法を記載

### テスト仕様書テンプレート

#### ファイル命名規則
```
[機能名]テスト仕様書.md
例: 個別カルテ「場所」機能テスト仕様書.md
```

#### 必須セクション構成

```markdown
# [機能名]テスト仕様書

## 📋 概要
[機能の概要、既存実装状況、テストの目的]

---

## 🔍 要件と現在実装の差異
| 項目 | 要件 | 現在の実装 | 状態 |
|------|------|-----------|------|
| [項目1] | [要件内容] | [実装内容] | ✅一致/❌不一致 |

---

## 🎯 テスト目的
1. [目的1]
2. [目的2]

---

## 👥 テスト実施可能ロール
| ロール | 日本語名 | [権限1] | [権限2] | 備考 |
|--------|----------|---------|---------|------|
| **[role]** | [日本語名] | ✅/❌ | ✅/❌ | [備考] |

---

## 📊 テスト前準備（データ作成手順）

### STEP 1: テスト用ユーザー作成
[具体的な作成手順]

### STEP 2: テスト用プロジェクト作成
[具体的な作成手順]

### STEP 3: [その他必要データ]
[具体的な作成手順]

---

## 🧪 テストケース詳細

### 【テストケース TC-[機能略称]-001】[テスト項目名]

#### 実施ロール: [ロール名]

#### 手順:
1. **[ステップ1]**
   - 操作: [具体的操作]
   - 期待結果: [期待される結果]
2. **[ステップ2]**
   - 操作: [具体的操作]
   - 期待結果: [期待される結果]

#### 判定基準:
- ✅ **PASS**: [成功条件]
- ❌ **FAIL**: [失敗条件]
- ⚠️ **要件差異**: [差異がある場合の注記]

---

## 📋 テスト実施チェックリスト
- [ ] TC-[略称]-001: [テスト項目1]
- [ ] TC-[略称]-002: [テスト項目2]

---

## 🚨 既知の要件差異
| 項目 | 要件 | 現在実装 | 対応要否 |
|------|------|----------|----------|
| [項目] | [要件] | [実装] | 要確認 |

---

## 🎯 テスト完了判定基準

### ✅ 全テストPASS条件
1. [条件1]
2. [条件2]

---

## 📞 問題発生時の連絡先
- **システム管理者**: [連絡先]
- **開発チーム**: [連絡先]

---

*[テスト仕様書の目的と注意事項]*
```

---

## 🛠️ 実装調査ルール

### 調査必須項目
1. **フロントエンド実装**
   - Vue.jsコンポーネント構造
   - 画面レイアウトと項目配置
   - バリデーション・UI制御ロジック
   - ルーティング・画面遷移

2. **バックエンド実装**
   - API エンドポイント
   - データモデル・スキーマ
   - ビジネスロジック
   - 権限制御

3. **多言語対応**
   - 言語ファイル（ja.json）の確認
   - 実際の画面表示テキスト

4. **権限・ロール**
   - ユーザーロール定義
   - 機能別アクセス権限マトリックス

5. **メール・通知機能**
   - メールテンプレート
   - 通知トリガー・タイミング

### 調査手順
1. **Taskツール使用** - 包括的なコード調査
2. **複数ファイル並行読み込み** - 関連ファイルの同時確認
3. **Grep/Globツール活用** - キーワード・パターン検索
4. **実装差異の文書化** - 要件との差異を明確に記録

---

## 📝 ドキュメント作成ルール

### 文書命名規則
```
[システム名][機能名][ドキュメント種別].md

例:
- 個別カルテ作成手順書.md
- 個別カルテ「場所」機能テスト仕様書.md
- プロジェクト・スケジュール作成手順書.md
```

### 必須記載事項
1. **実際の画面表示名称使用**
   - システムの多言語ファイルから正確な表示名を取得
   - 「プロジェクト」→「案件管理」等、実際の表示に合わせる

2. **具体的な操作手順**
   - URL、ボタン名、フィールド名を正確に記載
   - 「○○をクリック」→「ヘッダーの『○○』ボタンをクリック」

3. **ロール別権限明記**
   - 各操作で必要なユーザーロールを明示
   - 権限不足時の動作も記載

4. **エラー・例外処理**
   - よくある問題とその解決方法
   - トラブルシューティング情報

---

## 🔄 継続的改善ルール

### ドキュメント更新トリガー
1. **システム仕様変更時**
2. **新機能追加時**
3. **UI/UX変更時**
4. **ユーザーフィードバック受領時**

### 品質チェック項目
- [ ] 実装調査完了
- [ ] 画面表示名称の正確性確認
- [ ] 新人理解可能性チェック
- [ ] テスト実施可能性確認
- [ ] 要件差異の明記

---

## 📊 テストケース設計指針

### テストケースID規則
```
TC-[機能略称]-[連番3桁]
例: TC-LOC-001, TC-KARTE-001
```

### 必須テストカテゴリ
1. **表示・UI確認**
2. **入力・バリデーション**
3. **権限・ロール別動作**
4. **データ永続化**
5. **通知・メール機能**
6. **エラーハンドリング**

### 判定基準の明確化
- ✅ **PASS**: 具体的な成功条件
- ❌ **FAIL**: 具体的な失敗条件  
- ⚠️ **要件差異**: 実装と要件の差異がある場合

---

## 🎯 成果物品質基準

### 最低品質基準
1. **新人が単独実施可能**
2. **全ての前提条件が明記**
3. **期待結果が具体的**
4. **判定基準が客観的**

### 推奨品質向上要素
1. **スクリーンショット添付**
2. **動画説明リンク**
3. **FAQ・よくある質問**
4. **関連資料へのリンク**

---

## ソースコード解析ルール

### 1. ソースコード解析のみ
- ソースコードの修正は行わない
- 解析・説明・質問への回答のみを行う
- コードの理解と説明に専念する

### 2. ドキュメント作成ルール
- ドキュメントを作成する場合は、ルートディレクトリに `.md` ファイルとして作成する
- ファイル名は内容に応じて適切に命名する
- マークダウン形式で読みやすく構成する

---

*このルールは開発効率と品質向上を目的として継続的に更新されます*
*不明点や改善提案がある場合は開発チームまでご連絡ください*