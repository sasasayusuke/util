{
  "HeaderInfo": {
    "AssemblyVersion": "1.4.1.1",
    "BaseSiteId": 255693,
    "Server": "http://192.168.10.67",
    "CreatorName": "Administrator",
    "PackageTime": "2026-01-19T06:58:13.5274711+00:00",
    "Convertors": [
      {
        "SiteId": 255693,
        "SiteTitle": "キッチンカー",
        "ReferenceType": "Results",
        "IncludeData": false
      }
    ],
    "IncludeSitePermission": true,
    "IncludeRecordPermission": true,
    "IncludeColumnPermission": true,
    "IncludeNotifications": true,
    "IncludeReminders": true
  },
  "Sites": [
    {
      "TenantId": 1,
      "SiteId": 255693,
      "Title": "キッチンカー",
      "SiteName": "",
      "SiteGroupName": "",
      "Body": "",
      "GridGuide": "",
      "EditorGuide": "",
      "CalendarGuide": "",
      "CrosstabGuide": "",
      "GanttGuide": "",
      "BurnDownGuide": "",
      "TimeSeriesGuide": "",
      "AnalyGuide": "",
      "KambanGuide": "",
      "ImageLibGuide": "",
      "ReferenceType": "Results",
      "ParentId": 255673,
      "InheritPermission": 255693,
      "SiteSettings": {
        "Version": 1.017,
        "ReferenceType": "Results",
        "GridColumns": [
          "ClassC",
          "DateA",
          "DateB",
          "ClassB",
          "ClassA",
          "ClassD"
        ],
        "EditorColumnHash": {
          "General": [
            "ResultId",
            "ClassC",
            "DateA",
            "DateB",
            "ClassA",
            "ClassD",
            "_Links-255669",
            "ClassB",
            "ClassY"
          ]
        },
        "LinkColumns": [
          "ClassC",
          "DateA",
          "DateB",
          "ClassB",
          "ClassA",
          "ClassD"
        ],
        "Columns": [
          {
            "ColumnName": "ResultId",
            "LabelText": "キッチンカー予定Id",
            "Hide": true
          },
          {
            "ColumnName": "ClassA",
            "LabelText": "キッチンカー名",
            "ChoicesText": "[[255669,NoAddButton]]",
            "MultipleSelections": true,
            "NoWrap": true,
            "Link": true
          },
          {
            "ColumnName": "DateA",
            "LabelText": "開催期間 開始日",
            "NoWrap": true
          },
          {
            "ColumnName": "DateB",
            "LabelText": "開催期間 終了日"
          },
          {
            "ColumnName": "ClassB",
            "LabelText": "イベント予定一覧",
            "ChoicesText": "[[255671]]",
            "Hide": true,
            "Link": true,
            "SearchType": "PartialMatch"
          },
          {
            "ColumnName": "ClassC",
            "LabelText": "店舗名",
            "NoWrap": true
          },
          {
            "ColumnName": "ClassD",
            "LabelText": "その他詳細",
            "NoWrap": true,
            "MaxLength": 50.0,
            "FieldCss": "field-wide"
          },
          {
            "ColumnName": "ClassY",
            "LabelText": "イベント店舗ID",
            "ValidateRequired": true,
            "EditorReadOnly": true
          }
        ],
        "Links": [
          {
            "ColumnName": "ClassB",
            "SiteId": 255671
          },
          {
            "ColumnName": "ClassA",
            "SiteId": 255669,
            "NoAddButton": true
          }
        ],
        "Exports": [
          {
            "Name": "一括アップロード用",
            "Columns": [
              {
                "Id": 1,
                "ColumnName": "ClassC"
              },
              {
                "Id": 2,
                "ColumnName": "ClassB"
              },
              {
                "Id": 3,
                "ColumnName": "ClassA"
              },
              {
                "Id": 4,
                "ColumnName": "DateA"
              },
              {
                "Id": 5,
                "ColumnName": "DateB"
              },
              {
                "Id": 6,
                "ColumnName": "ClassD"
              }
            ],
            "Type": 0,
            "DelimiterType": 0,
            "ExecutionType": 0,
            "Id": 1
          }
        ],
        "Styles": [
          {
            "Title": "【表示制御】キッチンカー画面スタイル",
            "New": true,
            "Edit": true,
            "Body": "@charset \"UTF-8\";\n/* ===================\n    色定義\n==================*/\n/* ===================\n    縦スペース定義\n==================*/\n/* ===================\n    横スペース定義\n==================*/\n/* ===================\n    テキストサイズ定義\n==================*/\n.sdt-kitchen-car {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: #F2F2F2;\n  z-index: 705;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap {\n  position: relative;\n  display: block;\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background-color: #F2F2F2;\n}\n.sdt-kitchen-car .sdt-kitchen-car-title {\n  margin: 0;\n}\n.sdt-kitchen-car .sdt-kitchen-car-title__text {\n  font-weight: bold;\n  font-size: 1.2em;\n}\n.sdt-kitchen-car .sdt-kitchen-car-form {\n  margin-top: 20px;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-kitchen-car-form {\n    margin-top: 15px;\n  }\n}\n.sdt-kitchen-car .sdt-kitchen-car-form__area {\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  padding: 20px;\n  border-radius: 10px;\n  background-color: #fff;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-kitchen-car-form__area {\n    padding: 15px;\n  }\n}\n.sdt-kitchen-car .sdt-kitchen-car-form .sdt-form-title {\n  width: 100%;\n  margin: 0;\n  padding: 0;\n  margin-bottom: 12px;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-kitchen-car-form .sdt-form-title {\n    margin-bottom: 9px;\n  }\n}\n.sdt-kitchen-car .sdt-form-box {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  min-width: 30%;\n  max-width: 50%;\n  height: 30px;\n  padding-right: 12px;\n  margin-bottom: 12px;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-form-box {\n    min-width: 100%;\n    max-width: 100%;\n    padding-right: 9px;\n    margin-bottom: 9px;\n  }\n}\n.sdt-kitchen-car .sdt-form-label {\n  position: relative;\n  min-width: 120px;\n  height: auto;\n}\n.sdt-kitchen-car .sdt-required {\n  color: #E80000;\n  margin-left: 4px;\n}\n.sdt-kitchen-car .sdt-form-inputArea {\n  width: calc(100% - 120px);\n  height: 100%;\n}\n.sdt-kitchen-car .sdt-form-inputArea--date {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.sdt-kitchen-car .sdt-date-separator {\n  color: #3B3B3B;\n}\n.sdt-kitchen-car .sdt-input {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 0 12px;\n  border-radius: 5px;\n  border: none;\n  box-shadow: 0 0 0 1px #78818F inset;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  font-size: 14px;\n  background-color: #fff;\n}\n.sdt-kitchen-car .sdt-input--date {\n  width: 140px;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-input {\n    padding: 0 9px;\n    font-size: 14px;\n  }\n  .sdt-kitchen-car .sdt-input--date {\n    width: 120px;\n  }\n}\n.sdt-kitchen-car .sdt-input::-moz-placeholder {\n  color: #C4C9D0;\n}\n.sdt-kitchen-car .sdt-input::placeholder {\n  color: #C4C9D0;\n}\n.sdt-kitchen-car .sdt-input:focus {\n  outline: 0;\n  box-shadow: 0 0 0 2px #2F80ED inset;\n  color: #3B3B3B;\n}\n.sdt-kitchen-car .sdt-selector {\n  position: relative;\n  width: 100%;\n}\n.sdt-kitchen-car .sdt-selector:before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  width: 0;\n  height: 0;\n  right: 8px;\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 10px solid #C4C9D0;\n  pointer-events: none;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-selector:before {\n    right: 6px;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-top: 8px solid #C4C9D0;\n  }\n}\n.sdt-kitchen-car .sdt-selector-content {\n  width: 100%;\n  height: 30px;\n  padding: 0 38px 0 8px;\n  border-radius: 4px;\n  border: none;\n  box-shadow: 0 0 0 1px #C4C9D0 inset;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  cursor: pointer;\n  font-size: 14px;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-selector-content {\n    font-size: 12px;\n    height: 30px;\n    padding: 0 25px 0 6px;\n  }\n}\n.sdt-kitchen-car .sdt-selector-content:focus {\n  outline: 0;\n  box-shadow: 0 0 0 2px #2F80ED inset;\n}\n/* フォーム項目の幅調整 */\n.sdt-kitchen-car .sdt-form-shop {\n  width: 100%;\n  max-width: 100%;\n}\n.sdt-kitchen-car .sdt-form-shop .sdt-form-inputArea {\n  width: 200px;\n}\n.sdt-kitchen-car .sdt-form-period {\n  width: 100%;\n  max-width: 100%;\n}\n.sdt-kitchen-car .sdt-form-note {\n  width: 100%;\n  max-width: 100%;\n}\n.sdt-kitchen-car .sdt-form-note .sdt-form-inputArea {\n  width: 50%;\n}\n/* キッチンカー一覧テーブル */\n.sdt-kitchen-car .sdt-kitchen-car-table {\n  position: relative;\n  margin-top: 20px;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-kitchen-car-table {\n    margin-top: 15px;\n  }\n}\n.sdt-kitchen-car .sdt-kitchen-car-table__wrap {\n  position: relative;\n  width: 100%;\n  max-height: 300px;\n  overflow: auto;\n  border-radius: 8px;\n  border: 1px solid #C4C9D0;\n  background-color: #fff;\n}\n.sdt-kitchen-car .sdt-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n.sdt-kitchen-car .sdt-table__head {\n  background-color: #F8F9FA;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n.sdt-kitchen-car .sdt-table__cell {\n  padding: 12px;\n  box-sizing: border-box;\n  border-bottom: solid 1px #E0E0E0;\n  text-align: left;\n  vertical-align: middle;\n  position: relative;\n  z-index: 1;\n}\n.sdt-kitchen-car .sdt-table__cell-head {\n  font-weight: bold;\n  background-color: #F8F9FA;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-table__cell {\n    padding: 9px;\n  }\n}\n.sdt-kitchen-car .sdt-checkbox {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n}\n.sdt-kitchen-car .sdt-checkbox:disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n/* 使用不可行のスタイル */\n.sdt-kitchen-car .sdt-table__row--disabled {\n  background-color: #f5f5f5;\n  color: #999;\n}\n/* その他詳細 */\n.sdt-kitchen-car .sdt-kitchen-car-note {\n  margin-top: 20px;\n  padding: 20px;\n  border-radius: 10px;\n  background-color: #fff;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-kitchen-car-note {\n    margin-top: 15px;\n    padding: 15px;\n  }\n}\n/* アクションボタン */\n.sdt-kitchen-car .sdt-form-buttonArea {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  width: 100%;\n  margin-top: 20px;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-form-buttonArea {\n    gap: 15px;\n    margin-top: 15px;\n  }\n}\n.sdt-kitchen-car .sdt-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 150px;\n  height: 40px;\n  border-radius: 8px;\n  padding: 12px 20px;\n  border: none;\n  cursor: pointer;\n  transition: opacity 0.2s;\n}\n.sdt-kitchen-car .sdt-button:hover {\n  opacity: 0.8;\n}\n.sdt-kitchen-car .sdt-button:disabled {\n  background-color: #C4C9D0;\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n.sdt-kitchen-car .sdt-button:disabled .sdt-button__text {\n  color: #fff;\n}\n.sdt-kitchen-car .sdt-button--primary {\n  background-color: #2F80ED;\n}\n.sdt-kitchen-car .sdt-button--primary .sdt-button__text {\n  color: #fff;\n}\n.sdt-kitchen-car .sdt-button--secondary {\n  background-color: #f8f8f8;\n  border: 1px solid #C4C9D0;\n}\n.sdt-kitchen-car .sdt-button--secondary .sdt-button__text {\n  color: #3B3B3B;\n}\n.sdt-kitchen-car .sdt-button--danger {\n  background-color: #E80000;\n}\n.sdt-kitchen-car .sdt-button--danger .sdt-button__text {\n  color: #fff;\n}\n@media screen and (max-width: 760px) {\n  .sdt-kitchen-car .sdt-button {\n    min-width: 120px;\n    padding: 9px 15px;\n  }\n}\n",
            "Id": 1
          },
          {
            "Title": "【表示制御】プリザンター表示合わせ調整スタイル",
            "New": true,
            "Edit": true,
            "Body": ".sdt-kitchen-car .sdt-kitchen-car-wrap {\n  background-color: #fff;\n  border: 1px solid #d19405;\n  background: #feeebd url(../../styles/plugins/themes/sunny/images/ui-bg_highlight-soft_100_feeebd_1x100.png) 50% top repeat-x;\n  border-radius: 10px;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-title {\n  font-size: 20px;\n  font-weight: bold;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-form {\n  color: #383838;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-form__area {\n  background-color: initial;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-form .sdt-selector-content {\n  font-size: 12px;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-form .sdt-input {\n  font-size: 12px;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-table {\n  margin-top: 0;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-table .sdt-table__head {\n  top: -5px;\n  margin-top: -5px;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-table .sdt-table__head .sdt-table__row {\n  border: 1px solid #494437;\n  background: #817865 url(../../styles/plugins/themes/sunny/images/ui-bg_gloss-wave_45_817865_500x100.png) 50% 50% repeat-x;\n  color: #fff;\n  font-weight: bold;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-table .sdt-table__head .sdt-table__row .sdt-table__cell-head {\n  height: 42px;\n  padding: 6px;\n  border-top: solid 1px transparent;\n  border-bottom: solid 1px transparent;\n  border-left: solid 1px transparent;\n  border-right: solid 1px #fff;\n  background-color: initial;\n  text-align: left;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-table .sdt-table__body .sdt-table__row {\n  border: solid 1px #c0c0c0;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-kitchen-car-table .sdt-table__body .sdt-table__row .sdt-table__cell {\n  border-bottom: solid 1px #c0c0c0;\n  border-left: dotted 1px #c0c0c0;\n  border-right: dotted 1px #c0c0c0;\n  text-align: left;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-form-buttonArea .sdt-button {\n  min-width: 80px;\n  padding: 4px 4px 6px 2px;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-form-buttonArea .sdt-button.sdt-button--primary {\n  border: 1px solid #d19405;\n  background: #fece2f url(../../styles/plugins/themes/sunny/images/ui-bg_gloss-wave_60_fece2f_500x100.png) 50% 50% repeat-x;\n}\n.sdt-kitchen-car .sdt-kitchen-car-wrap .sdt-form-buttonArea .sdt-button.sdt-button--primary .sdt-button__text {\n  color: #333;\n}",
            "Id": 2
          }
        ],
        "Scripts": [
          {
            "Title": "【設定】サイトID",
            "All": true,
            "Body": "/* ========================================\n   * 定数・変数\n   * ======================================== */\n  var KITCHEN_CAR_OUTPUT_SITE_ID = 255693; //キッチンカー\n  var KITCHEN_CAR_STATUS_SITE_ID = 255669; // キッチンカー状況\n  var PERIOD_SITE_ID = 255692; // 開始～終了期間\n",
            "Id": 4
          },
          {
            "Title": "【設定】グローバル変数",
            "All": true,
            "Body": "  window.force = true;\n\n  // テーブル・カラム定義\n  var TABLES = {\n    // キッチンカーテーブル\n    KITCHEN_CAR_OUTPUT: {\n      SITE_ID: KITCHEN_CAR_OUTPUT_SITE_ID,\n      COLUMNS: {\n        KITCHEN_CAR_IDS: 'ClassA',   // キッチンカーResultId（JSON配列）\n        EVENT_ID: 'ClassB',          // LinkId/イベントID（作成時のみ）\n        SHOP_NAME: 'ClassC',         // 店舗名\n        NOTE: 'ClassD',              // その他詳細\n        SHOP_RESULT_ID: 'ClassY',    // 店舗ResultId（作成時のみ）\n        DATE_FROM: 'DateA',          // 開催期間（開始日）\n        DATE_TO: 'DateB'             // 開催期間（終了日）\n      }\n    },\n    // キッチンカー状況テーブル\n    KITCHEN_CAR_STATUS: {\n      SITE_ID: KITCHEN_CAR_STATUS_SITE_ID,\n      COLUMNS: {\n        NAME: 'ClassA',              // キッチンカー名\n        EVENT_NAME: 'ClassB',        // 使用先イベント名称\n        RESERVED_FROM: 'DateA',      // 直近の予約期間（開始日）\n        RESERVED_TO: 'DateB',        // 直近の予約期間（終了日）\n        UNAVAILABLE_FROM: 'DateC',   // 使用不可期間（開始日）\n        UNAVAILABLE_TO: 'DateD'      // 使用不可期間（終了日）\n      }\n    },\n    // 開始～終了期間テーブル\n    PERIOD: {\n      SITE_ID: PERIOD_SITE_ID,\n      COLUMNS: {\n        NAME: 'ClassA',              // 店舗名\n        EVENT_ID: 'ClassB',          // イベントID（LinkId）\n        START_DATE: 'DateA',         // 開始日\n        END_DATE: 'DateB'            // 終了日\n      }\n    }\n  };\n",
            "Id": 8
          },
          {
            "Title": "【共通処理】PleasanterAPI",
            "All": true,
            "Body": "/**\n * Pleasanter API ユーティリティクラス（バニラJS版）\n * Python FastAPI の pleasanter/service.py を JavaScript に移植\n */\n\n/**\n * 定数\n */\nconst EMPTY_DATE = '1899-12-30T00:00:00';\nconst PAGE_SIZE = 200;\n\n/**\n * Pleasanter API クライアント\n */\nclass PleasanterAPI {\n  /**\n   * @param {string} baseUrl - PleasanterのベースURL (例: location.origin)\n   * @param {Object} options - オプション\n   * @param {string} [options.apiKey] - APIキー（認証が必要な場合）\n   * @param {string} [options.apiVersion] - APIバージョン（デフォルト: 1.1）\n   * @param {boolean} [options.logging] - ログ出力（デフォルト: false）\n   */\n  constructor(baseUrl, options = {}) {\n    if (!baseUrl) throw new Error('baseUrl は必須です');\n\n    this.baseUrl = baseUrl;\n    this.apiKey = options.apiKey || null;\n    this.apiVersion = options.apiVersion || 1.1;\n    this.logging = options.logging === true;\n  }\n\n  /**\n   * 基本リクエストボディ\n   * @private\n   */\n  _baseBody() {\n    const body = { ApiVersion: this.apiVersion };\n    if (this.apiKey) {\n      body.ApiKey = this.apiKey;\n    }\n    return body;\n  }\n\n  /**\n   * update_dict を 5 つのハッシュに分類\n   * @private\n   */\n  _splitHash(update) {\n    const classHash = {};\n    const numHash = {};\n    const dateHash = {};\n    const descriptionHash = {};\n    const checkHash = {};\n    const other = {};\n\n    for (const [k, v] of Object.entries(update)) {\n      if (k.includes('Class')) {\n        classHash[k] = v;\n      } else if (k.includes('Num')) {\n        numHash[k] = v;\n      } else if (k.includes('Date')) {\n        dateHash[k] = v || EMPTY_DATE;\n      } else if (k.includes('Description')) {\n        descriptionHash[k] = v;\n      } else if (k.includes('Check')) {\n        checkHash[k] = v;\n      } else {\n        other[k] = v;\n      }\n    }\n\n    return {\n      ClassHash: classHash,\n      NumHash: numHash,\n      DateHash: dateHash,\n      DescriptionHash: descriptionHash,\n      CheckHash: checkHash,\n      ...other,\n    };\n  }\n\n  /**\n   * View セクション構築\n   * @private\n   */\n  _buildView(columns, options = {}) {\n    const { setLabelText = true, setDisplayValue = 'DisplayValue' } = options;\n\n    const cols = columns || ['ClassA', 'NumA'];\n\n    return {\n      ApiDataType: 'KeyValues',\n      ApiColumnKeyDisplayType: setLabelText ? 'LabelText' : 'ColumnName',\n      ApiColumnValueDisplayType: setDisplayValue,\n      GridColumns: cols,\n    };\n  }\n\n  /**\n   * HTTP POST リクエスト送信\n   * @private\n   */\n  async _request(endpoint, body, options = {}) {\n    const { ignoreErrors = false } = options;\n\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    try {\n      const res = await fetch(`${this.baseUrl}${endpoint}`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(body),\n      });\n\n      if (!res.ok) {\n        if (ignoreErrors) {\n          console.error(`Pleasanter API Error: ${res.status}`);\n          return null;\n        }\n        throw new Error(`HTTP Error: ${res.status} ${res.statusText}`);\n      }\n\n      const data = await res.json();\n      return data;\n    } catch (error) {\n      if (ignoreErrors) {\n        console.error('Pleasanter API Request Failed:', error);\n        return null;\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * 単一レコード取得\n   * @param {number|string} recordId - レコードID\n   * @param {Object} [options] - オプション\n   * @param {string[]} [options.columns] - 取得するカラム\n   * @param {boolean} [options.setLabelText] - カラムキーをラベル名で表示（デフォルト: true）\n   * @param {'DisplayValue'|'Value'|'Both'} [options.setDisplayValue] - 値の表示形式（デフォルト: 'DisplayValue'）\n   * @param {boolean} [options.ignoreErrors] - エラーを無視（デフォルト: false）\n   * @returns {Promise<Object>} レコードデータ\n   */\n  async getRecord(recordId, options = {}) {\n    if (!recordId) throw new Error('recordId は必須です');\n\n    const {\n      columns = null,\n      setLabelText = true,\n      setDisplayValue = 'DisplayValue',\n      ignoreErrors = false,\n    } = options;\n\n    if (setDisplayValue === 'Both') {\n      // DisplayValueとValueの両方を取得してマージ\n      const displayRecord = await this.getRecord(recordId, {\n        ...options,\n        setDisplayValue: 'DisplayValue',\n      });\n      const valueRecord = await this.getRecord(recordId, {\n        ...options,\n        setDisplayValue: 'Value',\n      });\n\n      // マージ\n      const merged = {};\n      for (const key of Object.keys(displayRecord)) {\n        merged[key] = {\n          Display: displayRecord[key],\n          Value: valueRecord[key],\n        };\n      }\n      return merged;\n    }\n\n    // 単一形式で取得\n    const view = this._buildView(columns, { setLabelText, setDisplayValue });\n    const body = { ...this._baseBody(), View: view };\n\n    const resp = await this._request(`/api/items/${recordId}/get`, body, { ignoreErrors });\n\n    if (!resp) {\n      return {};\n    }\n\n    return resp.Response?.Data?.[0] || {};\n  }\n\n  /**\n   * レコード一覧取得（ページネーション対応・全件取得）\n   * @param {number|string} tableId - テーブル（サイト）ID\n   * @param {Object} [options] - オプション\n   * @param {string[]} [options.columns] - 取得するカラム\n   * @param {boolean} [options.setLabelText] - カラムキーをラベル名で表示（デフォルト: true）\n   * @param {'DisplayValue'|'Value'|'Both'} [options.setDisplayValue] - 値の表示形式（デフォルト: 'DisplayValue'）\n   * @param {boolean} [options.ignoreErrors] - エラーを無視（デフォルト: false）\n   * @returns {Promise<Object[]>} レコード配列\n   */\n  async getRecords(tableId, options = {}) {\n    if (!tableId) throw new Error('tableId は必須です');\n\n    const {\n      columns = null,\n      setLabelText = true,\n      setDisplayValue = 'DisplayValue',\n      ignoreErrors = false,\n    } = options;\n\n    if (setDisplayValue === 'Both') {\n      // DisplayValueとValueの両方を取得してマージ\n      const displayRecords = await this.getRecords(tableId, {\n        ...options,\n        setDisplayValue: 'DisplayValue',\n      });\n      const valueRecords = await this.getRecords(tableId, {\n        ...options,\n        setDisplayValue: 'Value',\n      });\n\n      // マージ\n      const merged = displayRecords.map((displayRec, index) => {\n        const valueRec = valueRecords[index];\n        const mergedRec = {};\n        for (const key of Object.keys(displayRec)) {\n          mergedRec[key] = {\n            Display: displayRec[key],\n            Value: valueRec[key],\n          };\n        }\n        return mergedRec;\n      });\n\n      if (this.logging) {\n        console.log(`テーブル(${this.baseUrl}/items/${tableId}/index)から ${merged.length} 件取得しました(Both形式)`);\n        console.table(merged);\n      }\n      return merged;\n    }\n\n    // 単一形式で取得（ページネーション対応）\n    const view = this._buildView(columns, { setLabelText, setDisplayValue });\n    const records = [];\n    let offset = 0;\n\n    while (true) {\n      const body = {\n        ...this._baseBody(),\n        Offset: offset,\n        PageSize: PAGE_SIZE,\n        View: view,\n      };\n\n      const resp = await this._request(`/api/items/${tableId}/get`, body, { ignoreErrors });\n\n      if (!resp) {\n        break;\n      }\n\n      const page = resp.Response?.Data || [];\n      records.push(...page);\n\n      if (page.length < PAGE_SIZE) {\n        break;\n      }\n\n      offset += PAGE_SIZE;\n    }\n\n    if (this.logging) {\n      console.log(`テーブル(${this.baseUrl}/items/${tableId}/index)から ${records.length} 件取得しました`);\n      console.table(records);\n    }\n    return records;\n  }\n\n  /**\n   * レコード作成\n   * @param {number|string} tableId - テーブル（サイト）ID\n   * @param {Object} createData - 作成するレコードデータ\n   * @returns {Promise<Object>} 作成結果\n   */\n  async createRecord(tableId, createData = {}) {\n    if (!tableId) throw new Error('tableId は必須です');\n    if (!createData || Object.keys(createData).length === 0) {\n      throw new Error('createData は必須です');\n    }\n\n    const payload = {\n      ...this._baseBody(),\n      ...this._splitHash(createData),\n    };\n\n    const data = await this._request(`/api/items/${tableId}/create`, payload);\n\n    if (!data) {\n      return {};\n    }\n\n    if (this.logging) {\n      console.log('登録内容:', data);\n    }\n    return data;\n  }\n\n  /**\n   * レコード更新\n   * @param {number|string} recordId - 更新するレコードID\n   * @param {Object} updateData - 更新データ\n   * @returns {Promise<Object>} 更新結果\n   */\n  async updateRecord(recordId, updateData = {}) {\n    if (!recordId) throw new Error('recordId は必須です');\n    if (!updateData || Object.keys(updateData).length === 0) {\n      throw new Error('updateData は必須です');\n    }\n\n    const payload = {\n      ...this._baseBody(),\n      ...this._splitHash(updateData),\n    };\n\n    const data = await this._request(`/api/items/${recordId}/update`, payload);\n\n    if (!data) {\n      return {};\n    }\n\n    if (this.logging) {\n      console.log('更新内容:', data);\n    }\n    return data;\n  }\n\n  /**\n   * レコード削除\n   * @param {number|string} recordId - 削除するレコードID\n   * @returns {Promise<Object>} 削除結果\n   */\n  async deleteRecord(recordId) {\n    if (!recordId) throw new Error('recordId は必須です');\n\n    const payload = this._baseBody();\n\n    const data = await this._request(`/api/items/${recordId}/delete`, payload);\n\n    if (!data) {\n      return {};\n    }\n\n    if (this.logging) {\n      console.log(`削除完了: レコードID ${recordId}`);\n    }\n    return data;\n  }\n}\n\n/* ========= 使用例 ========= */\n/*\nconst siteId = 24;  // 対象サイトのID\nconst api = new PleasanterAPI(location.origin, {\n  apiKey: 'your-api-key',  // 認証が必要な場合\n  logging: true,           // ログ出力\n});\n\n// レコード一覧取得（全件・ページネーション対応）\nconst records = await api.getRecords(siteId, {\n  columns: ['ResultId', 'Title', 'Body', 'UpdatedTime'],\n  setLabelText: true,\n  setDisplayValue: 'DisplayValue',  // 'DisplayValue' | 'Value' | 'Both'\n});\nconsole.table(records);\n\n// 単一レコード取得\nconst record = await api.getRecord(123, {\n  columns: ['Title', 'Body'],\n  setDisplayValue: 'Both',  // DisplayとValue両方取得\n});\nconsole.log(record);\n\n// レコード作成（ClassA, NumB などは自動分類される）\nconst created = await api.createRecord(siteId, {\n  Title: '新規タイトル',\n  ClassA: '分類A',\n  NumA: 100,\n  DateA: '2025-01-01',\n  CheckA: true,\n});\nconsole.log(created);\n\n// レコード更新\nconst updated = await api.updateRecord(123, {\n  Title: '更新後タイトル',\n  ClassB: '分類B更新',\n});\nconsole.log(updated);\n\n// レコード削除\nconst deleted = await api.deleteRecord(123);\nconsole.log(deleted);\n*/\n",
            "Id": 3
          },
          {
            "Title": "【初期処理】新規作成ボタンの除去",
            "All": true,
            "Body": "document.getElementById(\"NewMenuContainer\").remove()",
            "Id": 7
          },
          {
            "Title": "【画面作成】キッチンカー初期表示",
            "New": true,
            "Edit": true,
            "Body": "(function ($) {\n  'use strict';\n\n  /************************************************************************\n   * 画面読み込み時に一度だけ実行する初期表示処理\n   *\n   * 目的：\n   *  - ヘッダー（#Header）の高さを取得して、その高さ分だけ\n   *    #fn-kitchen-car の top をずらします（重なり防止）。\n   *  - さらに #fn-kitchen-car の高さを CSS の calc() を使って\n   *    calc(100% - {headerHeight}px) に設定します。\n   *  - 店舗マスタ（SiteId: 253154）からデータを取得し、セレクトボックスに設定\n   *\n   * 注意：\n   *  - この処理は「読み込み時に一度だけ実行」されます。\n   *  - #fn-kitchen-car に top を効かせるには position が必要です。\n   ************************************************************************/\n\n  // 店舗データを保持（セレクトボックス変更時に参照）\n  window.shopRecords = [];\n\n  // 編集モード判定（初期化時に設定）\n  window.isCreateMode = false;\n\n  /* ========================================\n   * レイアウト関連\n   * ======================================== */\n\n  /**\n   * getHeaderHeight\n   * - #Header 要素の「見た目の高さ」をピクセル単位で返します。\n   * - 要素が見つからなければ 0 を返します。\n   *\n   * @returns {number} headerHeightPx - 整数ピクセル\n   */\n  function getHeaderHeight() {\n    var $header = $('#Header');\n\n    if ($header.length === 0) {\n      return 0;\n    }\n\n    var rect = $header[0].getBoundingClientRect();\n    var h = Math.round(rect.height || 0);\n\n    return (h > 0) ? h : 0;\n  }\n\n  /**\n   * buildCalcHeightCss\n   * - ヘッダーのピクセル値を受け取り、CSS の calc() 文字列を返します。\n   *\n   * @param {number} px - ヘッダー高さ（ピクセル）\n   * @returns {string} CSS の値\n   */\n  function buildCalcHeightCss(px) {\n    var n = (typeof px === 'number' && !isNaN(px)) ? px : 0;\n    return 'calc(100% - ' + String(n) + 'px)';\n  }\n\n  /**\n   * applyKitchenCarLayout\n   * - 実際に DOM に対して style を当てる関数\n   *\n   * @param {number} headerHeightPx - ヘッダーの高さ（ピクセル）\n   */\n  function applyKitchenCarLayout(headerHeightPx) {\n    var $target = $('#fn-kitchen-car');\n\n    if ($target.length === 0) {\n      return;\n    }\n\n    $target.css('top', String(headerHeightPx) + 'px');\n    $target.css('height', buildCalcHeightCss(headerHeightPx));\n  }\n\n  /**\n   * initKitchenCarLayout\n   * - レイアウト初期化\n   */\n  function initKitchenCarLayout() {\n    var headerH = getHeaderHeight();\n    applyKitchenCarLayout(headerH);\n  }\n\n  /* ========================================\n   * URLパラメータ取得\n   * ======================================== */\n\n  /**\n   * getUrlParam\n   * - URLから指定したパラメータの値を取得\n   *\n   * @param {string} name - パラメータ名\n   * @returns {string|null} パラメータ値（存在しない場合はnull）\n   */\n  window.getUrlParam = function (name) {\n    var params = new URLSearchParams(window.location.search);\n    return params.get(name);\n  };\n\n  /* ========================================\n   * 店舗セレクトボックス初期化\n   * ======================================== */\n\n  /**\n   * loadShopOptions\n   * - 店舗マスタからデータを取得し、セレクトボックスに設定\n   * - 登録パターン: URLのLinkIdでフィルタリング\n   * - 更新パターン: $p.id()で既存レコードを取得し、EVENT_IDでフィルタリング\n   */\n  async function loadShopOptions() {\n    var $select = $('#fn-formShop');\n    if ($select.length === 0) {\n      return;\n    }\n\n    // 既存のオプションをクリア（placeholder以外）\n    $select.find('option:not([disabled])').remove();\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // フィルタリング用のイベントIDを取得\n      var eventId = null;\n\n      if (window.isUrlCreateMode) {\n        // 登録パターン: URLからLinkIdを取得\n        eventId = window.getUrlParam('LinkId');\n        window.force && console.log('登録パターン - LinkId:', eventId);\n      } else {\n        // 更新パターン: $p.id()で既存レコードを取得し、EVENT_IDを取得\n        var recordId = $p.id();\n        if (recordId) {\n          var existingRecord = await api.getRecord(recordId, {\n            columns: [TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.EVENT_ID, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.SHOP_NAME, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_FROM, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_TO, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.NOTE],\n            setLabelText: false,\n            setDisplayValue: 'Value',\n          });\n\n          if (existingRecord && existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.EVENT_ID]) {\n            eventId = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.EVENT_ID];\n            window.existingEventId = eventId;\n            window.force && console.log('更新パターン - EVENT_ID:', eventId);\n\n            // 既存の店舗名、日付、その他詳細を保持（後でセット）\n            window.existingShopName = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.SHOP_NAME] || '';\n            window.existingDateFrom = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_FROM] || '';\n            window.existingDateTo = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_TO] || '';\n            window.existingNote = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.NOTE] || '';\n          }\n        }\n      }\n\n      // イベント予定一覧（PERIOD_SITE_ID）を取得\n      var records = await api.getRecords(PERIOD_SITE_ID, {\n        columns: [TABLES.PERIOD.COLUMNS.NAME, TABLES.PERIOD.COLUMNS.EVENT_ID, TABLES.PERIOD.COLUMNS.START_DATE, TABLES.PERIOD.COLUMNS.END_DATE, 'ResultId'],\n        setLabelText: false,\n        setDisplayValue: 'Value',\n      });\n\n      if (!records || records.length === 0) {\n        window.force && console.warn('店舗データが取得できませんでした');\n        return;\n      }\n\n      // eventIdでフィルタリング\n      var filteredRecords = eventId\n        ? records.filter(function (record) {\n            return String(record[TABLES.PERIOD.COLUMNS.EVENT_ID]) === String(eventId);\n          })\n        : records;\n\n      window.force && console.log('フィルタ後の店舗データ:', filteredRecords);\n\n      // 店舗データを保持\n      window.shopRecords = filteredRecords;\n\n      filteredRecords.forEach(function (record) {\n        var name = record[TABLES.PERIOD.COLUMNS.NAME] || '';\n\n        if (name) {\n          var $option = $('<option></option>').val(name).text(name);\n          $select.append($option);\n        }\n      });\n\n      // セレクトボックス変更時のイベントハンドラ\n      $select.off('change.shop').on('change.shop', handleShopChange);\n\n      // 更新パターン時は既存の店舗と日付をセット、テーブルを表示\n      if (!window.isUrlCreateMode && window.existingShopName) {\n        // 初期表示時のexistingRecordIdを$p.id()でセット（preChecked判定用）\n        window.existingRecordId = $p.id();\n\n        $select.val(window.existingShopName);\n\n        // 日付もセット\n        if (window.existingDateFrom) {\n          $('#fn-formDateFrom').val(window.formatDateForInput(window.existingDateFrom));\n        }\n        if (window.existingDateTo) {\n          $('#fn-formDateTo').val(window.formatDateForInput(window.existingDateTo));\n        }\n\n        // その他詳細をセット\n        if (window.existingNote) {\n          $('#fn-formNote').val(window.existingNote);\n        }\n\n        // キッチンカーテーブルを表示して描画\n        $('#sdt-kitchen-car-table').show();\n        if (typeof window.loadKitchenCarStatus === 'function') {\n          window.loadKitchenCarStatus();\n        }\n      }\n\n    } catch (error) {\n      window.force && console.error('店舗データ取得エラー:', error);\n    }\n  }\n\n  /**\n   * handleShopChange\n   * - 店舗セレクトボックス変更時に開催期間を設定し、キッチンカーテーブルを再描画\n   */\n  function handleShopChange() {\n    var selectedValue = $(this).val();\n    if (!selectedValue) {\n      // 店舗未選択時はテーブルを非表示\n      $('#sdt-kitchen-car-table').hide();\n      return;\n    }\n\n    // 選択された店舗のレコードを検索\n    var selectedRecord = window.shopRecords.find(function (record) {\n      return record[TABLES.PERIOD.COLUMNS.NAME] === selectedValue;\n    });\n\n    if (!selectedRecord) {\n      window.force && console.warn('選択された店舗のデータが見つかりません:', selectedValue);\n      return;\n    }\n\n    window.force && console.log('選択された店舗データ:', selectedRecord);\n\n    // START_DATE → 開始日、END_DATE → 終了日\n    var dateFrom = selectedRecord[TABLES.PERIOD.COLUMNS.START_DATE] || '';\n    var dateTo = selectedRecord[TABLES.PERIOD.COLUMNS.END_DATE] || '';\n\n    // 日付形式を input[type=\"date\"] 用に変換 (YYYY-MM-DD)\n    $('#fn-formDateFrom').val(window.formatDateForInput(dateFrom));\n    $('#fn-formDateTo').val(window.formatDateForInput(dateTo));\n\n    // キッチンカーテーブルを表示して再描画\n    $('#sdt-kitchen-car-table').show();\n    if (typeof window.loadKitchenCarStatus === 'function') {\n      window.loadKitchenCarStatus();\n    }\n  }\n\n  /**\n   * formatDateForInput\n   * - 日付文字列を input[type=\"date\"] 用のフォーマット (YYYY-MM-DD) に変換\n   *\n   * @param {string} dateStr - 日付文字列\n   * @returns {string} YYYY-MM-DD 形式の日付\n   */\n  window.formatDateForInput = function (dateStr) {\n    if (!dateStr) return '';\n\n    // ISO形式 (2025-01-07T00:00:00) の場合\n    if (dateStr.includes('T')) {\n      return dateStr.split('T')[0];\n    }\n\n    // すでに YYYY-MM-DD 形式の場合\n    if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateStr)) {\n      return dateStr;\n    }\n\n    // その他の形式の場合はDateオブジェクトで変換を試みる\n    try {\n      var d = new Date(dateStr);\n      if (!isNaN(d.getTime())) {\n        return d.toISOString().split('T')[0];\n      }\n    } catch (e) {\n      window.force && console.warn('日付変換エラー:', dateStr, e);\n    }\n\n    return '';\n  };\n\n  /* ========================================\n   * 初期化\n   * ======================================== */\n\n  document.addEventListener('DOMContentLoaded', function () {\n    try {\n      // 編集モード判定（$p.action() が 'NEW' なら作成モード、それ以外は更新モード）\n      var action = $p.action();\n      window.isCreateMode = String(action).toUpperCase() === 'NEW';\n      // URL由来のモードを保持（動的モード切り替えの判定用）\n      window.isUrlCreateMode = window.isCreateMode;\n      window.force && console.log('$p.action():', action);\n      window.force && console.log('isCreateMode:', window.isCreateMode);\n\n      // レイアウト初期化\n      initKitchenCarLayout();\n\n      // モードに応じてタイトル・ボタンテキストを変更\n      var modeText = window.isCreateMode ? '登録' : '更新';\n      $('.sdt-kitchen-car-title__text').text('キッチンカー' + modeText);\n      $('#fn-submitButton .sdt-button__text').text(modeText);\n\n      // 店舗セレクトボックス初期化\n      // 注: 更新パターン時も店舗は変更可能（EVENT_IDでフィルタリング済み）\n      loadShopOptions();\n\n    } catch (e) {\n      window.force && console.error('initKitchenCarLayout error', e);\n    }\n  });\n\n})(jQuery);\n",
            "Id": 1
          },
          {
            "Title": "【表示制御】キッチンカー使用可能判定",
            "New": true,
            "Edit": true,
            "Body": "(function ($) {\n  'use strict';\n\n  /************************************************************************\n   * キッチンカー状況テーブルの取得・判定・描画\n   ************************************************************************/\n\n  // キッチンカー状況データを保持\n  window.kitchenCarStatusRecords = [];\n\n  // キッチンカー出力テーブルの予約データを保持\n  window.kitchenCarOutputRecords = [];\n\n  // 更新モード初期表示時の既存キッチンカーIDs（チェック復元用）\n  window.existingKitchenCarIds = [];\n\n  /* ========================================\n   * キッチンカー状況テーブル初期化\n   * ======================================== */\n\n  /**\n   * loadKitchenCarStatus\n   * - キッチンカー状況テーブルからデータを取得し、テーブルに表示\n   */\n  async function loadKitchenCarStatus() {\n    // 店舗変更時はチェック状態をリセット\n    window.existingKitchenCarIds = [];\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // キッチンカー状況テーブルから取得（RESERVED_FROM/RESERVED_TO は不要）\n      var records = await api.getRecords(KITCHEN_CAR_STATUS_SITE_ID, {\n        columns: [TABLES.KITCHEN_CAR_STATUS.COLUMNS.NAME, TABLES.KITCHEN_CAR_STATUS.COLUMNS.UNAVAILABLE_FROM, TABLES.KITCHEN_CAR_STATUS.COLUMNS.UNAVAILABLE_TO, 'ResultId'],\n        setLabelText: false,\n        setDisplayValue: 'Value',\n      });\n\n      if (!records || records.length === 0) {\n        window.force && console.warn('キッチンカー状況データが取得できませんでした');\n        return;\n      }\n\n      window.force && console.log('キッチンカー状況データ:', records);\n\n      // キッチンカー出力テーブル（253143）から全件取得\n      var outputRecords = await api.getRecords(KITCHEN_CAR_OUTPUT_SITE_ID, {\n        columns: [TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.KITCHEN_CAR_IDS, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_FROM, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_TO, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.SHOP_NAME, TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.NOTE, 'ResultId'],\n        setLabelText: false,\n        setDisplayValue: 'Value',\n      });\n\n      window.force && console.log('キッチンカー出力データ:', outputRecords);\n      window.kitchenCarOutputRecords = outputRecords || [];\n\n      // モード判定（2x2マトリクス）\n      // ┌─────────────┬──────────────────┬──────────────────┐\n      // │             │ URLパターン=NEW  │ URLパターン=Edit │\n      // │             │ (店舗変更可)     │ (店舗変更可)     │\n      // ├─────────────┼──────────────────┼──────────────────┤\n      // │ レコードあり │ 更新モード       │ 更新モード       │\n      // │ レコードなし │ 登録モード       │ 登録モード       │\n      // └─────────────┴──────────────────┴──────────────────┘\n      // - isUrlCreateMode: URLパターン（EVENT_ID取得方法を決定）\n      // - isCreateMode: 実際のモード（API処理 create/update を決定）\n      // - キッチンカーは「店舗名」でレコードを特定\n      // - 店舗変更時は常にモード判定を行う\n      var formShopName = $('#fn-formShop').val() || '';\n      var existingRecord = (outputRecords || []).find(function (rec) {\n        return rec[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.SHOP_NAME] === formShopName;\n      });\n\n      if (existingRecord) {\n        // レコードあり → 更新モード\n        window.isCreateMode = false;\n        window.existingRecordId = existingRecord.ResultId;\n        window.force && console.log('同店舗レコード発見、更新モードに切り替え:', existingRecord.ResultId);\n\n        // タイトル・ボタンテキストを更新\n        $('.sdt-kitchen-car-title__text').text('キッチンカー更新');\n        $('#fn-submitButton .sdt-button__text').text('更新');\n\n        // 削除ボタンを表示\n        $('#fn-deleteButton').show();\n\n        // 既存レコードの日付・その他詳細をフォームにセット\n        var existingDateFrom = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_FROM] || '';\n        var existingDateTo = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_TO] || '';\n        var existingNote = existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.NOTE] || '';\n\n        if (existingDateFrom) {\n          $('#fn-formDateFrom').val(window.formatDateForInput(existingDateFrom));\n        }\n        if (existingDateTo) {\n          $('#fn-formDateTo').val(window.formatDateForInput(existingDateTo));\n        }\n        $('#fn-formNote').val(existingNote);\n\n        // 更新モード初期表示時（URLから直接開いた時）は既存のKITCHEN_CAR_IDSを保持\n        if (!window.isUrlCreateMode) {\n          try {\n            window.existingKitchenCarIds = JSON.parse(existingRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.KITCHEN_CAR_IDS] || '[]');\n          } catch (e) {\n            window.existingKitchenCarIds = [];\n          }\n          window.force && console.log('既存キッチンカーIDs:', window.existingKitchenCarIds);\n        }\n      } else {\n        // レコードなし → 登録モード\n        window.isCreateMode = true;\n        window.existingRecordId = null;\n        window.force && console.log('同店舗レコードなし、登録モードに切り替え');\n\n        // タイトル・ボタンテキストを登録に変更\n        $('.sdt-kitchen-car-title__text').text('キッチンカー登録');\n        $('#fn-submitButton .sdt-button__text').text('登録');\n\n        // 削除ボタンを非表示\n        $('#fn-deleteButton').hide();\n\n        // 登録モード時はその他詳細をクリア\n        $('#fn-formNote').val('');\n      }\n\n      // データを保持\n      window.kitchenCarStatusRecords = records;\n\n      // テーブルに描画\n      renderKitchenCarTable(records);\n\n    } catch (error) {\n      window.force && console.error('キッチンカー状況データ取得エラー:', error);\n    }\n  }\n\n  /**\n   * isDateRangeOverlap\n   * - 2つの期間が重複しているかを判定\n   *\n   * @param {Date} start1 - 期間1の開始日\n   * @param {Date} end1 - 期間1の終了日\n   * @param {Date} start2 - 期間2の開始日\n   * @param {Date} end2 - 期間2の終了日\n   * @returns {boolean} 重複していればtrue\n   */\n  function isDateRangeOverlap(start1, end1, start2, end2) {\n    return start1 <= end2 && end1 >= start2;\n  }\n\n  /**\n   * getKitchenCarStatus\n   * - キッチンカーの使用状況を判定\n   * - フォームの開催期間とKITCHEN_CAR_OUTPUTの期間が重複していれば「使用中」\n   *\n   * @param {Object} record - キッチンカー状況レコード\n   * @returns {Object} { status: string, canSelect: boolean }\n   */\n  function getKitchenCarStatus(record) {\n    var kitchenCarResultId = String(record.ResultId || '');\n\n    // フォームから開催期間を取得\n    var formDateFrom = $('#fn-formDateFrom').val();\n    var formDateTo = $('#fn-formDateTo').val();\n\n    // 使用不可期間チェック (UNAVAILABLE_FROM ~ UNAVAILABLE_TO)\n    var unavailableStart = record[TABLES.KITCHEN_CAR_STATUS.COLUMNS.UNAVAILABLE_FROM] ? new Date(record[TABLES.KITCHEN_CAR_STATUS.COLUMNS.UNAVAILABLE_FROM]) : null;\n    var unavailableEnd = record[TABLES.KITCHEN_CAR_STATUS.COLUMNS.UNAVAILABLE_TO] ? new Date(record[TABLES.KITCHEN_CAR_STATUS.COLUMNS.UNAVAILABLE_TO]) : null;\n\n    if (unavailableStart && unavailableEnd) {\n      unavailableStart.setHours(0, 0, 0, 0);\n      unavailableEnd.setHours(0, 0, 0, 0);\n\n      // フォームの期間と使用不可期間が重複しているかチェック\n      if (formDateFrom && formDateTo) {\n        var formStart = new Date(formDateFrom);\n        var formEnd = new Date(formDateTo);\n        formStart.setHours(0, 0, 0, 0);\n        formEnd.setHours(0, 0, 0, 0);\n\n        if (isDateRangeOverlap(formStart, formEnd, unavailableStart, unavailableEnd)) {\n          return { status: '使用不可期間', canSelect: false };\n        }\n      }\n    }\n\n    // KITCHEN_CAR_OUTPUT（253143）の予約データと期間重複チェック\n    // 同店舗で使用中の場合はpreCheckedフラグを立てる\n    var preChecked = false;\n    var formShopName = $('#fn-formShop').val() || '';\n\n    if (formDateFrom && formDateTo && window.kitchenCarOutputRecords.length > 0) {\n      var formStart = new Date(formDateFrom);\n      var formEnd = new Date(formDateTo);\n      formStart.setHours(0, 0, 0, 0);\n      formEnd.setHours(0, 0, 0, 0);\n\n      // 更新モード時は自分自身のレコードを除外\n      var currentRecordId = !window.isCreateMode ? String(window.existingRecordId || $p.id()) : '';\n\n      for (var i = 0; i < window.kitchenCarOutputRecords.length; i++) {\n        var outputRecord = window.kitchenCarOutputRecords[i];\n\n        // 自分自身のレコードは除外\n        if (currentRecordId && String(outputRecord.ResultId) === currentRecordId) {\n          continue;\n        }\n\n        // KITCHEN_CAR_IDS（JSON配列）に該当キッチンカーが含まれているかチェック\n        var kitchenCarIds = [];\n        try {\n          kitchenCarIds = JSON.parse(outputRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.KITCHEN_CAR_IDS] || '[]');\n        } catch (e) {\n          kitchenCarIds = [];\n        }\n\n        if (kitchenCarIds.indexOf(kitchenCarResultId) < 0 && kitchenCarIds.indexOf(Number(kitchenCarResultId)) < 0) {\n          continue;\n        }\n\n        // 期間重複チェック\n        var reservedFrom = outputRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_FROM] ? new Date(outputRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_FROM]) : null;\n        var reservedTo = outputRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_TO] ? new Date(outputRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_TO]) : null;\n\n        if (reservedFrom && reservedTo) {\n          reservedFrom.setHours(0, 0, 0, 0);\n          reservedTo.setHours(0, 0, 0, 0);\n\n          if (isDateRangeOverlap(formStart, formEnd, reservedFrom, reservedTo)) {\n            var shopName = outputRecord[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.SHOP_NAME] || '他店舗';\n\n            // 同店舗の場合は使用可能＋チェック済みとする\n            if (shopName === formShopName) {\n              preChecked = true;\n              continue;\n            }\n\n            return { status: shopName + 'で使用中', canSelect: false, preChecked: false };\n          }\n        }\n      }\n    }\n\n    // 上記以外は使用可能\n    return { status: '使用可能', canSelect: true, preChecked: preChecked };\n  }\n\n  /**\n   * renderKitchenCarTable\n   * - キッチンカー一覧をテーブルに描画\n   *\n   * @param {Array} records - キッチンカー状況レコード配列\n   */\n  function renderKitchenCarTable(records) {\n    var $tbody = $('#sdt-kitchen-car-table .sdt-table__body');\n    if ($tbody.length === 0) {\n      $tbody = $('#sdt-kitchen-car-table tbody');\n      if ($tbody.length === 0) {\n        window.force && console.error('renderKitchenCarTable: tbody not found');\n        return;\n      }\n    }\n\n    var $template = $tbody.children('tr.fn-tableColumn-loop').first();\n    if ($template.length === 0) {\n      window.force && console.error('renderKitchenCarTable: template row not found');\n      return;\n    }\n\n    // テンプレートは非表示のまま保持\n    $template.hide();\n\n    // 既存の出力行（テンプレート以外）を削除\n    $tbody.find('tr').not($template).remove();\n\n    // キッチンカー名で昇順ソート\n    var sortedRecords = records.slice().sort(function (a, b) {\n      var nameA = a[TABLES.KITCHEN_CAR_STATUS.COLUMNS.NAME] || '';\n      var nameB = b[TABLES.KITCHEN_CAR_STATUS.COLUMNS.NAME] || '';\n      return nameA.localeCompare(nameB, 'ja');\n    });\n\n    // DocumentFragment を使ってパフォーマンス向上\n    var fragment = document.createDocumentFragment();\n\n    sortedRecords.forEach(function (record) {\n      var $row = $template.clone().removeClass('fn-tableColumn-loop').show();\n\n      // キッチンカー名\n      var name = record[TABLES.KITCHEN_CAR_STATUS.COLUMNS.NAME] || '';\n      $row.find('[data-target=\"fn-table-name\"]').text(name);\n\n      // 使用状況を判定\n      var statusInfo = getKitchenCarStatus(record);\n      $row.find('[data-target=\"fn-table-status\"]').text(statusInfo.status);\n\n      // チェックボックスの設定（valueはResultId、表示はキッチンカー名）\n      var $checkbox = $row.find('[data-target=\"fn-table-checkbox\"] .fn-pick');\n      if ($checkbox.length) {\n        // valueにはResultIdを設定（ClassAに登録する値）\n        $checkbox.val(record.ResultId || '');\n\n        // 使用不可の場合はdisabled\n        if (!statusInfo.canSelect) {\n          $checkbox.prop('disabled', true);\n          $row.addClass('sdt-table__row--disabled');\n        }\n\n        // チェック状態の設定\n        var resultId = String(record.ResultId || '');\n        if (!window.isUrlCreateMode && window.existingKitchenCarIds.length > 0) {\n          // 更新モード初期表示時: 既存のKITCHEN_CAR_IDSに含まれていればチェック\n          if (window.existingKitchenCarIds.indexOf(resultId) >= 0 || window.existingKitchenCarIds.indexOf(Number(resultId)) >= 0) {\n            $checkbox.prop('checked', true);\n          }\n        } else if (statusInfo.preChecked && window.isUrlCreateMode) {\n          // 登録モードで店舗切替時: 同店舗で既に使用中の場合はチェック\n          $checkbox.prop('checked', true);\n        }\n      }\n\n      fragment.appendChild($row.get(0));\n    });\n\n    $tbody.get(0).appendChild(fragment);\n\n    // ボタン活性状態を更新\n    if (typeof window.updateSubmitButtonState === 'function') {\n      window.updateSubmitButtonState();\n    }\n  }\n\n  /* ========================================\n   * 初期化\n   * ======================================== */\n\n  // loadKitchenCarStatusをグローバルに公開（店舗変更時に呼び出し）\n  window.loadKitchenCarStatus = loadKitchenCarStatus;\n\n  document.addEventListener('DOMContentLoaded', function () {\n    // 作成モード時はテーブルを非表示（店舗選択後に表示）\n    // 更新モード時は既存データがあるので表示\n    if (window.isCreateMode) {\n      $('#sdt-kitchen-car-table').hide();\n    }\n  });\n\n})(jQuery);\n",
            "Id": 5
          },
          {
            "Title": "【データ処理】キッチンカー登録保存削除",
            "New": true,
            "Edit": true,
            "Body": "(function ($) {\n  'use strict';\n\n  /************************************************************************\n   * 既存データ読み込み・バリデーション・登録/更新処理\n   ************************************************************************/\n\n  /* ========================================\n   * 既存データ読み込み（更新モード用）\n   * ======================================== */\n\n  // 注: 既存データの読み込み（店舗・日付・NOTE・EVENT_ID）は03_初期表示.jsのloadShopOptions()で行われる\n  // チェックボックスの初期状態は04_使用可能判定.jsのpreCheckedで処理される\n\n  /* ========================================\n   * 登録処理\n   * ======================================== */\n\n  /**\n   * validateForm\n   * - フォームのバリデーション\n   *\n   * @returns {Object|null} エラーがあればnull、なければフォームデータ\n   */\n  function validateForm() {\n    var shop = $('#fn-formShop').val();\n    var dateFrom = $('#fn-formDateFrom').val();\n    var dateTo = $('#fn-formDateTo').val();\n    var selectedCars = [];\n\n    // 選択されたキッチンカーを取得\n    $('.fn-pick:checked:not(:disabled)').each(function () {\n      selectedCars.push($(this).val());\n    });\n\n    var errors = [];\n\n    if (!shop) {\n      errors.push('店舗を選択してください');\n    }\n    if (!dateFrom) {\n      errors.push('開催期間（開始日）を入力してください');\n    }\n    if (!dateTo) {\n      errors.push('開催期間（終了日）を入力してください');\n    }\n    if (dateFrom && dateTo && dateFrom > dateTo) {\n      errors.push('開催期間の開始日は終了日より前の日付を指定してください');\n    }\n    var note = $('#fn-formNote').val() || '';\n    if (note.length > 51) {\n      errors.push('その他詳細は51文字以内で入力してください');\n    }\n    if (errors.length > 0) {\n      alert(errors.join('\\n'));\n      return null;\n    }\n\n    // チェックボックスの選択チェックはボタンのdisabledで制御するため、ここではチェックしない\n    if (selectedCars.length === 0) {\n      return null;\n    }\n\n    return {\n      shop: shop,\n      dateFrom: dateFrom,\n      dateTo: dateTo,\n      selectedCars: selectedCars,\n      note: $('#fn-formNote').val() || ''\n    };\n  }\n\n  /**\n   * handleSubmit\n   * - 登録/更新ボタンクリック時の処理\n   * - isCreateMode: true → 作成、false → 更新（$p.idを使用）\n   */\n  async function handleSubmit() {\n    var formData = validateForm();\n    if (!formData) return;\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // キッチンカーResultIdは複数選択をJSON配列形式で登録\n      var kitchenCarIds = JSON.stringify(formData.selectedCars);\n\n      var data = {};\n      data[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.SHOP_NAME] = formData.shop;\n      data[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.KITCHEN_CAR_IDS] = kitchenCarIds;\n      data[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_FROM] = formData.dateFrom;\n      data[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.DATE_TO] = formData.dateTo;\n      data[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.NOTE] = formData.note;\n\n      window.force && console.log('モード:', window.isCreateMode ? '作成' : '更新');\n      window.force && console.log('データ:', data);\n\n      var result;\n      if (window.isCreateMode) {\n        // 作成モード時のみEVENT_ID（LinkId/イベントID）とSHOP_RESULT_ID（店舗ResultId）をセット\n        // URLにLinkIdがない場合（更新パターン＋登録モード）は既存レコードのEVENT_IDを使用\n        var linkId = window.getUrlParam('LinkId') || window.existingEventId || '';\n        data[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.EVENT_ID] = linkId;\n\n        var selectedShop = window.shopRecords.find(function (record) {\n          return record[TABLES.PERIOD.COLUMNS.NAME] === formData.shop;\n        });\n\n        if (selectedShop && selectedShop.ResultId) {\n          data[TABLES.KITCHEN_CAR_OUTPUT.COLUMNS.SHOP_RESULT_ID] = String(selectedShop.ResultId);\n          window.force && console.log('店舗ResultId:', selectedShop.ResultId);\n        } else {\n          alert('店舗のResultIdが取得できません。');\n          return;\n        }\n\n        result = await api.createRecord($p.siteId(), data);\n        window.force && console.log('作成結果:', result);\n        alert('キッチンカーを登録しました');\n      } else {\n        // 更新モード（$p.id() または window.existingRecordId を使用）\n        var recordId = window.existingRecordId || $p.id();\n        if (!recordId) {\n          alert('レコードIDが取得できません。');\n          return;\n        }\n        window.force && console.log('recordId:', recordId);\n        // updateRecordは (recordId, updateData) の2引数\n        result = await api.updateRecord(recordId, data);\n        window.force && console.log('更新結果:', result);\n        alert('キッチンカーを更新しました');\n      }\n\n      // 処理後は画面を閉じる（または元の画面に戻る）\n      handleCancel();\n\n    } catch (error) {\n      window.force && console.error('処理エラー:', error);\n      alert((window.isCreateMode ? '登録' : '更新') + 'に失敗しました: ' + (error.message || error));\n    }\n  }\n\n  /**\n   * handleCancel\n   * - キャンセルボタンクリック時の処理\n   * - 前の画面に戻る\n   */\n  function handleCancel() {\n    history.back();\n  }\n\n  /**\n   * handleDelete\n   * - 削除ボタンクリック時の処理\n   * - $p.id() または window.existingRecordId で現在のレコードを削除\n   */\n  async function handleDelete() {\n    var recordId = window.existingRecordId || $p.id();\n    if (!recordId) {\n      alert('レコードIDが取得できません。');\n      return;\n    }\n\n    if (!confirm('このキッチンカーを削除しますか？')) {\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n      var result = await api.deleteRecord(recordId);\n      window.force && console.log('削除結果:', result);\n      alert('キッチンカーを削除しました');\n      handleCancel();\n    } catch (error) {\n      window.force && console.error('削除エラー:', error);\n      alert('削除に失敗しました: ' + (error.message || error));\n    }\n  }\n\n  /* ========================================\n   * ボタン活性制御\n   * ======================================== */\n\n  /**\n   * updateSubmitButtonState\n   * - チェックボックスの選択状態に応じて登録/更新ボタンの活性状態を更新\n   */\n  function updateSubmitButtonState() {\n    var hasChecked = $('.fn-pick:checked:not(:disabled)').length > 0;\n    $('#fn-submitButton').prop('disabled', !hasChecked);\n  }\n\n  // グローバルに公開（04から呼び出し）\n  window.updateSubmitButtonState = updateSubmitButtonState;\n\n  /* ========================================\n   * 初期化\n   * ======================================== */\n\n  document.addEventListener('DOMContentLoaded', function () {\n    // 更新モード時は削除ボタンを表示\n    // 注: 既存データの読み込み・店舗disabled設定は03_初期表示.jsで行われる\n    if (!window.isCreateMode) {\n      $('#fn-deleteButton').show();\n    }\n\n    // 初期状態でボタンをdisabledに\n    $('#fn-submitButton').prop('disabled', true);\n\n    // ボタンイベント設定（重複防止のため.off()で既存イベント解除）\n    $('#fn-submitButton').off('click').on('click', handleSubmit);\n    $('#fn-deleteButton').off('click').on('click', handleDelete);\n    $('#fn-cancelButton').off('click').on('click', handleCancel);\n\n    // チェックボックス変更時にボタン活性状態を更新\n    $(document).on('change', '.fn-pick', updateSubmitButtonState);\n  });\n\n})(jQuery);\n",
            "Id": 6
          }
        ],
        "Htmls": [
          {
            "Title": "【表示制御】キッチンカー登録HTML",
            "PositionType": 1000,
            "New": true,
            "Edit": true,
            "Body": "        <div id=\"fn-kitchen-car\" class=\"sdt-kitchen-car\">\n            <!-- キッチンカー選択画面全体ラップ -->\n            <div class=\"sdt-kitchen-car-wrap\">\n\n                <!-- 画面タイトル -->\n                <h2 class=\"sdt-kitchen-car-title\">\n                    <span class=\"sdt-kitchen-car-title__text\">キッチンカー登録</span>\n                </h2>\n\n                <!-- 入力フォーム -->\n                <div class=\"sdt-kitchen-car-form\">\n                    <form id=\"fn-kitchen-car-form\" class=\"sdt-kitchen-car-form__area\">\n                        <!-- 店舗 -->\n                        <div class=\"sdt-form-box sdt-form-shop\">\n                            <label class=\"sdt-form-label\" for=\"fn-formShop\">\n                                <span class=\"sdt-text\">店舗</span>\n                                <span class=\"sdt-required\">*</span>\n                            </label>\n                            <div class=\"sdt-form-inputArea\">\n                                <div class=\"sdt-selector\">\n                                    <select id=\"fn-formShop\" class=\"sdt-selector-content\">\n                                        <option value=\"\" disabled selected style=\"display:none;\">選択してください</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- 開催期間 -->\n                        <div class=\"sdt-form-box sdt-form-period\">\n                            <label class=\"sdt-form-label\" for=\"fn-formDateFrom\">\n                                <span class=\"sdt-text\">開催期間</span>\n                                <span class=\"sdt-required\">*</span>\n                            </label>\n                            <div class=\"sdt-form-inputArea sdt-form-inputArea--date\">\n                                <input id=\"fn-formDateFrom\" type=\"date\" class=\"sdt-input sdt-input--date\" disabled>\n                                <span class=\"sdt-date-separator\">〜</span>\n                                <input id=\"fn-formDateTo\" type=\"date\" class=\"sdt-input sdt-input--date\" disabled>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n\n                <!-- キッチンカー一覧テーブル -->\n                <div id=\"sdt-kitchen-car-table\" class=\"sdt-kitchen-car-table\">\n                    <div class=\"sdt-kitchen-car-table__wrap\">\n                        <table class=\"sdt-table\">\n                            <thead class=\"sdt-table__head\">\n                                <tr class=\"sdt-table__row\">\n                                    <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:50%;\">キッチンカー</th>\n                                    <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:35%;\">使用状況</th>\n                                    <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:15%;\">選択</th>\n                                </tr>\n                            </thead>\n                            <!-- ループ開始 -->\n                            <tbody class=\"sdt-table__body\">\n                                <tr class=\"sdt-table__row fn-tableColumn-loop\" style=\"display:none;\">\n                                    <td class=\"sdt-table__cell\" data-target=\"fn-table-name\">[キッチンカー名が入ります]</td>\n                                    <td class=\"sdt-table__cell\" data-target=\"fn-table-status\">[使用状況が入ります]</td>\n                                    <td class=\"sdt-table__cell\" data-target=\"fn-table-checkbox\">\n                                        <input type=\"checkbox\" class=\"sdt-checkbox fn-pick\" value=\"\">\n                                    </td>\n                                </tr>\n                            </tbody>\n                            <!-- ループ終了 -->\n                        </table>\n                    </div>\n                </div>\n\n                <!-- その他詳細 -->\n                <div class=\"sdt-kitchen-car-note\">\n                    <div class=\"sdt-form-box sdt-form-note\">\n                        <label class=\"sdt-form-label\" for=\"fn-formNote\">\n                            <span class=\"sdt-text\">その他詳細</span>\n                        </label>\n                        <div class=\"sdt-form-inputArea\">\n                            <input id=\"fn-formNote\" type=\"text\" class=\"sdt-input\" placeholder=\"\">\n                        </div>\n                    </div>\n                </div>\n\n                <!-- アクションボタン -->\n                <div class=\"sdt-form-buttonArea\">\n                    <button class=\"sdt-button sdt-button--primary\" type=\"button\" id=\"fn-submitButton\">\n                        <span class=\"sdt-button__text\">登録</span>\n                    </button>\n                    <button class=\"sdt-button sdt-button--danger\" type=\"button\" id=\"fn-deleteButton\" style=\"display:none;\">\n                        <span class=\"sdt-button__text\">削除</span>\n                    </button>\n                    <button class=\"sdt-button sdt-button--secondary\" type=\"button\" id=\"fn-cancelButton\">\n                        <span class=\"sdt-button__text\">キャンセル</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n",
            "Id": 1
          }
        ],
        "NoDisplayIfReadOnly": false
      },
      "Publish": false,
      "DisableCrossSearch": false,
      "Comments": []
    }
  ],
  "Data": [],
  "Permissions": [
    {
      "SiteId": 255693,
      "Permissions": [
        {
          "ReferenceId": 255693,
          "DeptId": 0,
          "GroupId": 0,
          "UserId": -1,
          "PermissionType": 511
        },
        {
          "ReferenceId": 255693,
          "DeptId": 0,
          "GroupId": 0,
          "UserId": 1,
          "PermissionType": 511
        }
      ]
    }
  ],
  "PermissionIdList": {
    "DeptIdList": [],
    "GroupIdList": [],
    "UserIdList": [
      {
        "UserId": 1,
        "LoginId": "Administrator"
      }
    ]
  }
}