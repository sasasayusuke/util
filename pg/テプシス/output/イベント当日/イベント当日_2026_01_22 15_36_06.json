{
  "HeaderInfo": {
    "AssemblyVersion": "1.4.1.1",
    "BaseSiteId": 255689,
    "Server": "http://192.168.10.67",
    "CreatorName": "Administrator",
    "PackageTime": "2026-01-22T06:36:06.285902+00:00",
    "Convertors": [
      {
        "SiteId": 255689,
        "SiteTitle": "イベント当日",
        "ReferenceType": "Results",
        "IncludeData": false
      }
    ],
    "IncludeSitePermission": true,
    "IncludeRecordPermission": true,
    "IncludeColumnPermission": true,
    "IncludeNotifications": true,
    "IncludeReminders": true
  },
  "Sites": [
    {
      "TenantId": 1,
      "SiteId": 255689,
      "Title": "イベント当日",
      "SiteName": "",
      "SiteGroupName": "",
      "Body": "document.getElementById(\"NewMenuContainer\").remove()",
      "GridGuide": "",
      "EditorGuide": "",
      "CalendarGuide": "",
      "CrosstabGuide": "",
      "GanttGuide": "",
      "BurnDownGuide": "",
      "TimeSeriesGuide": "",
      "AnalyGuide": "",
      "KambanGuide": "",
      "ImageLibGuide": "",
      "ReferenceType": "Results",
      "ParentId": 255673,
      "InheritPermission": 255689,
      "SiteSettings": {
        "Version": 1.017,
        "ReferenceType": "Results",
        "GridColumns": [
          "DateC",
          "DateA",
          "DateB",
          "ClassB",
          "DescriptionA"
        ],
        "EditorColumnHash": {
          "General": [
            "ClassA",
            "DateC",
            "DateA",
            "DateB",
            "ClassB",
            "DescriptionA",
            "ClassZ",
            "ResultId"
          ]
        },
        "LinkColumns": [
          "DateC",
          "DateA",
          "DateB",
          "ClassB",
          "DescriptionA"
        ],
        "Columns": [
          {
            "ColumnName": "ClassA",
            "LabelText": "店舗名",
            "NoWrap": true
          },
          {
            "ColumnName": "DateA",
            "LabelText": "勤務開始時間",
            "GridFormat": "Ymdahm",
            "EditorFormat": "Ymdhm",
            "NoWrap": true,
            "ValidateRequired": true,
            "DateTimeStep": 1
          },
          {
            "ColumnName": "DateB",
            "LabelText": "勤務終了時間",
            "GridFormat": "Ymdahm",
            "EditorFormat": "Ymdhm",
            "NoWrap": true,
            "ValidateRequired": true,
            "DateTimeStep": 1
          },
          {
            "ColumnName": "ClassB",
            "LabelText": "担当者",
            "ChoicesText": "[[Users]]",
            "NoWrap": true,
            "ValidateRequired": true,
            "SearchType": "PartialMatch"
          },
          {
            "ColumnName": "DescriptionA",
            "LabelText": "自由欄記入",
            "NoWrap": true,
            "AllowImage": false,
            "FieldCss": "field-wide"
          },
          {
            "ColumnName": "DateC",
            "LabelText": "勤務日",
            "NoWrap": true,
            "ValidateRequired": true,
            "DateFilterSetMode": 2
          },
          {
            "ColumnName": "ClassZ",
            "LabelText": "開始～終了期間",
            "ChoicesText": "[[255692]]",
            "Hide": true,
            "Link": true,
            "SearchType": "PartialMatch"
          },
          {
            "ColumnName": "ResultId",
            "Hide": true
          }
        ],
        "Links": [
          {
            "ColumnName": "ClassZ",
            "SiteId": 255692
          }
        ],
        "Styles": [
          {
            "Title": "【表示制御】イベント当日画面スタイル",
            "New": true,
            "Edit": true,
            "Body": "@charset \"UTF-8\";\n\n/* ===================\n    イベント当日画面スタイル\n==================*/\n\n.sdt-event-day {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: #F2F2F2;\n  z-index: 705;\n}\n\n.sdt-event-day-wrap {\n  position: relative;\n  display: block;\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background-color: #F2F2F2;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-event-day-wrap {\n    padding: 15px;\n  }\n}\n\n/* タイトル */\n.sdt-event-day-title {\n  margin: 0 0 20px 0;\n}\n\n.sdt-event-day-title__text {\n  font-weight: bold;\n  font-size: 1.2em;\n  color: #3B3B3B;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-event-day-title {\n    margin: 0 0 15px 0;\n  }\n  .sdt-event-day-title__text {\n    font-size: 1.2em;\n  }\n}\n\n/* イベント情報表示領域 */\n.sdt-event-info {\n  background-color: #fff;\n  border-radius: 10px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-event-info {\n    padding: 15px;\n    margin-bottom: 15px;\n  }\n}\n\n.sdt-event-info__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #E0E0E0;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-event-info__header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n}\n\n.sdt-event-info__title {\n  margin: 0;\n  font-size: 1.1em;\n  font-weight: bold;\n  color: #3B3B3B;\n}\n\n.sdt-event-info__nav {\n  display: flex;\n  gap: 15px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-event-info__nav {\n    gap: 10px;\n    flex-wrap: wrap;\n  }\n}\n\n.sdt-link-button {\n  padding: 8px 16px;\n  background-color: #2F80ED;\n  color: #fff;\n  text-decoration: none;\n  border-radius: 5px;\n  font-size: 14px;\n  transition: opacity 0.2s;\n}\n\n.sdt-link-button:hover {\n  opacity: 0.8;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-link-button {\n    padding: 6px 12px;\n    font-size: 12px;\n  }\n}\n\n.sdt-event-info__body {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.sdt-info-item {\n  display: flex;\n  align-items: baseline;\n  gap: 8px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-info-item {\n    flex-direction: column;\n    gap: 4px;\n  }\n}\n\n.sdt-info-label {\n  font-weight: bold;\n  color: #3B3B3B;\n  min-width: 180px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-info-label {\n    min-width: auto;\n    font-size: 14px;\n  }\n}\n\n.sdt-info-value {\n  color: #3B3B3B;\n}\n\n/* セクション */\n.sdt-section {\n  background-color: #fff;\n  border-radius: 10px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-section {\n    padding: 15px;\n    margin-bottom: 15px;\n  }\n}\n\n.sdt-section__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #E0E0E0;\n  cursor: pointer;\n}\n\n.sdt-section__title {\n  margin: 0;\n  font-size: 1.4em;\n  font-weight: bold;\n  color: #3B3B3B;\n}\n\n.sdt-toggle-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.sdt-toggle-button::before {\n  content: \"\";\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 8px solid #3B3B3B;\n  transition: transform 0.3s ease;\n}\n\n.sdt-toggle-button--collapsed::before {\n  transform: rotate(180deg);\n}\n\n.sdt-section__body {\n  display: block;\n}\n\n/* フォーム */\n.sdt-vip-form, .sdt-work-form {\n  margin-bottom: 20px;\n  padding-left: 20px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-vip-form, .sdt-work-form {\n    margin-bottom: 15px;\n    padding-left: 15px;\n  }\n}\n\n/* 先方（要人）フォーム - 2列レイアウト */\n.sdt-vip-form {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n  margin-bottom: 20px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-vip-form {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n}\n\n.sdt-vip-form-grid {\n  display: contents;\n}\n\n.sdt-vip-form-column {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n/* 先方フォーム：氏名の行にボタンを配置 */\n.sdt-form-row--vip-with-button {\n  display: flex;\n  gap: 5px;\n  align-items: center;\n}\n\n.sdt-button--vip-inline {\n  flex-shrink: 0;\n  margin-left: 10px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-form-row--vip-with-button {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  .sdt-button--vip-inline {\n    margin-left: 0;\n    width: 100%;\n  }\n}\n\n.sdt-form-row {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 15px;\n  align-items: center;\n}\n\n/* 先方フォーム内の行のスペースを狭く */\n.sdt-vip-form .sdt-form-row {\n  gap: 5px;\n}\n\n.sdt-form-row .sdt-form-label {\n  min-width: 120px;\n  flex-shrink: 0;\n}\n\n/* 先方フォーム内のラベル幅を狭く */\n.sdt-vip-form .sdt-form-row .sdt-form-label {\n  min-width: 40px;\n}\n\n.sdt-form-row--with-right-button {\n  display: grid;\n  grid-template-columns: 120px 1fr auto;\n  gap: 20px;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.sdt-button--form-inline {\n  align-self: flex-end;\n  margin-bottom: 0;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-form-row {\n    flex-direction: column;\n    gap: 15px;\n  }\n  .sdt-vip-form .sdt-form-row {\n    gap: 5px;\n  }\n  .sdt-form-row--with-button {\n    flex-direction: column;\n  }\n  .sdt-form-row--work {\n    flex-direction: column;\n  }\n  .sdt-form-row--with-right-button {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n  .sdt-button--form-inline {\n    align-self: center;\n  }\n  .sdt-form-box--button {\n    min-width: 100%;\n  }\n}\n\n.sdt-form-box {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.sdt-form-box .sdt-form-label {\n  min-width: 60px;\n  flex-shrink: 0;\n}\n\n.sdt-form-box--wide {\n  flex: 2;\n}\n\n.sdt-form-box--button {\n  flex: 0 0 auto;\n  min-width: 140px;\n}\n\n.sdt-form-label {\n  font-weight: bold;\n  color: #3B3B3B;\n  font-size: 14px;\n}\n\n.sdt-form-label--required::after {\n  content: \"*\";\n  color: #E80000;\n  margin-left: 4px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-form-label {\n    font-size: 13px;\n  }\n}\n\n.sdt-input {\n  width: 100%;\n  max-width: 300px;\n  height: 35px;\n  padding: 0 12px;\n  border-radius: 5px;\n  border: none;\n  box-shadow: 0 0 0 1px #78818F inset;\n  font-size: 14px;\n  background-color: #fff;\n}\n\n.sdt-input:focus {\n  outline: 0;\n  box-shadow: 0 0 0 2px #2F80ED inset;\n}\n\n.sdt-input--date, .sdt-input--time {\n  max-width: 180px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-input {\n    height: 32px;\n    padding: 0 10px;\n    font-size: 13px;\n  }\n  .sdt-input--date, .sdt-input--time {\n    max-width: 100%;\n  }\n}\n\n.sdt-selector-content {\n  width: 100%;\n  max-width: 180px;\n  height: 35px;\n  padding: 0 12px;\n  border-radius: 5px;\n  border: none;\n  box-shadow: 0 0 0 1px #78818F inset;\n  font-size: 14px;\n  background-color: #fff;\n  cursor: pointer;\n}\n\n.sdt-selector-content:focus {\n  outline: 0;\n  box-shadow: 0 0 0 2px #2F80ED inset;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-selector-content {\n    height: 32px;\n    padding: 0 10px;\n    font-size: 13px;\n  }\n}\n\n.sdt-textarea {\n  width: 100%;\n  max-width: 360px;\n  padding: 10px 12px;\n  border-radius: 5px;\n  border: none;\n  box-shadow: 0 0 0 1px #78818F inset;\n  font-size: 14px;\n  background-color: #fff;\n  font-family: inherit;\n  resize: vertical;\n}\n\n.sdt-textarea:focus {\n  outline: 0;\n  box-shadow: 0 0 0 2px #2F80ED inset;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-textarea {\n    padding: 8px 10px;\n    font-size: 13px;\n  }\n}\n\n.sdt-form-button-area {\n  display: flex;\n  justify-content: center;\n  margin-top: 15px;\n}\n\n/* テーブル */\n.sdt-vip-table, .sdt-work-table {\n  overflow-x: auto;\n  border-radius: 8px;\n  border: 1px solid #C4C9D0;\n  background-color: #fff;\n}\n\n.sdt-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.sdt-table__head {\n  background-color: #F8F9FA;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n\n.sdt-table__row {\n  border-bottom: 1px solid #E0E0E0;\n}\n\n.sdt-table__cell {\n  padding: 12px;\n  text-align: left;\n  vertical-align: middle;\n  color: #3B3B3B;\n}\n\n.sdt-table__cell-head {\n  font-weight: bold;\n  background-color: #F8F9FA;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-table__cell {\n    padding: 10px 8px;\n    font-size: 13px;\n  }\n}\n\n/* ボタン */\n.sdt-button {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 120px;\n  height: 40px;\n  padding: 10px 20px;\n  border-radius: 8px;\n  border: none;\n  cursor: pointer;\n  transition: opacity 0.2s;\n  font-size: 14px;\n}\n\n.sdt-button:hover {\n  opacity: 0.8;\n}\n\n.sdt-button--primary {\n  background-color: #2F80ED;\n  color: #fff;\n}\n\n.sdt-button--secondary {\n  background-color: #f8f8f8;\n  border: 1px solid #C4C9D0;\n  color: #3B3B3B;\n}\n\n.sdt-button--danger {\n  background-color: #E80000;\n  color: #fff;\n}\n\n.sdt-button--small {\n  min-width: 60px;\n  height: 32px;\n  padding: 6px 12px;\n  font-size: 13px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-button {\n    min-width: 100px;\n    height: 36px;\n    padding: 8px 16px;\n    font-size: 13px;\n  }\n  .sdt-button--small {\n    min-width: 50px;\n    height: 28px;\n    padding: 4px 10px;\n    font-size: 12px;\n  }\n}\n\n.sdt-button__text {\n  font-weight: bold;\n}\n\n/* モーダル */\n.sdt-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sdt-modal__overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.sdt-modal__content {\n  position: relative;\n  background-color: #fff;\n  border-radius: 10px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  width: 90%;\n  max-width: 500px;\n  max-height: 90vh;\n  overflow: auto;\n}\n\n.sdt-modal__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid #E0E0E0;\n}\n\n.sdt-modal__title {\n  margin: 0;\n  font-size: 1.1em;\n  font-weight: bold;\n  color: #3B3B3B;\n}\n\n.sdt-modal__close {\n  background: none;\n  border: none;\n  font-size: 24px;\n  color: #78818F;\n  cursor: pointer;\n  padding: 0;\n  line-height: 1;\n}\n\n.sdt-modal__close:hover {\n  color: #3B3B3B;\n}\n\n.sdt-modal__body {\n  padding: 20px;\n}\n\n.sdt-modal__footer {\n  display: flex;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 16px 20px;\n  border-top: 1px solid #E0E0E0;\n}\n\n.sdt-modal-form__row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n\n.sdt-modal-form__row:last-child {\n  margin-bottom: 0;\n}\n\n.sdt-modal-form__label {\n  min-width: 100px;\n  font-weight: bold;\n  color: #3B3B3B;\n  font-size: 14px;\n  flex-shrink: 0;\n}\n\n.sdt-modal-form__label--required::after {\n  content: \"*\";\n  color: #E80000;\n  margin-left: 4px;\n}\n\n@media screen and (max-width: 760px) {\n  .sdt-modal__content {\n    width: 95%;\n    max-height: 85vh;\n  }\n\n  .sdt-modal__header {\n    padding: 12px 16px;\n  }\n\n  .sdt-modal__body {\n    padding: 16px;\n  }\n\n  .sdt-modal__footer {\n    padding: 12px 16px;\n    flex-direction: column;\n  }\n\n  .sdt-modal-form__row {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 6px;\n  }\n\n  .sdt-modal-form__label {\n    min-width: auto;\n  }\n}\n",
            "Id": 1
          },
          {
            "Title": "【表示制御】プリザンター表示合わせ調整スタイル",
            "New": true,
            "Edit": true,
            "Body": ".sdt-event-day .sdt-event-day-wrap {\n  background-color: #fff;\n  border: 1px solid #d19405;\n  background: #feeebd url(../../styles/plugins/themes/sunny/images/ui-bg_highlight-soft_100_feeebd_1x100.png) 50% top repeat-x;\n  border-radius: 10px;\n  overflow: auto;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-event-day-title {\n  margin: 0;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-event-day-title__text {\n  font-size: 20px;\n  font-weight: bold;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-section {\n  background-color: initial;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-event-info {\n  background-color: initial;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-vip-table, .sdt-event-day .sdt-event-day-wrap .sdt-work-table {\n  margin-top: 0;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-vip-table .sdt-table__head, .sdt-event-day .sdt-event-day-wrap .sdt-work-table .sdt-table__head {\n  top: -5px;\n  margin-top: -5px;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-vip-table .sdt-table__head .sdt-table__row, .sdt-event-day .sdt-event-day-wrap .sdt-work-table .sdt-table__head .sdt-table__row {\n  border: 1px solid #494437;\n  background: #817865 url(../../styles/plugins/themes/sunny/images/ui-bg_gloss-wave_45_817865_500x100.png) 50% 50% repeat-x;\n  color: #fff;\n  font-weight: bold;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-vip-table .sdt-table__head .sdt-table__row .sdt-table__cell-head, .sdt-event-day .sdt-event-day-wrap .sdt-work-table .sdt-table__head .sdt-table__row .sdt-table__cell-head {\n  height: 42px;\n  padding: 6px;\n  border-top: solid 1px transparent;\n  border-bottom: solid 1px transparent;\n  border-left: solid 1px transparent;\n  border-right: solid 1px #fff;\n  background-color: initial;\n  text-align: left;\n  color: #fff;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-vip-table .sdt-table__body .sdt-table__row, .sdt-event-day .sdt-event-day-wrap .sdt-work-table .sdt-table__body .sdt-table__row {\n  border: solid 1px #c0c0c0;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-vip-table .sdt-table__body .sdt-table__row .sdt-table__cell, .sdt-event-day .sdt-event-day-wrap .sdt-work-table .sdt-table__body .sdt-table__row .sdt-table__cell {\n  border-bottom: solid 1px #c0c0c0;\n  border-left: dotted 1px #c0c0c0;\n  border-right: dotted 1px #c0c0c0;\n  text-align: left;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-form-label, .sdt-event-day .sdt-event-day-wrap .sdt-input, .sdt-event-day .sdt-event-day-wrap .sdt-selector-content {\n  font-size: 12px;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-link-button {\n  height: auto;\n  min-width: 80px;\n  padding: 4px 5px 6px 5px;\n  border: 1px solid #d19405;\n  background: #fece2f url(../../styles/plugins/themes/sunny/images/ui-bg_gloss-wave_60_fece2f_500x100.png) 50% 50% repeat-x;\n  font-size: 12px;\n  color: #333;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-button {\n  height: auto;\n  padding: 4px 5px 6px 5px;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-button.sdt-button--primary {\n  border: 1px solid #d19405;\n  background: #fece2f url(../../styles/plugins/themes/sunny/images/ui-bg_gloss-wave_60_fece2f_500x100.png) 50% 50% repeat-x;\n}\n.sdt-event-day .sdt-event-day-wrap .sdt-button.sdt-button--primary .sdt-button__text {\n  font-size: 12px;\n  font-weight: normal;\n  color: #333;\n}",
            "Id": 2
          },
          {
            "Title": "【画面制御】管理タブ非表示化",
            "All": true,
            "Body": "#NavigationMenu>li#SettingsMenuContainer{\n    display: none;\n}",
            "Id": 3
          }
        ],
        "Scripts": [
          {
            "Title": "【設定】サイトID",
            "All": true,
            "Body": "  /* ========================================\n   * 定数・変数\n   * ======================================== */\n  var EVENT_DAY_SITE_ID = 255689;         // イベント当日\n  var PERIOD_SITE_ID = 255692;            // 開始～終了期間\n  var EVENT_LIST_SITE_ID = 255671;        // イベント予定一覧\n  var EVENT_OPEN_LIST_SITE_ID = 255695;   // 開催イベント一覧\n  var VIP_SITE_ID = 255684;               // 先方（要人）テーブル\n  var STAFF_DEPT_ID = 208;                // アウトシステムズ開発の部署ID（組織）\nconst adminListsID = 255655;  // 管理者",
            "Id": 1
          },
          {
            "Title": "【設定】グローバル変数定義",
            "All": true,
            "Body": "// デバッグON/OFF（グローバル）\nwindow.force = false; // true or false  falseにするとログは出ない\n\n  // テーブル・カラム定義\n  var TABLES = {\n    // イベント当日テーブル\n    EVENT_DAY: {\n      SITE_ID: EVENT_DAY_SITE_ID,\n      COLUMNS: {\n        SHOP_NAME: 'ClassA',           // 店舗名\n        STAFF: 'ClassB',               // 担当者（リンク項目）\n        FREE_TEXT: 'DescriptionA',     // 自由欄記入\n        WORK_DATE: 'DateC',            // 勤務日\n        WORK_START: 'DateA',           // 勤務開始時間\n        WORK_END: 'DateB',             // 勤務終了時間\n        PERIOD_ID: 'ClassZ'            // 開始～終了期間（リンク項目）\n      }\n    },\n    // 開始～終了期間テーブル\n    PERIOD: {\n      SITE_ID: PERIOD_SITE_ID,\n      COLUMNS: {\n        NAME: 'ClassA',                // 店舗名\n        EVENT_ID: 'ClassB',            // イベントID（LinkId）\n        START_DATE: 'DateA',           // 開始日\n        END_DATE: 'DateB'              // 終了日\n      }\n    },\n    // イベント予定一覧テーブル\n    EVENT_LIST: {\n      SITE_ID: EVENT_LIST_SITE_ID,\n      COLUMNS: {\n        CATEGORY: 'ClassA',            // カテゴリー\n        EVENT_NAME: 'ClassB',          // イベント名・出店名\n        ORGANIZER: 'ClassC',           // 開催者or依頼主\n        AREA: 'ClassF',                // 開催エリア\n        AREA_DETAIL: 'DescriptionB'    // 開催エリア詳細\n      }\n    },\n    // 先方（要人）テーブル\n    VIP: {\n      SITE_ID: VIP_SITE_ID,\n      COLUMNS: {\n        SHOP_NAME: 'ClassA',           // 店舗名\n        COMPANY: 'ClassB',             // 会社\n        DEPT: 'ClassC',                // 部署\n        POSITION: 'ClassD',            // 役職\n        NAME: 'ClassE',                // 氏名\n        EVENT_ID: 'ClassF',            // イベントID（リンク項目）\n        EVENT_SHOP_ID: 'ClassY'        // イベント店舗ID（開始～終了期間のID）\n      }\n    }\n  };\n",
            "Id": 7
          },
          {
            "Title": "【画面制御】管理者専用表示　管理タブの表示",
            "All": true,
            "Body": "(function (document, $, $p) {\n    \"use strict\";\n\n    // =====================================================\n    // Pleasanter 用スクリプト（IIFE 内に完全カプセル化）\n    // - 表示（画面読み込み）時とレコード更新時に動作する\n    // - 既存の $p.events ハンドラがあれば保持して併用\n    // =====================================================\n\n    // 既存ハンドラを破壊せず安全に追加するユーティリティ\n    function bindPEventSafe(eventName, handler) {\n        try {\n            if (!$p || !$p.events) {\n                window.force && console.warn(\"bindPEventSafe: $p.events が存在しません。イベント登録をスキップします。\");\n                return;\n            }\n\n            var prev = $p.events[eventName];\n\n            $p.events[eventName] = function () {\n                var args = arguments;\n\n                // 既存ハンドラがあれば先に呼ぶ（安全に）\n                if (typeof prev === \"function\") {\n                    try { prev.apply(this, args); } catch (e) { window.force && console.warn(\"既存ハンドラ実行中のエラー:\", e); }\n                }\n\n                // 今回の処理を実行（失敗しても影響を最小化）\n                try { handler.apply(this, args); } catch (e) { window.force && console.error(\"バインドされた handler 実行中のエラー:\", e); }\n            };\n        } catch (e) {\n            window.force && console.warn(\"bindPEventSafe error:\", e);\n        }\n    }\n\n    // =====================================================\n    // 関数群（1タスク = 1関数）\n    // =====================================================\n\n    // オーケストレーション（取得→解析→比較→描画）\n    function sdtWrappedShowSettingsIndex() {\n        var deferred = $.Deferred();\n\n        try {\n            var loginId = getCurrentLoginId();\n            var fetchPromise = fetchSystemAdministratorsView();\n\n            $.when(fetchPromise)\n                .done(function (rawData) {\n                    var adminArray = normalizeUserArray(rawData);\n                    var isAdmin = isLoginInAdminList(loginId, adminArray);\n\n                    if (isAdmin) {\n                        showSettingsMenuIfHidden();\n                    }\n\n                    deferred.resolve(isAdmin);\n                })\n                .fail(function (err) {\n                    window.force && console.warn(\"fetchSystemAdministratorsView failed:\", err);\n                    deferred.reject(err);\n                });\n        } catch (e) {\n            window.force && console.error(\"sdtWrappedShowSettingsIndex error:\", e);\n            deferred.reject(e);\n        }\n\n        return deferred.promise();\n    }\n\n    // ログイン ID 取得（取得だけ）\n    function getCurrentLoginId() {\n        try {\n            if (typeof $p.loginId === \"function\") {\n                return $p.loginId();\n            }\n            if (typeof $p.userInfo === \"function\") {\n                var ui = $p.userInfo() || {};\n                return ui.Id || ui.id || ui.LoginId || ui.loginId || null;\n            }\n        } catch (e) {\n            window.force && console.warn(\"getCurrentLoginId error:\", e);\n        }\n        return null;\n    }\n\n    // 管理者リストを API から取得（取得だけ）\n    function fetchSystemAdministratorsView() {\n        var deferred = $.Deferred();\n\n        try {\n            $p.apiGet({\n                id: adminListsID ,\n                data: {\n                    View: {\n                        ApiDataType: \"KeyValues\",\n                        GridColumns: [\"ClassA\"] // 必要に応じて変更\n                    }\n                },\n                done: function (data) { deferred.resolve(data); },\n                fail: function (err) { deferred.reject(err); }\n            });\n        } catch (e) {\n            deferred.reject(e);\n        }\n\n        return deferred.promise();\n    }\n\n    // rawData を配列に正規化（解析だけ）\n    function normalizeUserArray(rawData) {\n        if (!rawData || typeof rawData !== \"object\") return [];\n        var list = (rawData.Response && rawData.Response.Data) || rawData.Data || rawData.Items || [];\n        return Array.isArray(list) ? list : [];\n    }\n\n    // 判定：ログイン ID が 管理者配列 に含まれているか（比較だけ）\n    function isLoginInAdminList(loginId, adminArray) {\n        if (!loginId) return false;\n        if (!Array.isArray(adminArray)) return false;\n\n        return adminArray.some(function (item) {\n            if (!item) return false;\n            var username = item.Username || item.username || item.UserName || item.User || item.LoginId || item.loginId || null;\n            return username === loginId;\n        });\n    }\n\n    // 描画 / 副作用（表示だけ）\n    function showSettingsMenuIfHidden() {\n        try {\n            var $el = $(\"#SettingsMenuContainer\");\n\n            if (!$el || $el.length === 0) {\n                window.force && console.info(\"showSettingsMenuIfHidden: #SettingsMenuContainer が見つかりません。\");\n                return;\n            }\n\n            if (!$el.is(\":visible\")) {\n                $el.show();\n                window.force && console.info(\"showSettingsMenuIfHidden: 設定メニューを表示しました。\");\n            } else {\n                window.force && console.info(\"showSettingsMenuIfHidden: 既に表示されています。\");\n            }\n        } catch (e) {\n            window.force && console.warn(\"showSettingsMenuIfHidden error:\", e);\n        }\n    }\n\n    // =====================================================\n    // トリガー登録（画面読み込み時 + レコード更新時）\n    // - on_grid_load / on_view_load を追随して登録\n    // - レコード更新時に動くよう after_set / on_form_save も登録\n    // =====================================================\n    try {\n        bindPEventSafe(\"on_grid_load\", function () {\n            sdtWrappedShowSettingsIndex().fail(function () {\n                window.force && console.info(\"sdtWrappedShowSettingsIndex: on_grid_load 実行中にエラーが発生しました。\");\n            });\n        });\n\n        bindPEventSafe(\"on_view_load\", function () {\n            sdtWrappedShowSettingsIndex().fail(function () {\n                window.force && console.info(\"sdtWrappedShowSettingsIndex: on_view_load 実行中にエラーが発生しました。\");\n            });\n        });\n\n        // レコード取得・保存後に動くイベント（これを追加）\n        bindPEventSafe(\"after_set\", function () {\n            sdtWrappedShowSettingsIndex().fail(function () {\n                window.force && console.info(\"sdtWrappedShowSettingsIndex: after_set 実行中にエラーが発生しました。\");\n            });\n        });\n\n        // フォーム保存時のイベント（存在すれば確実にトリガー）\n        if ($p && $p.events && (\"on_form_save\" in $p.events)) {\n            bindPEventSafe(\"on_form_save\", function () {\n                sdtWrappedShowSettingsIndex().fail(function () {\n                    window.force && console.info(\"sdtWrappedShowSettingsIndex: on_form_save 実行中にエラーが発生しました。\");\n                });\n            });\n        }\n    } catch (e) {\n        window.force && console.warn(\"トリガー登録時のエラー:\", e);\n    }\n\n    // ドキュメント読み込み完了時に一度だけ実行（画面読み込み時）\n    try {\n        $(document).ready(function () {\n            sdtWrappedShowSettingsIndex().fail(function () {\n                window.force && console.info(\"sdtWrappedShowSettingsIndex: document.ready 実行中にエラーが発生しました。\");\n            });\n        });\n    } catch (e) {\n        window.force && console.warn(\"初期実行時のエラー:\", e);\n    }\n\n    // モジュール完了（グローバルへの汚染なし）\n})(document, jQuery, $p);\n",
            "Id": 8
          },
          {
            "Title": "【共通処理】PleasanterAPI",
            "All": true,
            "Body": "/**\n * Pleasanter API ユーティリティクラス（バニラJS版）\n * Python FastAPI の pleasanter/service.py を JavaScript に移植\n */\n\n/**\n * 定数\n */\nconst EMPTY_DATE = '1899-12-30T00:00:00';\nconst PAGE_SIZE = 200;\n\n/**\n * Pleasanter API クライアント\n */\nclass PleasanterAPI {\n  /**\n   * @param {string} baseUrl - PleasanterのベースURL (例: location.origin)\n   * @param {Object} options - オプション\n   * @param {string} [options.apiKey] - APIキー（認証が必要な場合）\n   * @param {string} [options.apiVersion] - APIバージョン（デフォルト: 1.1）\n   * @param {boolean} [options.logging] - ログ出力（デフォルト: false）\n   */\n  constructor(baseUrl, options = {}) {\n    if (!baseUrl) throw new Error('baseUrl は必須です');\n\n    this.baseUrl = baseUrl;\n    this.apiKey = options.apiKey || null;\n    this.apiVersion = options.apiVersion || 1.1;\n    this.logging = options.logging === true;\n  }\n\n  /**\n   * 基本リクエストボディ\n   * @private\n   */\n  _baseBody() {\n    const body = { ApiVersion: this.apiVersion };\n    if (this.apiKey) {\n      body.ApiKey = this.apiKey;\n    }\n    return body;\n  }\n\n  /**\n   * update_dict を 5 つのハッシュに分類\n   * @private\n   */\n  _splitHash(update) {\n    const classHash = {};\n    const numHash = {};\n    const dateHash = {};\n    const descriptionHash = {};\n    const checkHash = {};\n    const other = {};\n\n    for (const [k, v] of Object.entries(update)) {\n      if (k.includes('Class')) {\n        classHash[k] = v;\n      } else if (k.includes('Num')) {\n        numHash[k] = v;\n      } else if (k.includes('Date')) {\n        dateHash[k] = v || EMPTY_DATE;\n      } else if (k.includes('Description')) {\n        descriptionHash[k] = v;\n      } else if (k.includes('Check')) {\n        checkHash[k] = v;\n      } else {\n        other[k] = v;\n      }\n    }\n\n    return {\n      ClassHash: classHash,\n      NumHash: numHash,\n      DateHash: dateHash,\n      DescriptionHash: descriptionHash,\n      CheckHash: checkHash,\n      ...other,\n    };\n  }\n\n  /**\n   * View セクション構築\n   * @private\n   */\n  _buildView(columns, options = {}) {\n    const { setLabelText = true, setDisplayValue = 'DisplayValue' } = options;\n\n    const cols = columns || ['ClassA', 'NumA'];\n\n    return {\n      ApiDataType: 'KeyValues',\n      ApiColumnKeyDisplayType: setLabelText ? 'LabelText' : 'ColumnName',\n      ApiColumnValueDisplayType: setDisplayValue,\n      GridColumns: cols,\n    };\n  }\n\n  /**\n   * HTTP POST リクエスト送信\n   * @private\n   */\n  async _request(endpoint, body, options = {}) {\n    const { ignoreErrors = false } = options;\n\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    try {\n      const res = await fetch(`${this.baseUrl}${endpoint}`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(body),\n      });\n\n      if (!res.ok) {\n        if (ignoreErrors) {\n          console.error(`Pleasanter API Error: ${res.status}`);\n          return null;\n        }\n        throw new Error(`HTTP Error: ${res.status} ${res.statusText}`);\n      }\n\n      const data = await res.json();\n      return data;\n    } catch (error) {\n      if (ignoreErrors) {\n        console.error('Pleasanter API Request Failed:', error);\n        return null;\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * 単一レコード取得\n   * @param {number|string} recordId - レコードID\n   * @param {Object} [options] - オプション\n   * @param {string[]} [options.columns] - 取得するカラム\n   * @param {boolean} [options.setLabelText] - カラムキーをラベル名で表示（デフォルト: true）\n   * @param {'DisplayValue'|'Value'|'Both'} [options.setDisplayValue] - 値の表示形式（デフォルト: 'DisplayValue'）\n   * @param {boolean} [options.ignoreErrors] - エラーを無視（デフォルト: false）\n   * @returns {Promise<Object>} レコードデータ\n   */\n  async getRecord(recordId, options = {}) {\n    if (!recordId) throw new Error('recordId は必須です');\n\n    const {\n      columns = null,\n      setLabelText = true,\n      setDisplayValue = 'DisplayValue',\n      ignoreErrors = false,\n    } = options;\n\n    if (setDisplayValue === 'Both') {\n      // DisplayValueとValueの両方を取得してマージ\n      const displayRecord = await this.getRecord(recordId, {\n        ...options,\n        setDisplayValue: 'DisplayValue',\n      });\n      const valueRecord = await this.getRecord(recordId, {\n        ...options,\n        setDisplayValue: 'Value',\n      });\n\n      // マージ\n      const merged = {};\n      for (const key of Object.keys(displayRecord)) {\n        merged[key] = {\n          Display: displayRecord[key],\n          Value: valueRecord[key],\n        };\n      }\n      return merged;\n    }\n\n    // 単一形式で取得\n    const view = this._buildView(columns, { setLabelText, setDisplayValue });\n    const body = { ...this._baseBody(), View: view };\n\n    const resp = await this._request(`/api/items/${recordId}/get`, body, { ignoreErrors });\n\n    if (!resp) {\n      return {};\n    }\n\n    return resp.Response?.Data?.[0] || {};\n  }\n\n  /**\n   * レコード一覧取得（ページネーション対応・全件取得）\n   * @param {number|string} tableId - テーブル（サイト）ID\n   * @param {Object} [options] - オプション\n   * @param {string[]} [options.columns] - 取得するカラム\n   * @param {boolean} [options.setLabelText] - カラムキーをラベル名で表示（デフォルト: true）\n   * @param {'DisplayValue'|'Value'|'Both'} [options.setDisplayValue] - 値の表示形式（デフォルト: 'DisplayValue'）\n   * @param {boolean} [options.ignoreErrors] - エラーを無視（デフォルト: false）\n   * @returns {Promise<Object[]>} レコード配列\n   */\n  async getRecords(tableId, options = {}) {\n    if (!tableId) throw new Error('tableId は必須です');\n\n    const {\n      columns = null,\n      setLabelText = true,\n      setDisplayValue = 'DisplayValue',\n      ignoreErrors = false,\n    } = options;\n\n    if (setDisplayValue === 'Both') {\n      // DisplayValueとValueの両方を取得してマージ\n      const displayRecords = await this.getRecords(tableId, {\n        ...options,\n        setDisplayValue: 'DisplayValue',\n      });\n      const valueRecords = await this.getRecords(tableId, {\n        ...options,\n        setDisplayValue: 'Value',\n      });\n\n      // マージ\n      const merged = displayRecords.map((displayRec, index) => {\n        const valueRec = valueRecords[index];\n        const mergedRec = {};\n        for (const key of Object.keys(displayRec)) {\n          mergedRec[key] = {\n            Display: displayRec[key],\n            Value: valueRec[key],\n          };\n        }\n        return mergedRec;\n      });\n\n      if (this.logging) {\n        console.log(`テーブル(${this.baseUrl}/items/${tableId}/index)から ${merged.length} 件取得しました(Both形式)`);\n        console.table(merged);\n      }\n      return merged;\n    }\n\n    // 単一形式で取得（ページネーション対応）\n    const view = this._buildView(columns, { setLabelText, setDisplayValue });\n    const records = [];\n    let offset = 0;\n\n    while (true) {\n      const body = {\n        ...this._baseBody(),\n        Offset: offset,\n        PageSize: PAGE_SIZE,\n        View: view,\n      };\n\n      const resp = await this._request(`/api/items/${tableId}/get`, body, { ignoreErrors });\n\n      if (!resp) {\n        break;\n      }\n\n      const page = resp.Response?.Data || [];\n      records.push(...page);\n\n      if (page.length < PAGE_SIZE) {\n        break;\n      }\n\n      offset += PAGE_SIZE;\n    }\n\n    if (this.logging) {\n      console.log(`テーブル(${this.baseUrl}/items/${tableId}/index)から ${records.length} 件取得しました`);\n      console.table(records);\n    }\n    return records;\n  }\n\n  /**\n   * レコード作成\n   * @param {number|string} tableId - テーブル（サイト）ID\n   * @param {Object} createData - 作成するレコードデータ\n   * @returns {Promise<Object>} 作成結果\n   */\n  async createRecord(tableId, createData = {}) {\n    if (!tableId) throw new Error('tableId は必須です');\n    if (!createData || Object.keys(createData).length === 0) {\n      throw new Error('createData は必須です');\n    }\n\n    const payload = {\n      ...this._baseBody(),\n      ...this._splitHash(createData),\n    };\n\n    const data = await this._request(`/api/items/${tableId}/create`, payload);\n\n    if (!data) {\n      return {};\n    }\n\n    if (this.logging) {\n      console.log('登録内容:', data);\n    }\n    return data;\n  }\n\n  /**\n   * レコード更新\n   * @param {number|string} recordId - 更新するレコードID\n   * @param {Object} updateData - 更新データ\n   * @returns {Promise<Object>} 更新結果\n   */\n  async updateRecord(recordId, updateData = {}) {\n    if (!recordId) throw new Error('recordId は必須です');\n    if (!updateData || Object.keys(updateData).length === 0) {\n      throw new Error('updateData は必須です');\n    }\n\n    const payload = {\n      ...this._baseBody(),\n      ...this._splitHash(updateData),\n    };\n\n    const data = await this._request(`/api/items/${recordId}/update`, payload);\n\n    if (!data) {\n      return {};\n    }\n\n    if (this.logging) {\n      console.log('更新内容:', data);\n    }\n    return data;\n  }\n\n  /**\n   * レコード削除\n   * @param {number|string} recordId - 削除するレコードID\n   * @returns {Promise<Object>} 削除結果\n   */\n  async deleteRecord(recordId) {\n    if (!recordId) throw new Error('recordId は必須です');\n\n    const payload = this._baseBody();\n\n    const data = await this._request(`/api/items/${recordId}/delete`, payload);\n\n    if (!data) {\n      return {};\n    }\n\n    if (this.logging) {\n      console.log(`削除完了: レコードID ${recordId}`);\n    }\n    return data;\n  }\n\n  /**\n   * ユーザー一覧取得\n   * @param {Object} [options] - オプション\n   * @param {number[]} [options.userIds] - 特定のユーザーIDで絞り込み（例: [11, 12]）\n   * @param {number[]} [options.deptIds] - 部署IDで絞り込み（例: [7, 8]）\n   * @param {number[]} [options.groups] - グループIDで絞り込み（例: [1, 2]）\n   * @param {boolean} [options.ignoreErrors] - エラーを無視（デフォルト: false）\n   * @returns {Promise<Object[]>} ユーザー配列\n   */\n  async getUsers(options = {}) {\n    const {\n      userIds = null,\n      deptIds = null,\n      groups = null,\n      ignoreErrors = false,\n    } = options;\n\n    const body = { ...this._baseBody() };\n\n    // フィルター条件があれば追加\n    if (userIds || deptIds || groups) {\n      const columnFilterHash = {};\n      if (userIds) {\n        columnFilterHash.UserId = JSON.stringify(userIds);\n      }\n      if (deptIds) {\n        columnFilterHash.DeptId = JSON.stringify(deptIds);\n      }\n      if (groups) {\n        columnFilterHash.Groups = JSON.stringify(groups);\n      }\n\n      body.View = {\n        ColumnFilterHash: columnFilterHash,\n      };\n    }\n\n    const resp = await this._request('/api/users/get', body, { ignoreErrors });\n\n    if (!resp) {\n      return [];\n    }\n\n    const users = resp.Response?.Data || [];\n\n    if (this.logging) {\n      console.log(`ユーザー ${users.length} 件取得しました`);\n      console.table(users);\n    }\n\n    return users;\n  }\n}\n\n/* ========= 使用例 ========= */\n/*\nconst siteId = 24;  // 対象サイトのID\nconst api = new PleasanterAPI(location.origin, {\n  apiKey: 'your-api-key',  // 認証が必要な場合\n  logging: true,           // ログ出力\n});\n\n// レコード一覧取得（全件・ページネーション対応）\nconst records = await api.getRecords(siteId, {\n  columns: ['ResultId', 'Title', 'Body', 'UpdatedTime'],\n  setLabelText: true,\n  setDisplayValue: 'DisplayValue',  // 'DisplayValue' | 'Value' | 'Both'\n});\nconsole.table(records);\n\n// 単一レコード取得\nconst record = await api.getRecord(123, {\n  columns: ['Title', 'Body'],\n  setDisplayValue: 'Both',  // DisplayとValue両方取得\n});\nconsole.log(record);\n\n// レコード作成（ClassA, NumB などは自動分類される）\nconst created = await api.createRecord(siteId, {\n  Title: '新規タイトル',\n  ClassA: '分類A',\n  NumA: 100,\n  DateA: '2025-01-01',\n  CheckA: true,\n});\nconsole.log(created);\n\n// レコード更新\nconst updated = await api.updateRecord(123, {\n  Title: '更新後タイトル',\n  ClassB: '分類B更新',\n});\nconsole.log(updated);\n\n// レコード削除\nconst deleted = await api.deleteRecord(123);\nconsole.log(deleted);\n*/\n",
            "Id": 2
          },
          {
            "Title": "【初期処理】新規作成ボタンの除去",
            "All": true,
            "Body": "document.getElementById(\"NewMenuContainer\").remove()",
            "Id": 6
          },
          {
            "Title": "【画面作成】イベント当日初期表示",
            "New": true,
            "Edit": true,
            "Body": "(function ($) {\n  'use strict';\n\n  /************************************************************************\n   * 画面読み込み時に一度だけ実行する初期表示処理\n   *\n   * 目的：\n   *  - イベント情報を開始～終了期間とイベント予定一覧から取得\n   *  - 担当者プルダウンを初期化\n   *  - 先方テーブルと勤務登録テーブルを初期化\n   ************************************************************************/\n\n  // グローバル変数\n  window.periodRecord = null;      // 開始～終了期間レコード\n  window.eventRecord = null;       // イベント予定一覧レコード\n  window.eventShopId = null;       // イベント店舗ID（開始～終了期間のID）\n  window.eventId = null;           // イベントID\n  window.siblingRecords = [];      // 兄弟レコード（同日付・同イベント店舗ID）\n\n  /* ========================================\n   * レイアウト関連\n   * ======================================== */\n\n  /**\n   * getHeaderHeight\n   * - #Header 要素の「見た目の高さ」および .both.cf 要素の高さをピクセル単位で合算し、\n   *   さらに 10px を加えた合計を返します。\n   * - 要素が見つからなければ 0 を返します。\n   */\n  function getHeaderHeight() {\n    var $header = $('#Header');\n\n    var headerHeight = 0;\n    if ($header.length !== 0) {\n      var rect = $header[0].getBoundingClientRect();\n      headerHeight = Math.round(rect.height || 0);\n      if (headerHeight < 0) {\n        headerHeight = 0;\n      }\n    }\n\n    // .both.cf 要素の高さを取得（パンくず・更新者エリア）\n    var bothHeight = 0;\n    var $both = $('.both.cf');\n    if ($both.length !== 0) {\n      try {\n        var bothRect = $both[0].getBoundingClientRect();\n        bothHeight = Math.round(bothRect.height || 0);\n        if (bothHeight < 0) {\n          bothHeight = 0;\n        }\n      } catch (e) {\n        bothHeight = 0;\n        window.force && console.error('.both.cf height read error', e);\n      }\n    }\n\n    // 合計に 10px を上乗せする\n    var total = headerHeight + bothHeight + 10;\n\n    return (total > 0) ? total : 0;\n  }\n\n  /**\n   * buildCalcHeightCss\n   * - ヘッダーのピクセル値を受け取り、CSS の calc() 文字列を返します。\n   */\n  function buildCalcHeightCss(px) {\n    var n = (typeof px === 'number' && !isNaN(px)) ? px : 0;\n    return 'calc(100% - ' + String(n) + 'px)';\n  }\n\n  /**\n   * applyEventDayLayout\n   * - 実際に DOM に対して style を当てる関数\n   */\n  function applyEventDayLayout(headerHeightPx) {\n    var $target = $('#fn-event-day');\n    if ($target.length === 0) {\n      return;\n    }\n    $target.css('top', String(headerHeightPx) + 'px');\n    $target.css('height', buildCalcHeightCss(headerHeightPx));\n  }\n\n  /**\n   * initEventDayLayout\n   * - レイアウト初期化\n   */\n  function initEventDayLayout() {\n    var headerH = getHeaderHeight();\n    applyEventDayLayout(headerH);\n  }\n\n  /* ========================================\n   * URLパラメータ取得\n   * ======================================== */\n\n  /**\n   * getUrlParam\n   * - URLから指定したパラメータの値を取得\n   */\n  window.getUrlParam = function (name) {\n    var params = new URLSearchParams(window.location.search);\n    return params.get(name);\n  };\n\n  /* ========================================\n   * イベント情報取得\n   * ======================================== */\n\n  /**\n   * loadEventInfo\n   * - 開始～終了期間（親）とイベント予定一覧（祖父）からイベント情報を取得\n   * - URLのLinkIdまたは既存レコードのPERIOD_IDから開始～終了期間を取得\n   * - さらに開始～終了期間のEVENT_IDからイベント予定一覧を取得\n   * - PleasanterAPIのgetRecordメソッドを使用\n   */\n  async function loadEventInfo() {\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // イベント店舗ID（開始～終了期間のID）を取得\n      var periodId = null;\n      var isNewRecord = location.pathname.includes('/new');\n\n      if (isNewRecord) {\n        // 新規作成画面：URLのLinkIdを使用\n        periodId = window.getUrlParam('LinkId');\n        window.force && console.log('URLのLinkId:', periodId);\n      } else {\n        // 既存レコード編集画面：PERIOD_IDを取得\n        var currentRecordId = $p.id();\n        if (currentRecordId) {\n          var currentRecord = await api.getRecord(currentRecordId, {\n            columns: [TABLES.EVENT_DAY.COLUMNS.PERIOD_ID],\n            setLabelText: false,\n            setDisplayValue: 'Value',\n          });\n\n          if (currentRecord && currentRecord[TABLES.EVENT_DAY.COLUMNS.PERIOD_ID]) {\n            periodId = currentRecord[TABLES.EVENT_DAY.COLUMNS.PERIOD_ID];\n            window.force && console.log('既存レコードのPERIOD_ID:', periodId);\n          }\n        }\n      }\n\n      // LinkIdもPERIOD_IDも取得できない場合、画面上のPERIOD_IDから取得\n      if (!periodId) {\n        var classZValue = $p.getControl(TABLES.EVENT_DAY.COLUMNS.PERIOD_ID).val();\n        if (classZValue) {\n          periodId = classZValue;\n          window.force && console.log('画面上のPERIOD_IDから取得:', periodId);\n        }\n      }\n\n      if (!periodId) {\n        window.force && console.warn('開始～終了期間のIDが取得できません');\n        return;\n      }\n\n      window.eventShopId = periodId;\n\n      // 開始～終了期間（親）レコードを取得\n      var periodRecord = await api.getRecord(periodId, {\n        columns: [\n          TABLES.PERIOD.COLUMNS.NAME,\n          TABLES.PERIOD.COLUMNS.EVENT_ID,\n          TABLES.PERIOD.COLUMNS.START_DATE,\n          TABLES.PERIOD.COLUMNS.END_DATE\n        ],\n        setLabelText: false,\n        setDisplayValue: 'Value',\n      });\n\n      if (!periodRecord) {\n        window.force && console.warn('開始～終了期間レコードが取得できません');\n        return;\n      }\n\n      window.force && console.log('開始～終了期間レコード:', periodRecord);\n      window.periodRecord = periodRecord;\n      window.eventId = periodRecord[TABLES.PERIOD.COLUMNS.EVENT_ID];\n\n      // イベント予定一覧（祖父）レコードを取得\n      if (window.eventId) {\n        var eventRecord = await api.getRecord(window.eventId, {\n          columns: [\n            TABLES.EVENT_LIST.COLUMNS.CATEGORY,\n            TABLES.EVENT_LIST.COLUMNS.EVENT_NAME,\n            TABLES.EVENT_LIST.COLUMNS.ORGANIZER,\n            TABLES.EVENT_LIST.COLUMNS.AREA,\n            TABLES.EVENT_LIST.COLUMNS.AREA_DETAIL,\n            'ResultId'],\n          setLabelText: false,\n          setDisplayValue: 'DisplayValue',\n        });\n\n        if (eventRecord) {\n          window.force && console.log('イベント予定一覧レコード:', eventRecord);\n          window.eventRecord = eventRecord;\n\n          // イベント情報を画面に表示\n          displayEventInfo();\n\n          // 勤務日カレンダーの入力制限を設定（開始日〜終了日のみ）\n          setWorkDateRange();\n        }\n      }\n\n      // 個別イベント管理リンクを設定\n      var eventResultId = window.eventRecord && window.eventRecord.ResultId;\n      if (eventResultId) {\n        $('#fn-linkEventManage').attr('href', location.origin + '/items/' + eventResultId);\n      }\n\n      // 開催イベント一覧に戻るリンクを設定\n      $('#fn-linkBackToList').attr('href', location.origin + '/items/' + EVENT_OPEN_LIST_SITE_ID + '/index');\n\n      // 先方テーブル初期化（04で実装）\n      if (typeof window.loadVipList === 'function') {\n        window.loadVipList();\n      }\n\n      // 勤務登録テーブル初期化（05で実装）\n      if (typeof window.loadWorkList === 'function') {\n        window.loadWorkList();\n      }\n\n    } catch (error) {\n      window.force && console.error('イベント情報取得エラー:', error);\n    }\n  }\n\n  /**\n   * displayEventInfo\n   * - イベント情報を画面に表示\n   */\n  function displayEventInfo() {\n    if (!window.eventRecord || !window.periodRecord) {\n      return;\n    }\n\n    // カテゴリー\n    var category = window.eventRecord[TABLES.EVENT_LIST.COLUMNS.CATEGORY] || '-';\n    $('#fn-infoCategory').text(category);\n\n    // イベント名称・出店先\n    var eventName = window.eventRecord[TABLES.EVENT_LIST.COLUMNS.ORGANIZER] || '-';\n    $('#fn-infoEventName').text(eventName);\n\n    // 事業者名or店舗名\n    var shopName = window.periodRecord[TABLES.PERIOD.COLUMNS.NAME] || '-';\n    $('#fn-infoOrganizer').text(shopName);\n\n    // 開催エリア\n    var area = window.eventRecord[TABLES.EVENT_LIST.COLUMNS.AREA] || '-';\n    $('#fn-infoArea').text(area);\n\n    // 開催エリア詳細\n    var areaDetail = window.eventRecord[TABLES.EVENT_LIST.COLUMNS.AREA_DETAIL] || '-';\n    $('#fn-infoAreaDetail').text(areaDetail);\n\n    // 開催期間\n    var startDate = window.periodRecord[TABLES.PERIOD.COLUMNS.START_DATE] || '';\n    var endDate = window.periodRecord[TABLES.PERIOD.COLUMNS.END_DATE] || '';\n    var periodText = formatDate(startDate) + '〜' + formatDate(endDate);\n    $('#fn-infoPeriod').text(periodText);\n  }\n\n  /**\n   * setWorkDateRange\n   * - 勤務日カレンダーの入力範囲を開始日〜終了日に制限\n   */\n  function setWorkDateRange() {\n    if (!window.periodRecord) {\n      return;\n    }\n\n    var startDate = window.formatDateForInput(window.periodRecord[TABLES.PERIOD.COLUMNS.START_DATE]);\n    var endDate = window.formatDateForInput(window.periodRecord[TABLES.PERIOD.COLUMNS.END_DATE]);\n\n    if (startDate) {\n      $('#fn-workDate').attr('min', startDate);\n      $('#fn-modalWorkDate').attr('min', startDate);\n    }\n\n    if (endDate) {\n      $('#fn-workDate').attr('max', endDate);\n      $('#fn-modalWorkDate').attr('max', endDate);\n    }\n\n    window.force && console.log('勤務日制限設定:', startDate, '〜', endDate);\n  }\n\n  /**\n   * formatDate\n   * - 日付をYYYY年MM月DD日形式に変換\n   */\n  function formatDate(dateStr) {\n    if (!dateStr) return '';\n\n    var date = new Date(dateStr);\n    if (isNaN(date.getTime())) return dateStr;\n\n    var year = date.getFullYear();\n    var month = ('0' + (date.getMonth() + 1)).slice(-2);\n    var day = ('0' + date.getDate()).slice(-2);\n\n    return year + '年' + month + '月' + day + '日';\n  }\n\n  /**\n   * formatDateForInput\n   * - 日付をYYYY-MM-DD形式に変換\n   */\n  window.formatDateForInput = function (dateStr) {\n    if (!dateStr) return '';\n\n    if (dateStr.includes('T')) {\n      return dateStr.split('T')[0];\n    }\n\n    if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateStr)) {\n      return dateStr;\n    }\n\n    try {\n      var d = new Date(dateStr);\n      if (!isNaN(d.getTime())) {\n        return d.toISOString().split('T')[0];\n      }\n    } catch (e) {\n      window.force && console.warn('日付変換エラー:', dateStr, e);\n    }\n\n    return '';\n  };\n\n  /**\n   * formatTime\n   * - 時刻をHH:MM形式に変換\n   */\n  window.formatTime = function (dateTimeStr) {\n    if (!dateTimeStr) return '';\n\n    try {\n      var date = new Date(dateTimeStr);\n      if (isNaN(date.getTime())) return '';\n\n      var hours = ('0' + date.getHours()).slice(-2);\n      var minutes = ('0' + date.getMinutes()).slice(-2);\n\n      return hours + ':' + minutes;\n    } catch (e) {\n      window.force && console.warn('時刻変換エラー:', dateTimeStr, e);\n      return '';\n    }\n  };\n\n  /* ========================================\n   * 担当者プルダウン初期化\n   * ======================================== */\n\n  // ユーザーIDから名前へのマップ（グローバル）\n  window.staffMap = {};\n\n  /**\n   * loadStaffOptions\n   * - PleasanterのユーザーAPIからユーザー情報を取得し、プルダウンに設定\n   * - ユーザーマップ（UserId→Name）をグローバルに保存\n   */\n  async function loadStaffOptions() {\n    var $select = $('#fn-workStaff');\n    if ($select.length === 0) {\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // Pleasanterのユーザー一覧を取得（部署IDで絞り込み）\n      var users = await api.getUsers({\n        deptIds: [STAFF_DEPT_ID],\n        ignoreErrors: false,\n      });\n\n      if (!users || users.length === 0) {\n        window.force && console.warn('ユーザーデータが取得できませんでした');\n        return;\n      }\n\n      window.force && console.log('ユーザーデータ:', users);\n\n      users.forEach(function (user) {\n        var userName = user.Name || '';\n        var userId = user.UserId || '';\n\n        if (userName && userId) {\n          // マップに追加\n          window.staffMap[String(userId)] = userName;\n\n          var $option = $('<option></option>').val(userId).text(userName);\n          $select.append($option);\n        }\n      });\n\n      window.force && console.log('staffMap:', window.staffMap);\n\n    } catch (error) {\n      window.force && console.error('ユーザーデータ取得エラー:', error);\n    }\n  }\n\n  /* ========================================\n   * 折り畳み機能\n   * ======================================== */\n\n  /**\n   * initToggle\n   * - セクションの折り畳み機能を初期化\n   */\n  function initToggle() {\n    $('#fn-toggleVip').on('click', function () {\n      var $body = $('#fn-sectionVipBody');\n      var $button = $(this);\n\n      if ($body.is(':visible')) {\n        $body.slideUp();\n        $button.addClass('sdt-toggle-button--collapsed');\n      } else {\n        $body.slideDown();\n        $button.removeClass('sdt-toggle-button--collapsed');\n      }\n    });\n  }\n\n  /* ========================================\n   * 初期化\n   * ======================================== */\n\n  document.addEventListener('DOMContentLoaded', function () {\n    try {\n      // レイアウト初期化\n      initEventDayLayout();\n\n      // イベント情報取得\n      loadEventInfo();\n\n      // 担当者プルダウン初期化\n      loadStaffOptions();\n\n      // 折り畳み機能初期化\n      initToggle();\n\n    } catch (e) {\n      window.force && console.error('initEventDay error', e);\n    }\n  });\n\n})(jQuery);\n",
            "Id": 3
          },
          {
            "Title": "【データ処理】先方登録削除",
            "New": true,
            "Edit": true,
            "Body": "(function ($) {\n  'use strict';\n\n  /************************************************************************\n   * 先方（要人）の登録・削除処理\n   ************************************************************************/\n\n  // 先方データを保持\n  window.vipRecords = [];\n\n  /* ========================================\n   * 先方一覧取得\n   * ======================================== */\n\n  /**\n   * loadVipList\n   * - 先方テーブルからイベント店舗IDでフィルタリングしてデータを取得\n   */\n  async function loadVipList() {\n    if (!window.eventShopId) {\n      window.force && console.warn('イベント店舗IDが設定されていません');\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // 先方テーブルからイベント店舗IDでフィルタリング\n      var records = await api.getRecords(VIP_SITE_ID, {\n        columns: [TABLES.VIP.COLUMNS.SHOP_NAME, TABLES.VIP.COLUMNS.COMPANY, TABLES.VIP.COLUMNS.DEPT, TABLES.VIP.COLUMNS.NAME, TABLES.VIP.COLUMNS.POSITION, TABLES.VIP.COLUMNS.EVENT_SHOP_ID, 'ResultId'],\n        setLabelText: false,\n        setDisplayValue: 'Value',\n      });\n\n      if (!records || records.length === 0) {\n        window.force && console.log('先方データなし');\n        window.vipRecords = [];\n        renderVipTable([]);\n        return;\n      }\n\n      // イベント店舗ID（ClassY）でフィルタリング\n      var filteredRecords = records.filter(function (record) {\n        return String(record[TABLES.VIP.COLUMNS.EVENT_SHOP_ID]) === String(window.eventShopId);\n      });\n\n      window.force && console.log('先方データ:', filteredRecords);\n      window.vipRecords = filteredRecords;\n\n      // テーブルに描画\n      renderVipTable(filteredRecords);\n\n    } catch (error) {\n      window.force && console.error('先方データ取得エラー:', error);\n    }\n  }\n\n  /**\n   * renderVipTable\n   * - 先方一覧をテーブルに描画\n   */\n  function renderVipTable(records) {\n    var $tbody = $('#fn-vipTableBody');\n    if ($tbody.length === 0) {\n      window.force && console.error('renderVipTable: tbody not found');\n      return;\n    }\n\n    var $template = $tbody.find('tr.fn-vip-row-template').first();\n    if ($template.length === 0) {\n      window.force && console.error('renderVipTable: template row not found');\n      return;\n    }\n\n    // テンプレートは非表示のまま保持\n    $template.hide();\n\n    // 既存の出力行（テンプレート以外）を削除\n    $tbody.find('tr').not($template).remove();\n\n    if (records.length === 0) {\n      // データがない場合は「データなし」行を追加\n      var $emptyRow = $('<tr class=\"sdt-table__row\"><td class=\"sdt-table__cell\" colspan=\"5\" style=\"text-align:center;\">先方データがありません</td></tr>');\n      $tbody.append($emptyRow);\n      return;\n    }\n\n    // DocumentFragment を使ってパフォーマンス向上\n    var fragment = document.createDocumentFragment();\n\n    records.forEach(function (record) {\n      var $row = $template.clone().removeClass('fn-vip-row-template').show();\n\n      // 会社名\n      var company = record[TABLES.VIP.COLUMNS.COMPANY] || '';\n      $row.find('[data-target=\"fn-vip-company\"]').text(company);\n\n      // 部署名\n      var dept = record[TABLES.VIP.COLUMNS.DEPT] || '';\n      $row.find('[data-target=\"fn-vip-dept\"]').text(dept);\n\n      // 氏名\n      var name = record[TABLES.VIP.COLUMNS.NAME] || '';\n      $row.find('[data-target=\"fn-vip-name\"]').text(name);\n\n      // 役職\n      var position = record[TABLES.VIP.COLUMNS.POSITION] || '';\n      $row.find('[data-target=\"fn-vip-position\"]').text(position);\n\n      // 削除ボタン\n      var $deleteButton = $row.find('.fn-vip-delete');\n      $deleteButton.attr('data-record-id', record.ResultId || '');\n      $deleteButton.on('click', handleVipDelete);\n\n      fragment.appendChild($row.get(0));\n    });\n\n    $tbody.get(0).appendChild(fragment);\n  }\n\n  /* ========================================\n   * 先方登録処理\n   * ======================================== */\n\n  /**\n   * handleVipRegister\n   * - 先方登録ボタンクリック時の処理\n   */\n  async function handleVipRegister() {\n    var company = $('#fn-vipCompany').val() || '';\n    var dept = $('#fn-vipDept').val() || '';\n    var name = $('#fn-vipName').val() || '';\n    var position = $('#fn-vipPosition').val() || '';\n\n    // バリデーション\n    if (!company && !dept && !name && !position) {\n      alert('いずれかの項目を入力してください');\n      return;\n    }\n\n    if (!window.eventShopId) {\n      alert('イベント店舗IDが取得できません');\n      return;\n    }\n\n    if (!window.eventId) {\n      alert('イベントIDが取得できません');\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      var data = {};\n      data[TABLES.VIP.COLUMNS.SHOP_NAME] = window.periodRecord ? window.periodRecord[TABLES.PERIOD.COLUMNS.NAME] : '';\n      data[TABLES.VIP.COLUMNS.EVENT_SHOP_ID] = String(window.eventShopId);\n      data[TABLES.VIP.COLUMNS.COMPANY] = company;\n      data[TABLES.VIP.COLUMNS.DEPT] = dept;\n      data[TABLES.VIP.COLUMNS.NAME] = name;\n      data[TABLES.VIP.COLUMNS.POSITION] = position;\n      data[TABLES.VIP.COLUMNS.EVENT_ID] = String(window.eventId);\n\n      window.force && console.log('先方登録データ:', data);\n\n      var result = await api.createRecord(VIP_SITE_ID, data);\n      window.force && console.log('先方登録結果:', result);\n\n      alert('先方（要人）を登録しました');\n\n      // フォームをクリア\n      $('#fn-vipCompany').val('');\n      $('#fn-vipDept').val('');\n      $('#fn-vipName').val('');\n      $('#fn-vipPosition').val('');\n\n      // テーブル再描画\n      await loadVipList();\n\n    } catch (error) {\n      window.force && console.error('先方登録エラー:', error);\n      alert('登録に失敗しました: ' + (error.message || error));\n    }\n  }\n\n  /* ========================================\n   * 先方削除処理\n   * ======================================== */\n\n  /**\n   * handleVipDelete\n   * - 先方削除ボタンクリック時の処理\n   */\n  async function handleVipDelete() {\n    var recordId = $(this).attr('data-record-id');\n\n    if (!recordId) {\n      alert('レコードIDが取得できません');\n      return;\n    }\n\n    if (!confirm('この先方（要人）を削除しますか？')) {\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      var result = await api.deleteRecord(recordId);\n      window.force && console.log('先方削除結果:', result);\n\n      alert('先方（要人）を削除しました');\n\n      // テーブル再描画\n      await loadVipList();\n\n    } catch (error) {\n      window.force && console.error('先方削除エラー:', error);\n      alert('削除に失敗しました: ' + (error.message || error));\n    }\n  }\n\n  /* ========================================\n   * 初期化\n   * ======================================== */\n\n  // loadVipListをグローバルに公開（初期表示で呼び出し）\n  window.loadVipList = loadVipList;\n\n  document.addEventListener('DOMContentLoaded', function () {\n    // 登録ボタンイベント設定\n    $('#fn-vipRegister').off('click').on('click', handleVipRegister);\n  });\n\n})(jQuery);\n",
            "Id": 4
          },
          {
            "Title": "【データ処理】勤務登録編集コピー",
            "New": true,
            "Edit": true,
            "Body": "(function ($) {\n  'use strict';\n\n  /************************************************************************\n   * 勤務開始終了の登録・編集・コピー処理\n   *\n   * 重要：\n   * - 同じ日付・同じイベント店舗IDを持つレコードを「兄弟レコード」として扱う\n   * - 兄弟レコードはどれに入っても統一の表示にする\n   ************************************************************************/\n\n  // 勤務登録データを保持\n  window.workRecords = [];\n\n  // 編集モード管理\n  window.editingRecordId = null;\n\n  /* ========================================\n   * 勤務一覧取得\n   * ======================================== */\n\n  /**\n   * loadWorkList\n   * - イベント当日テーブルからイベント店舗IDでフィルタリングしてデータを取得\n   * - 兄弟レコード（同日付・同イベント店舗ID）を統一表示\n   */\n  async function loadWorkList() {\n    if (!window.eventShopId) {\n      window.force && console.warn('イベント店舗IDが設定されていません');\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // イベント当日テーブルから全件取得\n      var records = await api.getRecords(EVENT_DAY_SITE_ID, {\n        columns: [\n          TABLES.EVENT_DAY.COLUMNS.SHOP_NAME,\n          TABLES.EVENT_DAY.COLUMNS.STAFF,\n          TABLES.EVENT_DAY.COLUMNS.FREE_TEXT,\n          TABLES.EVENT_DAY.COLUMNS.WORK_DATE,\n          TABLES.EVENT_DAY.COLUMNS.WORK_START,\n          TABLES.EVENT_DAY.COLUMNS.WORK_END,\n          TABLES.EVENT_DAY.COLUMNS.PERIOD_ID,\n          'ResultId'\n        ],\n        setLabelText: false,\n        setDisplayValue: 'Value',\n      });\n\n      if (!records || records.length === 0) {\n        window.force && console.log('勤務登録データなし');\n        window.workRecords = [];\n        window.siblingRecords = [];\n        renderWorkTable([]);\n        return;\n      }\n\n      // イベント店舗ID（PERIOD_ID）でフィルタリング\n      var filteredRecords = records.filter(function (record) {\n        return String(record[TABLES.EVENT_DAY.COLUMNS.PERIOD_ID]) === String(window.eventShopId);\n      });\n\n      window.force && console.log('勤務登録データ:', filteredRecords);\n      window.workRecords = filteredRecords;\n      window.siblingRecords = filteredRecords;\n\n      // テーブルに描画\n      renderWorkTable(filteredRecords);\n\n    } catch (error) {\n      window.force && console.error('勤務登録データ取得エラー:', error);\n    }\n  }\n\n  /**\n   * renderWorkTable\n   * - 勤務一覧をテーブルに描画\n   */\n  function renderWorkTable(records) {\n    var $tbody = $('#fn-workTableBody');\n    if ($tbody.length === 0) {\n      window.force && console.error('renderWorkTable: tbody not found');\n      return;\n    }\n\n    var $template = $tbody.find('tr.fn-work-row-template').first();\n    if ($template.length === 0) {\n      window.force && console.error('renderWorkTable: template row not found');\n      return;\n    }\n\n    // テンプレートは非表示のまま保持\n    $template.hide();\n\n    // 既存の出力行（テンプレート以外）を削除\n    $tbody.find('tr').not($template).remove();\n\n    if (records.length === 0) {\n      // データがない場合は「データなし」行を追加\n      var $emptyRow = $('<tr class=\"sdt-table__row\"><td class=\"sdt-table__cell\" colspan=\"6\" style=\"text-align:center;\">勤務登録データがありません</td></tr>');\n      $tbody.append($emptyRow);\n      return;\n    }\n\n    // 勤務日で昇順ソート\n    var sortedRecords = records.slice().sort(function (a, b) {\n      var dateA = new Date(a[TABLES.EVENT_DAY.COLUMNS.WORK_DATE] || 0);\n      var dateB = new Date(b[TABLES.EVENT_DAY.COLUMNS.WORK_DATE] || 0);\n      return dateA - dateB;\n    });\n\n    // DocumentFragment を使ってパフォーマンス向上\n    var fragment = document.createDocumentFragment();\n\n    sortedRecords.forEach(function (record) {\n      var $row = $template.clone().removeClass('fn-work-row-template').show();\n\n      // 勤務日\n      var workDate = record[TABLES.EVENT_DAY.COLUMNS.WORK_DATE] || '';\n      $row.find('[data-target=\"fn-work-date\"]').text(formatWorkDate(workDate));\n\n      // 勤務開始時刻\n      var workStart = record[TABLES.EVENT_DAY.COLUMNS.WORK_START] || '';\n      $row.find('[data-target=\"fn-work-start\"]').text(window.formatTime(workStart));\n\n      // 勤務終了時刻\n      var workEnd = record[TABLES.EVENT_DAY.COLUMNS.WORK_END] || '';\n      $row.find('[data-target=\"fn-work-end\"]').text(window.formatTime(workEnd));\n\n      // 担当者（UserIdから名前に変換）\n      var staffId = record[TABLES.EVENT_DAY.COLUMNS.STAFF] || '';\n      var staffName = (window.staffMap && window.staffMap[String(staffId)]) || staffId;\n      $row.find('[data-target=\"fn-work-staff\"]').text(staffName);\n\n      // 自由記入欄\n      var freeText = record[TABLES.EVENT_DAY.COLUMNS.FREE_TEXT] || '';\n      $row.find('[data-target=\"fn-work-note\"]').text(freeText);\n\n      // 編集ボタン\n      var $editButton = $row.find('.fn-work-edit');\n      $editButton.attr('data-record-id', record.ResultId || '');\n      $editButton.on('click', handleWorkEdit);\n\n      // コピーボタン\n      var $copyButton = $row.find('.fn-work-copy');\n      $copyButton.attr('data-record-id', record.ResultId || '');\n      $copyButton.on('click', handleWorkCopy);\n\n      fragment.appendChild($row.get(0));\n    });\n\n    $tbody.get(0).appendChild(fragment);\n  }\n\n  /**\n   * formatWorkDate\n   * - 勤務日をYYYY年MM月DD日形式に変換\n   */\n  function formatWorkDate(dateStr) {\n    if (!dateStr) return '';\n\n    var date = new Date(dateStr);\n    if (isNaN(date.getTime())) return dateStr;\n\n    var year = date.getFullYear();\n    var month = ('0' + (date.getMonth() + 1)).slice(-2);\n    var day = ('0' + date.getDate()).slice(-2);\n\n    return year + '年' + month + '月' + day + '日';\n  }\n\n  /* ========================================\n   * 勤務登録処理\n   * ======================================== */\n\n  /**\n   * handleWorkRegister\n   * - 勤務登録ボタンクリック時の処理\n   */\n  async function handleWorkRegister() {\n    var workDate = $('#fn-workDate').val() || '';\n    var workStartTime = $('#fn-workStartTime').val() || '';\n    var workEndTime = $('#fn-workEndTime').val() || '';\n    var staffId = $('#fn-workStaff').val() || '';\n    var freeText = $('#fn-workNote').val() || '';\n\n    // バリデーション\n    var errors = [];\n    if (!workDate) {\n      errors.push('勤務日を入力してください');\n    }\n    if (!workStartTime) {\n      errors.push('勤務開始時刻を入力してください');\n    }\n    if (!workEndTime) {\n      errors.push('勤務終了時刻を入力してください');\n    }\n    if (!staffId) {\n      errors.push('担当者を選択してください');\n    }\n\n    if (errors.length > 0) {\n      alert(errors.join('\\n'));\n      return;\n    }\n\n    if (!window.eventShopId) {\n      alert('イベント店舗IDが取得できません');\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      // 勤務開始時刻と勤務終了時刻をISO形式に変換\n      var workStartDateTime = workDate + 'T' + workStartTime + ':00';\n      var workEndDateTime = workDate + 'T' + workEndTime + ':00';\n      var workDateDateTime = workDate + 'T00:00:00';\n\n      var data = {};\n      data[TABLES.EVENT_DAY.COLUMNS.SHOP_NAME] = window.periodRecord ? window.periodRecord[TABLES.PERIOD.COLUMNS.NAME] : '';\n      data[TABLES.EVENT_DAY.COLUMNS.STAFF] = String(staffId);\n      data[TABLES.EVENT_DAY.COLUMNS.FREE_TEXT] = freeText;\n      data[TABLES.EVENT_DAY.COLUMNS.WORK_DATE] = workDateDateTime;\n      data[TABLES.EVENT_DAY.COLUMNS.WORK_START] = workStartDateTime;\n      data[TABLES.EVENT_DAY.COLUMNS.WORK_END] = workEndDateTime;\n      data[TABLES.EVENT_DAY.COLUMNS.PERIOD_ID] = String(window.eventShopId);\n\n      window.force && console.log('勤務登録データ:', data);\n\n      var result;\n      if (window.editingRecordId) {\n        // 編集モード\n        result = await api.updateRecord(window.editingRecordId, data);\n        window.force && console.log('勤務更新結果:', result);\n        alert('勤務情報を更新しました');\n      } else {\n        // 登録モード\n        result = await api.createRecord(EVENT_DAY_SITE_ID, data);\n        window.force && console.log('勤務登録結果:', result);\n        alert('勤務情報を登録しました');\n      }\n\n      // フォームをクリア\n      clearWorkForm();\n\n      // テーブル再描画\n      await loadWorkList();\n\n    } catch (error) {\n      window.force && console.error('勤務登録エラー:', error);\n      alert('登録に失敗しました: ' + (error.message || error));\n    }\n  }\n\n  /**\n   * clearWorkForm\n   * - 勤務登録フォームをクリア\n   */\n  function clearWorkForm() {\n    $('#fn-workDate').val('');\n    $('#fn-workStartTime').val('');\n    $('#fn-workEndTime').val('');\n    $('#fn-workStaff').val('');\n    $('#fn-workNote').val('');\n    window.editingRecordId = null;\n    $('#fn-workRegister .sdt-button__text').text('登録');\n  }\n\n  /* ========================================\n   * モーダル処理\n   * ======================================== */\n\n  // モーダルモード管理（'edit' or 'copy'）\n  var modalMode = null;\n\n  /**\n   * openWorkModal\n   * - モーダルを開く\n   */\n  function openWorkModal(mode, record) {\n    modalMode = mode;\n\n    // モーダル用担当者プルダウンを初期化\n    initModalStaffSelect();\n\n    if (mode === 'edit') {\n      // 編集モード\n      $('#fn-workModalTitle').text('勤務情報編集');\n      $('#fn-modalWorkSubmit .sdt-button__text').text('更新');\n      $('#fn-modalWorkDelete').show();\n      window.editingRecordId = record.ResultId;\n\n      // フォームにデータをセット\n      var workDate = record[TABLES.EVENT_DAY.COLUMNS.WORK_DATE] || '';\n      $('#fn-modalWorkDate').val(window.formatDateForInput(workDate));\n    } else {\n      // コピーモード\n      $('#fn-workModalTitle').text('勤務情報コピー');\n      $('#fn-modalWorkSubmit .sdt-button__text').text('登録');\n      $('#fn-modalWorkDelete').hide();\n      window.editingRecordId = null;\n\n      // 勤務日は空白\n      $('#fn-modalWorkDate').val('');\n    }\n\n    // 共通データセット\n    var workStart = record[TABLES.EVENT_DAY.COLUMNS.WORK_START] || '';\n    var workEnd = record[TABLES.EVENT_DAY.COLUMNS.WORK_END] || '';\n    var staff = record[TABLES.EVENT_DAY.COLUMNS.STAFF] || '';\n    var freeText = record[TABLES.EVENT_DAY.COLUMNS.FREE_TEXT] || '';\n\n    $('#fn-modalWorkStartTime').val(window.formatTime(workStart));\n    $('#fn-modalWorkEndTime').val(window.formatTime(workEnd));\n    $('#fn-modalWorkStaff').val(staff);\n    $('#fn-modalWorkNote').val(freeText);\n\n    // モーダル表示\n    $('#fn-workModal').show();\n  }\n\n  /**\n   * closeWorkModal\n   * - モーダルを閉じる\n   */\n  function closeWorkModal() {\n    $('#fn-workModal').hide();\n    modalMode = null;\n    window.editingRecordId = null;\n  }\n\n  /**\n   * initModalStaffSelect\n   * - モーダル用担当者プルダウンを初期化\n   */\n  function initModalStaffSelect() {\n    var $modalSelect = $('#fn-modalWorkStaff');\n    var $originalSelect = $('#fn-workStaff');\n\n    // 既存のオプションをクリア（最初のデフォルトオプション以外）\n    $modalSelect.find('option:not(:first)').remove();\n\n    // 元のプルダウンからオプションをコピー\n    $originalSelect.find('option:not(:first)').each(function () {\n      var $option = $(this).clone();\n      $modalSelect.append($option);\n    });\n  }\n\n  /**\n   * handleWorkEdit\n   * - 勤務編集ボタンクリック時の処理（モーダル表示）\n   */\n  function handleWorkEdit() {\n    var recordId = $(this).attr('data-record-id');\n\n    if (!recordId) {\n      alert('レコードIDが取得できません');\n      return;\n    }\n\n    var record = window.workRecords.find(function (r) {\n      return String(r.ResultId) === String(recordId);\n    });\n\n    if (!record) {\n      alert('レコードが見つかりません');\n      return;\n    }\n\n    openWorkModal('edit', record);\n  }\n\n  /**\n   * handleWorkCopy\n   * - 勤務コピーボタンクリック時の処理（モーダル表示）\n   */\n  function handleWorkCopy() {\n    var recordId = $(this).attr('data-record-id');\n\n    if (!recordId) {\n      alert('レコードIDが取得できません');\n      return;\n    }\n\n    var record = window.workRecords.find(function (r) {\n      return String(r.ResultId) === String(recordId);\n    });\n\n    if (!record) {\n      alert('レコードが見つかりません');\n      return;\n    }\n\n    openWorkModal('copy', record);\n  }\n\n  /**\n   * handleModalSubmit\n   * - モーダル内の更新/登録ボタンクリック時の処理\n   */\n  async function handleModalSubmit() {\n    var workDate = $('#fn-modalWorkDate').val() || '';\n    var workStartTime = $('#fn-modalWorkStartTime').val() || '';\n    var workEndTime = $('#fn-modalWorkEndTime').val() || '';\n    var staffId = $('#fn-modalWorkStaff').val() || '';\n    var freeText = $('#fn-modalWorkNote').val() || '';\n\n    // バリデーション\n    var errors = [];\n    if (!workDate) {\n      errors.push('勤務日を入力してください');\n    }\n    if (!workStartTime) {\n      errors.push('勤務開始時刻を入力してください');\n    }\n    if (!workEndTime) {\n      errors.push('勤務終了時刻を入力してください');\n    }\n    if (!staffId) {\n      errors.push('担当者を選択してください');\n    }\n\n    if (errors.length > 0) {\n      alert(errors.join('\\n'));\n      return;\n    }\n\n    if (!window.eventShopId) {\n      alert('イベント店舗IDが取得できません');\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n\n      var workStartDateTime = workDate + 'T' + workStartTime + ':00';\n      var workEndDateTime = workDate + 'T' + workEndTime + ':00';\n      var workDateDateTime = workDate + 'T00:00:00';\n\n      var data = {};\n      data[TABLES.EVENT_DAY.COLUMNS.SHOP_NAME] = window.periodRecord ? window.periodRecord[TABLES.PERIOD.COLUMNS.NAME] : '';\n      data[TABLES.EVENT_DAY.COLUMNS.STAFF] = String(staffId);\n      data[TABLES.EVENT_DAY.COLUMNS.FREE_TEXT] = freeText;\n      data[TABLES.EVENT_DAY.COLUMNS.WORK_DATE] = workDateDateTime;\n      data[TABLES.EVENT_DAY.COLUMNS.WORK_START] = workStartDateTime;\n      data[TABLES.EVENT_DAY.COLUMNS.WORK_END] = workEndDateTime;\n      data[TABLES.EVENT_DAY.COLUMNS.PERIOD_ID] = String(window.eventShopId);\n\n      var result;\n      if (modalMode === 'edit' && window.editingRecordId) {\n        result = await api.updateRecord(window.editingRecordId, data);\n        window.force && console.log('勤務更新結果:', result);\n        alert('勤務情報を更新しました');\n      } else {\n        result = await api.createRecord(EVENT_DAY_SITE_ID, data);\n        window.force && console.log('勤務登録結果:', result);\n        alert('勤務情報を登録しました');\n      }\n\n      closeWorkModal();\n\n      // テーブル再描画\n      await loadWorkList();\n\n    } catch (error) {\n      window.force && console.error('勤務登録エラー:', error);\n      alert('登録に失敗しました: ' + (error.message || error));\n    }\n  }\n\n  /**\n   * handleModalDelete\n   * - モーダル内の削除ボタンクリック時の処理\n   */\n  async function handleModalDelete() {\n    if (!window.editingRecordId) {\n      alert('削除対象のレコードが選択されていません');\n      return;\n    }\n\n    if (!confirm('この勤務情報を削除してもよろしいですか？')) {\n      return;\n    }\n\n    try {\n      var api = new PleasanterAPI(location.origin, { logging: window.force });\n      await api.deleteRecord(window.editingRecordId);\n      window.force && console.log('勤務削除完了:', window.editingRecordId);\n      alert('勤務情報を削除しました');\n\n      closeWorkModal();\n\n      // テーブル再描画\n      await loadWorkList();\n\n    } catch (error) {\n      window.force && console.error('勤務削除エラー:', error);\n      alert('削除に失敗しました: ' + (error.message || error));\n    }\n  }\n\n  /* ========================================\n   * 初期化\n   * ======================================== */\n\n  // loadWorkListをグローバルに公開（初期表示で呼び出し）\n  window.loadWorkList = loadWorkList;\n\n  document.addEventListener('DOMContentLoaded', function () {\n    // 登録ボタンイベント設定\n    $('#fn-workRegister').off('click').on('click', handleWorkRegister);\n\n    // モーダルイベント設定\n    $('#fn-workModalClose').off('click').on('click', closeWorkModal);\n    $('#fn-workModalOverlay').off('click').on('click', closeWorkModal);\n    $('#fn-modalWorkSubmit').off('click').on('click', handleModalSubmit);\n    $('#fn-modalWorkDelete').off('click').on('click', handleModalDelete);\n  });\n\n})(jQuery);\n",
            "Id": 5
          }
        ],
        "Htmls": [
          {
            "Title": "【表示制御】イベント当日HTML",
            "PositionType": 1000,
            "New": true,
            "Edit": true,
            "Body": "        <div id=\"fn-event-day\" class=\"sdt-event-day\">\n            <!-- イベント当日画面全体ラップ -->\n            <div class=\"sdt-event-day-wrap\">\n\n                <!-- イベント情報表示領域 -->\n                <div class=\"sdt-event-info\">\n                    <div class=\"sdt-event-info__header\">\n                        <h2 class=\"sdt-event-day-title\">\n                            <span class=\"sdt-event-day-title__text\">イベント当日</span>\n                        </h2>\n                        <div class=\"sdt-event-info__nav\">\n                            <a href=\"#\" id=\"fn-linkEventManage\" class=\"sdt-link-button\">個別イベント管理</a>\n                            <a href=\"#\" id=\"fn-linkBackToList\" class=\"sdt-link-button\">開催イベント一覧に戻る</a>\n                        </div>\n                    </div>\n                    <div class=\"sdt-event-info__body\">\n                        <div class=\"sdt-info-item\">\n                            <span class=\"sdt-info-label\">カテゴリー</span>\n                            <span class=\"sdt-info-value\" id=\"fn-infoCategory\">-</span>\n                        </div>\n                        <div class=\"sdt-info-item\">\n                            <span class=\"sdt-info-label\">イベント名・出店名</span>\n                            <span class=\"sdt-info-value\" id=\"fn-infoEventName\">-</span>\n                        </div>\n                        <div class=\"sdt-info-item\">\n                            <span class=\"sdt-info-label\">開催者or依頼主</span>\n                            <span class=\"sdt-info-value\" id=\"fn-infoOrganizer\">-</span>\n                        </div>\n                        <div class=\"sdt-info-item\">\n                            <span class=\"sdt-info-label\">開催エリア</span>\n                            <span class=\"sdt-info-value\" id=\"fn-infoArea\">-</span>\n                        </div>\n                        <div class=\"sdt-info-item\">\n                            <span class=\"sdt-info-label\">開催エリア詳細</span>\n                            <span class=\"sdt-info-value\" id=\"fn-infoAreaDetail\">-</span>\n                        </div>\n                        <div class=\"sdt-info-item\">\n                            <span class=\"sdt-info-label\">開催期間</span>\n                            <span class=\"sdt-info-value\" id=\"fn-infoPeriod\">-</span>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- セクション①：先方（要人） -->\n                <div class=\"sdt-section\">\n                    <div class=\"sdt-section__header\" id=\"fn-sectionVipHeader\">\n                        <h3 class=\"sdt-section__title\">先方（要人）</h3>\n                        <button class=\"sdt-toggle-button\" id=\"fn-toggleVip\"></button>\n                    </div>\n                    <div class=\"sdt-section__body\" id=\"fn-sectionVipBody\">\n                        <!-- 入力フォーム -->\n                        <div class=\"sdt-vip-form\">\n                            <div class=\"sdt-vip-form-grid\">\n                                <div class=\"sdt-vip-form-column\">\n                                    <div class=\"sdt-form-row\">\n                                        <label class=\"sdt-form-label\" for=\"fn-vipCompany\">会社</label>\n                                        <input id=\"fn-vipCompany\" type=\"text\" class=\"sdt-input\" placeholder=\"会社名\" size=\"15\">\n                                    </div>\n                                    <div class=\"sdt-form-row\">\n                                        <label class=\"sdt-form-label\" for=\"fn-vipPosition\">役職</label>\n                                        <input id=\"fn-vipPosition\" type=\"text\" class=\"sdt-input\" placeholder=\"役職\" size=\"15\">\n                                    </div>\n                                </div>\n                                <div class=\"sdt-vip-form-column\">\n                                    <div class=\"sdt-form-row\">\n                                        <label class=\"sdt-form-label\" for=\"fn-vipDept\">部署</label>\n                                        <input id=\"fn-vipDept\" type=\"text\" class=\"sdt-input\" placeholder=\"部署名\" size=\"15\">\n                                    </div>\n                                    <div class=\"sdt-form-row sdt-form-row--vip-with-button\">\n                                        <label class=\"sdt-form-label\" for=\"fn-vipName\">氏名</label>\n                                        <input id=\"fn-vipName\" type=\"text\" class=\"sdt-input\" placeholder=\"氏名\" size=\"15\">\n                                        <button class=\"sdt-button sdt-button--primary sdt-button--vip-inline\" type=\"button\" id=\"fn-vipRegister\">\n                                            <span class=\"sdt-button__text\">先方（要人）登録</span>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- 一覧テーブル -->\n                        <div class=\"sdt-vip-table\">\n                            <table class=\"sdt-table\">\n                                <thead class=\"sdt-table__head\">\n                                    <tr class=\"sdt-table__row\">\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:25%;\">会社名</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:25%;\">部署名</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:25%;\">氏名</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:15%;\">役職</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:10%;\">操作</th>\n                                    </tr>\n                                </thead>\n                                <tbody class=\"sdt-table__body\" id=\"fn-vipTableBody\">\n                                    <!-- テンプレート行 -->\n                                    <tr class=\"sdt-table__row fn-vip-row-template\" style=\"display:none;\">\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-vip-company\">会社名</td>\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-vip-dept\">部署名</td>\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-vip-name\">氏名</td>\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-vip-position\">役職</td>\n                                        <td class=\"sdt-table__cell\">\n                                            <button class=\"sdt-button sdt-button--danger sdt-button--small fn-vip-delete\" data-record-id=\"\">削除</button>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- セクション②：勤務開始終了 -->\n                <div class=\"sdt-section\">\n                    <div class=\"sdt-section__header\">\n                        <h3 class=\"sdt-section__title\">勤務開始終了</h3>\n                    </div>\n                    <div class=\"sdt-section__body\">\n                        <!-- 入力フォーム -->\n                        <div class=\"sdt-work-form\">\n                            <div class=\"sdt-form-row\">\n                                <label class=\"sdt-form-label sdt-form-label--required\" for=\"fn-workDate\">勤務日</label>\n                                <input id=\"fn-workDate\" type=\"date\" class=\"sdt-input sdt-input--date\">\n                            </div>\n                            <div class=\"sdt-form-row\">\n                                <label class=\"sdt-form-label sdt-form-label--required\" for=\"fn-workStartTime\">勤務開始時刻</label>\n                                <input id=\"fn-workStartTime\" type=\"time\" class=\"sdt-input sdt-input--time\">\n                            </div>\n                            <div class=\"sdt-form-row\">\n                                <label class=\"sdt-form-label sdt-form-label--required\" for=\"fn-workEndTime\">勤務終了時刻</label>\n                                <input id=\"fn-workEndTime\" type=\"time\" class=\"sdt-input sdt-input--time\">\n                            </div>\n                            <div class=\"sdt-form-row\">\n                                <label class=\"sdt-form-label sdt-form-label--required\" for=\"fn-workStaff\">担当者</label>\n                                <select id=\"fn-workStaff\" class=\"sdt-selector-content\">\n                                    <option value=\"\" disabled selected style=\"display:none;\">選択してください</option>\n                                </select>\n                            </div>\n                            <div class=\"sdt-form-row sdt-form-row--vip-with-button\">\n                                <label class=\"sdt-form-label\" for=\"fn-workNote\">自由記入欄</label>\n                                <textarea id=\"fn-workNote\" class=\"sdt-textarea\" rows=\"3\" placeholder=\"自由記入欄\"></textarea>\n                                <button class=\"sdt-button sdt-button--primary sdt-button--vip-inline\" type=\"button\" id=\"fn-workRegister\">\n                                    <span class=\"sdt-button__text\">登録</span>\n                                </button>\n                            </div>\n                        </div>\n\n                        <!-- 一覧テーブル -->\n                        <div class=\"sdt-work-table\">\n                            <table class=\"sdt-table\">\n                                <thead class=\"sdt-table__head\">\n                                    <tr class=\"sdt-table__row\">\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:15%;\">勤務日</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:12%;\">勤務開始時刻</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:12%;\">勤務終了時刻</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:15%;\">担当者</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:31%;\">自由記入欄</th>\n                                        <th class=\"sdt-table__cell sdt-table__cell-head\" style=\"width:15%;\">操作</th>\n                                    </tr>\n                                </thead>\n                                <tbody class=\"sdt-table__body\" id=\"fn-workTableBody\">\n                                    <!-- テンプレート行 -->\n                                    <tr class=\"sdt-table__row fn-work-row-template\" style=\"display:none;\">\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-work-date\">2025年03月07日</td>\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-work-start\">14:03</td>\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-work-end\">16:23</td>\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-work-staff\">担当者名</td>\n                                        <td class=\"sdt-table__cell\" data-target=\"fn-work-note\">自由記入内容</td>\n                                        <td class=\"sdt-table__cell\">\n                                            <button class=\"sdt-button sdt-button--secondary sdt-button--small fn-work-edit\" data-record-id=\"\">編集</button>\n                                            <button class=\"sdt-button sdt-button--secondary sdt-button--small fn-work-copy\" data-record-id=\"\">コピー</button>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- 勤務情報編集モーダル -->\n            <div id=\"fn-workModal\" class=\"sdt-modal\" style=\"display:none;\">\n                <div class=\"sdt-modal__overlay\" id=\"fn-workModalOverlay\"></div>\n                <div class=\"sdt-modal__content\">\n                    <div class=\"sdt-modal__header\">\n                        <h3 class=\"sdt-modal__title\" id=\"fn-workModalTitle\">勤務情報編集</h3>\n                        <button class=\"sdt-modal__close\" id=\"fn-workModalClose\">&times;</button>\n                    </div>\n                    <div class=\"sdt-modal__body\">\n                        <div class=\"sdt-modal-form\">\n                            <div class=\"sdt-modal-form__row\">\n                                <label class=\"sdt-modal-form__label sdt-modal-form__label--required\">勤務日</label>\n                                <input id=\"fn-modalWorkDate\" type=\"date\" class=\"sdt-input sdt-input--date\">\n                            </div>\n                            <div class=\"sdt-modal-form__row\">\n                                <label class=\"sdt-modal-form__label sdt-modal-form__label--required\">勤務開始時間</label>\n                                <input id=\"fn-modalWorkStartTime\" type=\"time\" class=\"sdt-input sdt-input--time\">\n                            </div>\n                            <div class=\"sdt-modal-form__row\">\n                                <label class=\"sdt-modal-form__label sdt-modal-form__label--required\">勤務終了時間</label>\n                                <input id=\"fn-modalWorkEndTime\" type=\"time\" class=\"sdt-input sdt-input--time\">\n                            </div>\n                            <div class=\"sdt-modal-form__row\">\n                                <label class=\"sdt-modal-form__label sdt-modal-form__label--required\">担当者</label>\n                                <select id=\"fn-modalWorkStaff\" class=\"sdt-selector-content\">\n                                    <option value=\"\" disabled selected style=\"display:none;\">選択してください</option>\n                                </select>\n                            </div>\n                            <div class=\"sdt-modal-form__row\">\n                                <label class=\"sdt-modal-form__label\">自由記入欄</label>\n                                <textarea id=\"fn-modalWorkNote\" class=\"sdt-textarea\" rows=\"3\" placeholder=\"自由記入欄\"></textarea>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"sdt-modal__footer\">\n                        <button class=\"sdt-button sdt-button--primary\" id=\"fn-modalWorkSubmit\">\n                            <span class=\"sdt-button__text\">更新</span>\n                        </button>\n                        <button class=\"sdt-button sdt-button--danger\" id=\"fn-modalWorkDelete\">\n                            <span class=\"sdt-button__text\">削除</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n",
            "Id": 1
          }
        ],
        "NoDisplayIfReadOnly": false
      },
      "Publish": false,
      "DisableCrossSearch": false,
      "Comments": []
    }
  ],
  "Data": [],
  "Permissions": [
    {
      "SiteId": 255689,
      "Permissions": [
        {
          "ReferenceId": 255689,
          "DeptId": 0,
          "GroupId": 0,
          "UserId": 1,
          "PermissionType": 511
        },
        {
          "ReferenceId": 255689,
          "DeptId": 0,
          "GroupId": 0,
          "UserId": -1,
          "PermissionType": 511
        }
      ]
    }
  ],
  "PermissionIdList": {
    "DeptIdList": [],
    "GroupIdList": [],
    "UserIdList": [
      {
        "UserId": 1,
        "LoginId": "Administrator"
      }
    ]
  }
}