import pytest
from fastapi.testclient import TestClient

from app.main import app
from app.models.admin import AdminModel
from app.models.master import MasterSupporterOrganizationModel
from app.models.project import (
    GrossProfitAttribute,
    ProjectModel,
    SalesforceMainCustomerAttribute,
)
from app.models.user import UserModel
from app.resources.const import DataType, MasterDataType, UserRoleType

client = TestClient(app)

REQUEST_HEADERS = {"x-otp-verified-token": "111111"}


class TestGetProjects:
    @pytest.mark.parametrize(
        "role_types",
        [
            [UserRoleType.SYSTEM_ADMIN.key],
            [UserRoleType.SALES.key],
            [UserRoleType.SALES_MGR.key],
            [UserRoleType.SUPPORTER_MGR.key],
            [UserRoleType.SURVEY_OPS.key],
            [UserRoleType.MAN_HOUR_OPS.key],
            [UserRoleType.BUSINESS_MGR.key],
        ]
    )
    def test_access_ok(
        self,
        mock_auth_admin,
        role_types,
    ):
        mock_auth_admin(role_types)
        response = client.get("/api/projects", headers=REQUEST_HEADERS)

        assert response.status_code == 200

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?name=サンプルプロジェクト&sort=name:asc&offsetPage=1&limit=2&status=after&fromYearMonth=202101&toYearMonth=202105&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&mainSalesUserId=a9b67094-cdab-494c-818e-d4845088269b&supporterOrganizationId=7ac8bddf-88da-46c9-a504-a03d1661ad58,180a3597-b7e7-42c8-902c-a29016afa662,de40733f-6be9-4fef-8229-01052f43c1e2&serviceTypeId=7ac8bddf-88da-46c9-a504-a03d1661ad58",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_1page(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常1ページ目  total:5件,limit=2,offsetPage=1"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?name=サンプルプロジェクト&sort=name:asc&offsetPage=2&limit=2&status=after&fromYearMonth=202101&toYearMonth=202105&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&mainSalesUserId=a9b67094-cdab-494c-818e-d4845088269b&supporterOrganizationId=7ac8bddf-88da-46c9-a504-a03d1661ad58,180a3597-b7e7-42c8-902c-a29016afa662,de40733f-6be9-4fef-8229-01052f43c1e2&serviceTypeId=7ac8bddf-88da-46c9-a504-a03d1661ad58",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 2,
                    "total": 5,
                    "projects": [
                        {
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト３",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_2page(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常2ページ目  total:5件,limit=2,offsetPage=2"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?name=サンプルプロジェクト&sort=name:asc&offsetPage=3&limit=2&status=after&fromYearMonth=202101&toYearMonth=202105&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&mainSalesUserId=a9b67094-cdab-494c-818e-d4845088269b&supporterOrganizationId=7ac8bddf-88da-46c9-a504-a03d1661ad58,180a3597-b7e7-42c8-902c-a29016afa662,de40733f-6be9-4fef-8229-01052f43c1e2&serviceTypeId=7ac8bddf-88da-46c9-a504-a03d1661ad58",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 3,
                    "total": 5,
                    "projects": [
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_3page(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常3ページ目  total:5件,limit=2,offsetPage=3"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?name=サンプルプロジェクト&sort=name:asc&offsetPage=1&limit=2&status=after&fromYearMonth=202101&mainSalesUserId=a9b67094-cdab-494c-818e-d4845088269b&supporterOrganizationId=7ac8bddf-88da-46c9-a504-a03d1661ad58,180a3597-b7e7-42c8-902c-a29016afa662,de40733f-6be9-4fef-8229-01052f43c1e2&serviceTypeId=7ac8bddf-88da-46c9-a504-a03d1661ad58",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_no_specified_to_year_month_and_customer_id(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常（支援開始日、取引先IDの指定なし）"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?name=サンプルプロジェクト&sort=name:asc&offsetPage=1&limit=2&status=after&fromYearMonth=202101&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&mainSalesUserId=a9b67094-cdab-494c-818e-d4845088269b&supporterOrganizationId=7ac8bddf-88da-46c9-a504-a03d1661ad58,180a3597-b7e7-42c8-902c-a29016afa662,de40733f-6be9-4fef-8229-01052f43c1e2&serviceTypeId=7ac8bddf-88da-46c9-a504-a03d1661ad58",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_no_specified_to_year_month(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常（取引先ID指定なし）"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?name=サンプルプロジェクト&sort=name:asc&offsetPage=1&limit=2&status=after&fromYearMonth=202101&toYearMonth=202105&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&mainSalesUserId=a9b67094-cdab-494c-818e-d4845088269b&supporterOrganizationId=7ac8bddf-88da-46c9-a504-a03d1661ad58,180a3597-b7e7-42c8-902c-a29016afa662,de40733f-6be9-4fef-8229-01052f43c1e2&serviceTypeId=7ac8bddf-88da-46c9-a504-a03d1661ad58",
                [],
                {
                    "offsetPage": 1,
                    "total": 0,
                    "projects": [],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_zero(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常 0件  total:0件,limit=2,offsetPage=1"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト３",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_no_query_param(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常 クエリパラメータ指定なし（デフォルト）"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "projects": [
                        {
                            "contractType": "有償",
                            "createNew": True,
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "customerName": "ソニーグループ株式会社",
                            "customerSuccess": "DXの実現",
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "isSecret": False,
                            "isSolverProject": False,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "name": "サンプルプロジェクト１",
                            "phase": "プラン提示(D)",
                            "salesforceMainCustomer": {
                                "email": "yamada@example.com",
                                "name": "山田太郎",
                                "organizationName": "IST"
                            },
                            "salesforceMainSupporterUserName": "山田太郎",
                            "salesforceSupporterUserNames": [
                                "山田太郎",
                                "山田次郎"
                            ],
                            "salesforceUpdateAt": None,
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "totalContractTime": 200.0,
                            "updateAt": "2022-05-23T16:34:21.523+09:00"
                        },
                        {
                            "contractType": "有償",
                            "createNew": True,
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "customerName": "ソニーグループ株式会社",
                            "customerSuccess": "DXの実現",
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "isSecret": True,
                            "isSolverProject": True,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "name": "サンプルプロジェクト２",
                            "phase": "プラン提示(D)",
                            "salesforceMainCustomer": {
                                "email": "yamada@example.com",
                                "name": "山田太郎",
                                "organizationName": "IST"
                            },
                            "salesforceMainSupporterUserName": "山田太郎",
                            "salesforceSupporterUserNames": [
                                "山田太郎",
                                "山田次郎"
                            ],
                            "salesforceUpdateAt": None,
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "totalContractTime": 200.0,
                            "updateAt": "2022-05-23T16:34:21.523+09:00"
                        },
                        {
                            "contractType": "有償",
                            "createNew": True,
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "customerName": "ソニーグループ株式会社",
                            "customerSuccess": "DXの実現",
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "isSecret": True,
                            "isSolverProject": True,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "name": "サンプルプロジェクト３",
                            "phase": "プラン提示(D)",
                            "salesforceMainCustomer": {
                                "email": "yamada@example.com",
                                "name": "山田太郎",
                                "organizationName": "IST"
                            },
                            "salesforceMainSupporterUserName": "山田太郎",
                            "salesforceSupporterUserNames": [
                                "山田太郎",
                                "山田次郎"
                            ],
                            "salesforceUpdateAt": None,
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "totalContractTime": 200.0,
                            "updateAt": "2022-05-23T16:34:21.523+09:00"
                        },
                        {
                            "contractType": "有償",
                            "createNew": True,
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "customerName": "ソニーグループ株式会社",
                            "customerSuccess": "DXの実現",
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "isSecret": False,
                            "isSolverProject": False,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "name": "サンプルプロジェクト４",
                            "phase": "プラン提示(D)",
                            "salesforceMainCustomer": {
                                "email": "yamada@example.com",
                                "name": "山田太郎",
                                "organizationName": "IST"
                            },
                            "salesforceMainSupporterUserName": "山田太郎",
                            "salesforceSupporterUserNames": [
                                "山田太郎",
                                "山田次郎"
                            ],
                            "salesforceUpdateAt": None,
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "totalContractTime": 200.0,
                            "updateAt": "2022-05-23T16:34:21.523+09:00"
                        },
                        {
                            "contractType": "有償",
                            "createNew": True,
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "customerName": "ソニーグループ株式会社",
                            "customerSuccess": "DXの実現",
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "isSecret": False,
                            "isSolverProject": False,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "name": "サンプルプロジェクト５",
                            "phase": "プラン提示(D)",
                            "salesforceMainCustomer": {
                                "email": "yamada@example.com",
                                "name": "山田太郎",
                                "organizationName": "IST"
                            },
                            "salesforceMainSupporterUserName": "山田太郎",
                            "salesforceSupporterUserNames": [
                                "山田太郎",
                                "山田次郎"
                            ],
                            "salesforceUpdateAt": None,
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎"
                                }
                            ],
                            "totalContractTime": 200.0,
                            "updateAt": "2022-05-23T16:34:21.523+09:00"
                        }
                    ],
                    "total": 5
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_ok_visible_only(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常(支援責任者でアクセス可能な情報のみ取得).
        自分の課以外の非公開案件はアクセス不可.
        サンプルプロジェクト1～5のうち、2,3,4がアクセス不可で、取得するのは1,5.
        """
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        # mock_auth_adminのユーザ部分を上書き
        # 支援者責任者
        mock = mocker.patch.object(AdminModel, "get_admin_by_cognito_id")
        mock.return_value = AdminModel(
            id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            data_type=DataType.ADMIN,
            name="田中太郎",
            email="user@example.com",
            roles={UserRoleType.SUPPORTER_MGR.key},
            company=None,
            job="部長",
            supporter_organization_id={"180a3597-b7e7-42c8-902c-a29016afa662"},
            organization_name=None,
            cognito_id=None,
            last_login_at="2020-10-23T03:21:39.356000+0000",
            otp_secret=None,
            otp_verified_token="111111",
            otp_verified_at=None,
            disabled=False,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T03:21:39.356000+0000",
            version=1,
        )

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            # 実行ユーザに紐づく一般ユーザ情報のproject_idsが未設定
            (
                "?isKarteUsageProjectListOfSales=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 2,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="48501bd7-4c28-40bc-8251-3aecbf4a70ca",
                        name="ソニー太郎",
                        email="current_user@example.com",
                        role="sales",
                        job="部長",
                        company="テスト株式会社",
                        organization_name="営業部",
                        supporter_organization_id=[],
                        is_input_man_hour=None,
                        # project_idsが未設定
                        # project_ids=set(),
                        agreed=True,
                        last_login_at="2022-04-25T03:21:39.356Z",
                        disabled=False,
                    ),
                ],
            ),
            # 実行ユーザに紐づく一般ユーザ情報のproject_idsが空
            (
                "?isKarteUsageProjectListOfSales=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 2,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="48501bd7-4c28-40bc-8251-3aecbf4a70ca",
                        name="ソニー太郎",
                        email="current_user@example.com",
                        role="sales",
                        job="部長",
                        company="テスト株式会社",
                        organization_name="営業部",
                        supporter_organization_id=[],
                        is_input_man_hour=None,
                        project_ids=set(),
                        agreed=True,
                        last_login_at="2022-04-25T03:21:39.356Z",
                        disabled=False,
                    ),
                ],
            ),
            # 実行ユーザに紐づく一般ユーザ情報が存在しない場合
            (
                "?isKarteUsageProjectListOfSales=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 2,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
            # 所属していない公開案件／非公開案件(実行ユーザに紐づく一般ユーザ情報のproject_idsにprojectが含まれない)
            (
                "?isKarteUsageProjectListOfSales=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 2,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="48501bd7-4c28-40bc-8251-3aecbf4a70ca",
                        name="ソニー太郎",
                        email="current_user@example.com",
                        role="sales",
                        job="部長",
                        company="テスト株式会社",
                        organization_name="営業部",
                        supporter_organization_id=[],
                        is_input_man_hour=None,
                        project_ids={
                            "XXXa46d3-1d56-428b-ac6d-a51e263b54a8",
                            "YYYa46d3-1d56-428b-ac6d-a51e263b54a8",
                        },
                        agreed=True,
                        last_login_at="2022-04-25T03:21:39.356Z",
                        disabled=False,
                    ),
                ],
            ),
            # 所属していない公開案件／非公開案件(実行ユーザに紐づく一般ユーザ情報のproject_idsにprojectが含まれない)
            (
                "?isKarteUsageProjectListOfSales=true",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=True,
                        is_solver_project=True,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": True,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト３",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": True,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト４",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": True,
                            "isSolverProject": True,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                        {
                            "id": "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト５",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                            "updateAt": "2022-05-23T16:34:21.523+09:00",
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="48501bd7-4c28-40bc-8251-3aecbf4a70ca",
                        name="ソニー太郎",
                        email="current_user@example.com",
                        role="sales",
                        job="部長",
                        company="テスト株式会社",
                        organization_name="営業部",
                        supporter_organization_id=[],
                        is_input_man_hour=None,
                        project_ids={
                            "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "333a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "444a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        },
                        agreed=True,
                        last_login_at="2022-04-25T03:21:39.356Z",
                        disabled=False,
                    ),
                ],
            ),
        ],
    )
    def test_ok_visible_only_by_karte_usage_project_list_for_sales(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """正常(営業担当者でアクセス可能な情報のみ取得).
        所属していない非公開案件はアクセス不可.
        所属していない案件：サンプルプロジェクト1～5のうち、2,3,4がアクセス不可で、取得するのは1,5.
        所属している案件：サンプルプロジェクト1～5のうち、全てアクセス可で、取得するのは1～5.
        """
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])
        # mock_auth_adminのユーザ部分を上書き
        # 営業担当者
        mock = mocker.patch.object(AdminModel, "get_admin_by_cognito_id")
        mock.return_value = AdminModel(
            id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            data_type=DataType.ADMIN,
            name="田中太郎",
            email="current_user@example.com",
            roles={UserRoleType.SALES.key},
            company=None,
            job="部長",
            supporter_organization_id={"180a3597-b7e7-42c8-902c-a29016afa662"},
            organization_name=None,
            cognito_id=None,
            last_login_at="2020-10-23T03:21:39.356000+0000",
            otp_secret=None,
            otp_verified_token="111111",
            otp_verified_at=None,
            disabled=False,
            create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            create_at="2020-10-23T03:21:39.356000+0000",
            update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
            update_at="2020-10-23T03:21:39.356000+0000",
            version=1,
        )

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        actual = response.json()
        assert response.status_code == 200
        assert actual == expected

    @pytest.mark.parametrize(
        "query_param",
        [
            # statusのENUM
            "?status=before",
            "?status=during",
            "?status=after",
            # sortのENUM
            "?sort=name:asc",
            "?sort=name:desc",
        ],
    )
    def test_enum_ok(
        self,
        mocker,
        mock_auth_admin,
        query_param,
    ):
        """status,sortのENUM確認"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = [
            MasterSupporterOrganizationModel(
                id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                name="組織開発",
                value=None,
                attributes=None,
                order=1,
                use=True,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T04:21:39.356000+0000",
                version=1,
            ),
        ]
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = [
            UserModel(
                id="a9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中太郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="b9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中次郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
            UserModel(
                id="c9b67094-cdab-494c-818e-d4845088269b",
                data_type=DataType.USER,
                name="田中三郎",
                email="user@example.com",
                role=UserRoleType.CUSTOMER,
                customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                customer_name="ソニーグループ株式会社",
                job="部長",
                company=None,
                supporter_organization_id=None,
                is_input_man_hour=None,
                project_ids=None,
                cognito_id=None,
                agreed=False,
                last_login_at=None,
                disabled=False,
                create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                create_at="2020-10-23T03:21:39.356000+0000",
                update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                update_at="2020-10-23T03:21:39.356000+0000",
                version=1,
            ),
        ]

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = [
            ProjectModel(
                id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                data_type=DataType.PROJECT,
                salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                name="サンプルプロジェクト１",
                customer_name="ソニーグループ株式会社",
                service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                create_new=True,
                continued=True,
                main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                contract_date="2021/01/30",
                phase="プラン提示(D)",
                customer_success="DXの実現",
                support_date_from="2021/01/30",
                support_date_to="2021/02/28",
                profit=GrossProfitAttribute(
                    monthly=[
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                    ],
                    quarterly=[1200000, 1200000, 1200000, 1200000],
                    half=[2400000, 2400000],
                    year=4800000,
                ),
                total_contract_time=200,
                main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                salesforce_main_customer=SalesforceMainCustomerAttribute(
                    name="山田太郎",
                    email="yamada@example.com",
                    organization_name="IST",
                    job="部長",
                ),
                customer_user_ids=set(list(["c9b67094-cdab-494c-818e-d4845088269b"])),
                main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                salesforce_main_supporter_user_name="山田太郎",
                supporter_user_ids=set(list(["c9b67094-cdab-494c-818e-d4845088269b"])),
                salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                is_count_man_hour=True,
                is_karte_remind=True,
                is_master_karte_remind=True,
                contract_type="有償",
                is_secret=False,
                is_solver_project=False,
                create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                create_at="2022-05-23T16:34:21.523000+0000",
                update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                update_at="2022-05-23T16:34:21.523000+0000",
                version=1,
            )
        ]
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = [
            ProjectModel(
                id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                data_type=DataType.PROJECT,
                salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                name="サンプルプロジェクト１",
                customer_name="ソニーグループ株式会社",
                service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                create_new=True,
                continued=True,
                main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                contract_date="2021/01/30",
                phase="プラン提示(D)",
                customer_success="DXの実現",
                support_date_from="2021/01/30",
                support_date_to="2021/02/28",
                profit=GrossProfitAttribute(
                    monthly=[
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                    ],
                    quarterly=[1200000, 1200000, 1200000, 1200000],
                    half=[2400000, 2400000],
                    year=4800000,
                ),
                total_contract_time=200,
                main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                salesforce_main_customer=SalesforceMainCustomerAttribute(
                    name="山田太郎",
                    email="yamada@example.com",
                    organization_name="IST",
                    job="部長",
                ),
                customer_user_ids=set(list(["c9b67094-cdab-494c-818e-d4845088269b"])),
                main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                salesforce_main_supporter_user_name="山田太郎",
                supporter_user_ids=set(list(["c9b67094-cdab-494c-818e-d4845088269b"])),
                salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                is_count_man_hour=True,
                is_karte_remind=True,
                is_master_karte_remind=True,
                contract_type="有償",
                is_secret=False,
                is_solver_project=False,
                create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                create_at="2022-05-23T16:34:21.523000+0000",
                update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                update_at="2022-05-23T16:34:21.523000+0000",
                version=1,
            )
        ]
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = [
            ProjectModel(
                id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                data_type=DataType.PROJECT,
                salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                name="サンプルプロジェクト１",
                customer_name="ソニーグループ株式会社",
                service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                create_new=True,
                continued=True,
                main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                contract_date="2021/01/30",
                phase="プラン提示(D)",
                customer_success="DXの実現",
                support_date_from="2021/01/30",
                support_date_to="2021/02/28",
                profit=GrossProfitAttribute(
                    monthly=[
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                        400000,
                    ],
                    quarterly=[1200000, 1200000, 1200000, 1200000],
                    half=[2400000, 2400000],
                    year=4800000,
                ),
                total_contract_time=200,
                main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                salesforce_main_customer=SalesforceMainCustomerAttribute(
                    name="山田太郎",
                    email="yamada@example.com",
                    organization_name="IST",
                    job="部長",
                ),
                customer_user_ids=set(list(["c9b67094-cdab-494c-818e-d4845088269b"])),
                main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                salesforce_main_supporter_user_name="山田太郎",
                supporter_user_ids=set(list(["c9b67094-cdab-494c-818e-d4845088269b"])),
                salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                is_count_man_hour=True,
                is_karte_remind=True,
                is_master_karte_remind=True,
                contract_type="有償",
                is_secret=False,
                is_solver_project=False,
                create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                create_at="2022-05-23T16:34:21.523000+0000",
                update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                update_at="2022-05-23T16:34:21.523000+0000",
                version=1,
            )
        ]

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        assert response.status_code == 200

    @pytest.mark.parametrize(
        "query_param, project_models, expected, master_models, user_models",
        [
            (
                "?name=サンプルプロジェクト&sort=name:asc&offsetPage=4&limit=2&status=after&fromYearMonth=202101&toYearMonth=202105&customerId=3c648558-c450-42d7-9c4b-62e0f22dc0ff&mainSalesUserId=a9b67094-cdab-494c-818e-d4845088269b&supporterOrganizationId=7ac8bddf-88da-46c9-a504-a03d1661ad58,180a3597-b7e7-42c8-902c-a29016afa662,de40733f-6be9-4fef-8229-01052f43c1e2&serviceTypeId=7ac8bddf-88da-46c9-a504-a03d1661ad58",
                [
                    ProjectModel(
                        id="111a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト１",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="222a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト２",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="333a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト３",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="444a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト４",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                    ProjectModel(
                        id="555a46d3-1d56-428b-ac6d-a51e263b54a8",
                        data_type=DataType.PROJECT,
                        salesforce_customer_id="c9b67094-cdab-494c-818e-d4845088269b",
                        customer_id="3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                        name="サンプルプロジェクト５",
                        customer_name="ソニーグループ株式会社",
                        service_type="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        create_new=True,
                        continued=True,
                        main_sales_user_id="a9b67094-cdab-494c-818e-d4845088269b",
                        contract_date="2021/01/30",
                        phase="プラン提示(D)",
                        customer_success="DXの実現",
                        support_date_from="2021/01/30",
                        support_date_to="2021/02/28",
                        profit=GrossProfitAttribute(
                            monthly=[
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                                400000,
                            ],
                            quarterly=[1200000, 1200000, 1200000, 1200000],
                            half=[2400000, 2400000],
                            year=4800000,
                        ),
                        total_contract_time=200,
                        main_customer_user_id="b9b67094-cdab-494c-818e-d4845088269b",
                        salesforce_main_customer=SalesforceMainCustomerAttribute(
                            name="山田太郎",
                            email="yamada@example.com",
                            organization_name="IST",
                            job="部長",
                        ),
                        customer_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        main_supporter_user_id="c9b67094-cdab-494c-818e-d4845088269b",
                        supporter_organization_id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        salesforce_main_supporter_user_name="山田太郎",
                        supporter_user_ids=set(
                            list(["c9b67094-cdab-494c-818e-d4845088269b"])
                        ),
                        salesforce_supporter_user_names=["山田太郎", "山田次郎"],
                        is_count_man_hour=True,
                        is_karte_remind=True,
                        is_master_karte_remind=True,
                        contract_type="有償",
                        is_secret=False,
                        is_solver_project=False,
                        create_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        create_at="2022-05-23T16:34:21.523000+0000",
                        update_id="998c3cd7-63b5-453f-9de2-5af21d565b98",
                        update_at="2022-05-23T16:34:21.523000+0000",
                        version=1,
                    ),
                ],
                {
                    "offsetPage": 1,
                    "total": 5,
                    "projects": [
                        {
                            "id": "111a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト１",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                        {
                            "id": "222a46d3-1d56-428b-ac6d-a51e263b54a8",
                            "customerId": "3c648558-c450-42d7-9c4b-62e0f22dc0ff",
                            "salesforceUpdateAt": None,
                            "name": "サンプルプロジェクト２",
                            "customerName": "ソニーグループ株式会社",
                            "serviceType": "7ac8bddf-88da-46c9-a504-a03d1661ad58",
                            "serviceTypeName": "組織開発",
                            "createNew": True,
                            "mainSalesUserId": "a9b67094-cdab-494c-818e-d4845088269b",
                            "mainSalesUserName": "田中太郎",
                            "phase": "プラン提示(D)",
                            "customerSuccess": "DXの実現",
                            "supportDateFrom": "2021/01/30",
                            "supportDateTo": "2021/02/28",
                            "totalContractTime": 200,
                            "mainCustomerUserId": "b9b67094-cdab-494c-818e-d4845088269b",
                            "mainCustomerUserName": "田中次郎",
                            "salesforceMainCustomer": {
                                "name": "山田太郎",
                                "email": "yamada@example.com",
                                "organizationName": "IST",
                            },
                            "customerUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "mainSupporterUserId": "c9b67094-cdab-494c-818e-d4845088269b",
                            "mainSupporterUserName": "田中三郎",
                            "supporterOrganizationId": "2d82eff6-0af4-48a6-8036-9bec43db33e1",
                            "supporterOrganizationName": "IST",
                            "salesforceMainSupporterUserName": "山田太郎",
                            "supporterUsers": [
                                {
                                    "id": "c9b67094-cdab-494c-818e-d4845088269b",
                                    "name": "田中三郎",
                                }
                            ],
                            "salesforceSupporterUserNames": ["山田太郎", "山田次郎"],
                            "isCountManHour": True,
                            "isKarteRemind": True,
                            "isMasterKarteRemind": True,
                            "contractType": "有償",
                            "isSecret": False,
                            "isSolverProject": False,
                        },
                    ],
                },
                [
                    MasterSupporterOrganizationModel(
                        id="7ac8bddf-88da-46c9-a504-a03d1661ad58",
                        data_type=MasterDataType.MASTER_SERVICE_TYPE.value,
                        name="組織開発",
                        value=None,
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                    MasterSupporterOrganizationModel(
                        id="2d82eff6-0af4-48a6-8036-9bec43db33e1",
                        data_type=MasterDataType.MASTER_SUPPORTER_ORGANIZATION.value,
                        name="Ideation Service Team",
                        value="IST",
                        attributes=None,
                        order=1,
                        use=True,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T04:21:39.356000+0000",
                        version=1,
                    ),
                ],
                [
                    UserModel(
                        id="a9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中太郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="b9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中次郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                    UserModel(
                        id="c9b67094-cdab-494c-818e-d4845088269b",
                        data_type=DataType.USER,
                        name="田中三郎",
                        email="user@example.com",
                        role=UserRoleType.CUSTOMER,
                        customer_id="033bd0b5-c2c7-4778-a58d-76a46500f7d9",
                        customer_name="ソニーグループ株式会社",
                        job="部長",
                        company=None,
                        supporter_organization_id=None,
                        is_input_man_hour=None,
                        project_ids=None,
                        cognito_id=None,
                        agreed=False,
                        last_login_at=None,
                        disabled=False,
                        create_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        create_at="2020-10-23T03:21:39.356000+0000",
                        update_id="fa5c9f96-af22-bbc6-ac4e-cbcb25ad18e7",
                        update_at="2020-10-23T03:21:39.356000+0000",
                        version=1,
                    ),
                ],
            ),
        ],
    )
    def test_page_not_found(
        self,
        mocker,
        mock_auth_admin,
        query_param,
        project_models,
        expected,
        master_models,
        user_models,
    ):
        """ページ Not found.  total:5件,limit=2,offsetPage=4"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        mock_master_supporter = mocker.patch.object(
            MasterSupporterOrganizationModel.data_type_value_index, "query"
        )
        mock_master_supporter.return_value = master_models
        mock_user = mocker.patch.object(UserModel.data_type_name_index, "query")
        mock_user.return_value = user_models

        mock_project = mocker.patch.object(ProjectModel.customer_id_name_index, "query")
        mock_project.return_value = project_models
        mock_project_2 = mocker.patch.object(ProjectModel.data_type_name_index, "query")
        mock_project_2.return_value = project_models
        mock_project_3 = mocker.patch.object(
            ProjectModel.data_type_support_date_to_index, "query"
        )
        mock_project_3.return_value = project_models

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        assert response.status_code == 404

    @pytest.mark.parametrize(
        "query_param",
        [
            # fromYearMonth
            "?fromYearMonth=202013",
            # toYearMonth
            "?toYearMonth=202013",
            # fromYearMonth, toYearMonth の年月の逆転
            "?fromYearMonth=202202&toYearMonth=202201",
        ],
    )
    def test_validation(
        self,
        mocker,
        mock_auth_admin,
        query_param,
    ):
        """fromYearMonth, toYearMonth バリデーションエラー"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        assert response.status_code == 400

    @pytest.mark.parametrize(
        "query_param",
        [
            # status: Enum
            "?status=end",
            # sort: Enum
            "?sort=name:aaa",
        ],
    )
    def test_validation_enum(
        self,
        mocker,
        mock_auth_admin,
        query_param,
    ):
        """status,sortのENUMバリデーションエラー"""
        mock_auth_admin([UserRoleType.SYSTEM_ADMIN.key])

        response = client.get(f"/api/projects{query_param}", headers=REQUEST_HEADERS)

        assert response.status_code == 422
